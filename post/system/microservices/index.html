<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://blog.nagih.io.vn/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://blog.nagih.io.vn/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://blog.nagih.io.vn/css/github.min.css' />
    <link rel="stylesheet" href='https://blog.nagih.io.vn/css/github-style.css' />
    <link rel="stylesheet" href='https://blog.nagih.io.vn/css/light.css' />
    <link rel="stylesheet" href='https://blog.nagih.io.vn/css/dark.css' />
    <link rel="stylesheet" href='https://blog.nagih.io.vn/css/syntax.css' />
    <title>Microservices - Nagih&#39;s blog</title>
    
    <link rel="icon" type="image/x-icon" href='/images/avatar.png'>
    
    <meta name="theme-color" content="#1e2327">

    <link rel="stylesheet" href="https://blog.nagih.io.vn/css/custom.css">
    <script type="text/javascript" src="https://blog.nagih.io.vn/js/custom.js"></script>

    
    <meta name="description"
  content="Tổng quan về kiến trúc microservices
" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://blog.nagih.io.vn/post/system/microservices/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Microservices - Nagih&#39;s blog" />
<meta name="twitter:description"
  content="Tổng quan về kiến trúc microservices
" />
<meta name="twitter:site" content="https://blog.nagih.io.vn/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://blog.nagih.io.vn/">


<meta property="og:type" content="article" />
<meta property="og:title" content="Microservices - Nagih&#39;s blog">
<meta property="og:description"
  content="Tổng quan về kiến trúc microservices
" />
<meta property="og:url" content="https://blog.nagih.io.vn/post/system/microservices/" />
<meta property="og:site_name" content="Microservices" />
<meta property="og:image"
  content="https://blog.nagih.io.vn/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2025-08-07 00:00:00 &#43;0000 UTC" />













</head>


<body>
  <div style="position: relative">
	<header
		class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
		<div
			class="Header-item mobile-none"
			style="margin-top: -4px; margin-bottom: -4px">
			<a class="Header-link" href="https://blog.nagih.io.vn/">
				<img
					class="octicon"
					height="32"
					width="32"
					src="https://avatars.githubusercontent.com/u/123850496?v=4" />
			</a>
		</div>
		<div class="Header-item d-md-none">
			<button
				class="Header-link btn-link js-details-target"
				type="button"
				onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
				<svg
					height="24"
					class="octicon octicon-three-bars"
					viewBox="0 0 16 16"
					version="1.1"
					width="24">
					<path
						fill-rule="evenodd"
						d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
				</svg>
			</button>
		</div>
		<div
			style="display: none"
			id="header-search"
			class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
			<div
				class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
				<div class="position-relative">
					
					<form
						id="search-form"
						action=""
						accept-charset="UTF-8"
						method="get"
						autocomplete="off">
						<label
							class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
							<input
								type="text"
								class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
								name="q"
								value=""
								placeholder="Search"
								autocomplete="off" />
						</label>
					</form>
					
				</div>
			</div>
		</div>

		<div
			class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
			<a class="Header-link" href="https://blog.nagih.io.vn/">
				<img
					class="octicon octicon-mark-github v-align-middle"
					height="32"
					width="32"
					src="https://avatars.githubusercontent.com/u/123850496?v=4" />
			</a>
		</div>
		<div class="Header-item" style="margin-right: 0">
			<a
				href="javascript:void(0)"
				class="Header-link no-select"
				onclick="switchTheme()">
				<svg
					style="fill: var(--color-profile-color-modes-toggle-moon)"
					class="no-select"
					viewBox="0 0 16 16"
					version="1.1"
					width="16"
					height="16">
					<path
						fill-rule="evenodd"
						clip-rule="evenodd"
						d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z"></path>
				</svg>
			</a>
		</div>
	</header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://blog.nagih.io.vn/">
                  <img class=" avatar-user"
                    src="https://avatars.githubusercontent.com/u/123850496?v=4"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <strong>
                      <a href="https://blog.nagih.io.vn/">Nagih</a>
                    </strong>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="https://blog.nagih.io.vn/post/system/microservices/">Microservices</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Thu, 07 Aug 2025 00:00:00 &#43;0000"
                    class="no-wrap">
                    Thu, 07 Aug 2025 00:00:00 &#43;0000</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Mon, 18 Aug 2025 09:31:59 &#43;0700"
                    class="no-wrap">
                    Mon, 18 Aug 2025 09:31:59 &#43;0700</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      1007 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/system">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      system
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/microservices">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      microservices
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><p>Tổng quan về kiến trúc microservices</p>
<h3 id="1-kiến-trúc-microservices-là-gì">1. Kiến trúc Microservices là gì?</h3>
<p>Hãy tưởng tượng bạn đang xây một ngôi nhà.</p>
<ul>
<li>
<p><strong>Kiến trúc nguyên khối (Monolith):</strong> Bạn xây toàn bộ ngôi nhà bằng một khối bê tông khổng lồ duy nhất. Mọi thứ dính liền với nhau. Nếu bạn muốn sửa đường ống nước trong bếp, bạn có thể phải đục cả bức tường lớn, ảnh hưởng đến phòng khách bên cạnh.</p>
</li>
<li>
<p><strong>Kiến trúc Microservices:</strong> Bạn xây ngôi nhà bằng những viên gạch LEGO. Mỗi phòng (phòng khách, phòng ngủ, nhà bếp) là một khối LEGO riêng. Nếu muốn sửa bếp, bạn chỉ cần nhấc khối LEGO &ldquo;nhà bếp&rdquo; ra, sửa nó, rồi đặt lại mà không ảnh hưởng gì đến các phòng khác.</p>
</li>
</ul>
<p>Trong phần mềm, <strong>kiến trúc microservices</strong> là phương pháp chia một ứng dụng lớn thành <strong>nhiều dịch vụ (service) nhỏ, độc lập</strong>. Mỗi service đảm nhiệm một chức năng cụ thể, có database riêng, và được phát triển, triển khai, nâng cấp độc lập với các service khác.</p>
<p><img src="/images/Pasted%20image%2020250807092251.png" alt="Image Description"></p>
<h3 id="2-các-service-giao-tiếp-với-nhau-ra-sao-có-giống-frontend-gọi-tới-backend-không">2. Các Service giao tiếp với nhau ra sao? Có giống Frontend gọi tới Backend không?</h3>
<p>Đây là câu hỏi cốt lõi và quan trọng nhất. Các service (vốn là các backend) giao tiếp với nhau qua mạng. Có hai kiểu giao tiếp chính:</p>
<h4 id="giao-tiếp-đồng-bộ-synchronous"><strong>Giao tiếp Đồng bộ (Synchronous)</strong></h4>
<p>Giống như một cuộc gọi điện thoại. Service A gọi đến Service B và phải <strong>chờ</strong> Service B trả lời rồi mới làm việc tiếp.</p>
<ul>
<li>
<p><strong>Cách thức:</strong> Thường sử dụng các giao thức như <strong>REST API (qua HTTP/S)</strong> hoặc <strong>gRPC</strong>.</p>
</li>
<li>
<p><strong>Ví dụ:</strong> Khi bạn đặt hàng, <code>Service Đơn Hàng</code> sẽ gọi trực tiếp đến <code>Service Kho Hàng</code> để hỏi &ldquo;Sản phẩm X còn hàng không?&rdquo;. <code>Service Đơn Hàng</code> sẽ phải đợi câu trả lời từ <code>Service Kho Hàng</code> rồi mới cho phép khách đặt hàng.</p>
</li>
<li>
<p><strong>Giống Frontend gọi Backend không?</strong> Về mặt kỹ thuật (dùng REST API) thì <strong>giống</strong>, nhưng bản chất là <strong>khác</strong>. Đây là giao tiếp <strong>giữa các backend với nhau (backend-to-backend)</strong>, diễn ra bên trong hệ thống mà người dùng không nhìn thấy.</p>
</li>
</ul>
<h4 id="giao-tiếp-bất-đồng-bộ-asynchronous"><strong>Giao tiếp Bất đồng bộ (Asynchronous)</strong></h4>
<p>Giống như gửi email hoặc tin nhắn. Service A gửi một &ldquo;thông điệp&rdquo; (message) cho Service B rồi tiếp tục công việc của mình ngay lập tức, <strong>không cần chờ</strong> B trả lời. Service B sẽ nhận và xử lý thông điệp đó khi nào sẵn sàng.</p>
<ul>
<li>
<p><strong>Cách thức:</strong> Sử dụng một hệ thống trung gian gọi là <strong>Message Broker</strong> (hoặc Message Queue) như <strong>RabbitMQ, Kafka</strong>.</p>
</li>
<li>
<p><strong>Ví dụ:</strong> Sau khi bạn đặt hàng thành công, <code>Service Đơn Hàng</code> sẽ gửi một thông điệp có nội dung &ldquo;Đơn hàng #123 đã được tạo&rdquo; vào một hàng đợi (queue). <code>Service Thông Báo</code> sẽ lắng nghe hàng đợi này, thấy có thông điệp mới liền lấy ra và gửi email xác nhận cho bạn. <code>Service Đơn Hàng</code> không cần quan tâm <code>Service Thông Báo</code> đã gửi email hay chưa.</p>
</li>
<li>
<p><strong>Ưu điểm:</strong> Giúp các service <strong>hoàn toàn độc lập</strong> (decoupled). Nếu <code>Service Thông Báo</code> bị lỗi, các đơn hàng vẫn được tạo bình thường, các thông điệp sẽ nằm chờ trong queue để được xử lý sau.</p>
</li>
</ul>
<hr>
<h3 id="3-có-phải-microservices-là-kiến-trúc-ở-backend-frontend-chỉ-cần-1-service">3. Có phải Microservices là kiến trúc ở Backend? Frontend chỉ cần 1 service?</h3>
<p>Đúng vậy, <strong>Microservices chủ yếu là một kiến trúc cho phần backend</strong>. Tuy nhiên, việc có nhiều service backend nhỏ lẻ lại tạo ra một vấn đề cho frontend: &ldquo;Frontend nên gọi đến service nào?&rdquo;.</p>
<p>Không thể để frontend (ứng dụng web, mobile) gọi trực tiếp đến 10 service backend khác nhau. Điều này rất phức tạp, khó quản lý và không an toàn. Giải pháp phổ biến nhất là sử dụng một <strong>API Gateway</strong>.</p>
<h4 id="api-gateway-là-gì"><strong>API Gateway là gì?</strong></h4>
<p>Hãy coi API Gateway như một <strong>anh chàng lễ tân</strong> của toàn bộ hệ thống.</p>
<ul>
<li>
<p>Frontend chỉ cần nói chuyện với &ldquo;anh lễ tân&rdquo; này thôi.</p>
</li>
<li>
<p>&ldquo;Anh lễ tân&rdquo; sẽ chịu trách nhiệm xác thực yêu cầu, sau đó xem xét yêu cầu này thuộc về phòng ban nào (service nào) và chuyển tiếp đến đúng nơi.</p>
</li>
<li>
<p>Nó cũng có thể tổng hợp thông tin từ nhiều service trước khi trả về cho frontend.</p>
</li>
</ul>
<p><strong>Ví dụ:</strong> Để hiển thị trang chi tiết sản phẩm, frontend chỉ cần gửi 1 yêu cầu duy nhất đến API Gateway. API Gateway sẽ tự động gọi đến <code>Service Sản Phẩm</code> để lấy thông tin sản phẩm và gọi đến <code>Service Đánh Giá</code> để lấy các bình luận, sau đó gộp hai kết quả này lại và trả về cho frontend.</p>
<p>Vậy câu trả lời là: <strong>Backend được chia thành nhiều microservices, và thường có một lớp API Gateway làm điểm vào duy nhất cho tất cả các client (web, mobile&hellip;).</strong></p>
<hr>
<h3 id="4-vấn-đề-về-dữ-liệu-mỗi-service-một-database">4. Vấn đề về Dữ liệu: Mỗi Service một Database?</h3>
<p>Đây là một trong những quy tắc vàng và cũng là thách thức lớn nhất của microservices: <strong>Mỗi microservice phải sở hữu và quản lý cơ sở dữ liệu (database) của riêng mình.</strong></p>
<ul>
<li>
<p><strong>Tại sao?</strong> Để đảm bảo tính độc lập tuyệt đối. Nếu <code>Service A</code> và <code>Service B</code> dùng chung một database, khi <code>Service A</code> muốn thay đổi cấu trúc bảng, nó có thể làm sập <code>Service B</code>. Như vậy thì không còn gọi là độc lập nữa.</p>
</li>
<li>
<p><strong>Thách thức:</strong> Làm sao để thực hiện một nghiệp vụ yêu cầu dữ liệu từ nhiều service? Ví dụ: làm sao để đảm bảo khi tạo đơn hàng (Service Đơn Hàng) thì số lượng tồn kho (Service Kho Hàng) cũng phải được trừ đi một cách nhất quán?</p>
</li>
<li>
<p><strong>Giải pháp:</strong> Cần sử dụng các pattern nâng cao như <strong>Saga Pattern</strong> để quản lý các giao dịch phân tán (distributed transactions). Đây là một chủ đề phức tạp, nhưng ý tưởng cơ bản là mỗi service sẽ thực hiện phần việc của mình và phát ra sự kiện để service tiếp theo thực hiện phần việc của nó.</p>
</li>
</ul>
<hr>
<p><em>Nếu thấy hay, hãy để lại cho mình 1 comment xuống phía dưới để mình có động lực viết các blog chất lượng tiếp theo nhé!</em></p></article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://blog.nagih.io.vn/js/toc.js'></script>
<link rel="stylesheet" href='https://blog.nagih.io.vn/css/toc.css' />

  
<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='https://blog.nagih.io.vn/css/gitalk.css'>
<script src='https://blog.nagih.io.vn/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'Ov23li9UG1K7XEEbH2rX',
    clientSecret: '314c5b3c2437a868e716ca4bd2ee12ca9eb200e3',
    repo: 'blog',
    owner: 'vuongmanhnghia',
    admin: ['vuongmanhnghia'],
    id: eval("location.pathname"), 
    distractionFreeMode: false 
  });
  (function() {
    gitalk.render('gitalk-container');
  })();
</script>

</div>

  <div class="footer container-xl width-full p-responsive">
	<div
		class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light">
		<a
			target="_blank"
			aria-label="Homepage"
			title="GitHub"
			class="footer-octicon d-none d-lg-block mr-lg-4"
			href="https://blog.nagih.io.vn/">
			<svg
				height="24"
				class="octicon octicon-mark-github"
				viewBox="0 0 16 16"
				version="1.1"
				width="24">
				<path
					fill-rule="evenodd"
					d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
			</svg>
		</a>
		<ul
			class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
			
			<li class="mr-3 mr-lg-0">
				<a href="https://github.com/vuongmanhnghia" target="_blank"
					>Vuong Manh Nghia</a
				>
			</li>
			
			<li class="mr-3 mr-lg-0">
				GitHub and the Invertocat logo are trademarks of
				<a href="https://github.com/" target="_blank">GitHub, Inc.</a>
			</li>
		</ul>
	</div>
	<div class="d-flex flex-justify-center pb-6">
		<span class="f6 text-gray-light"></span>
	</div>
</div>

</body>

<script type="application/javascript" src="https://blog.nagih.io.vn/js/github-style.js"></script>





<script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
<script type="application/javascript" src='https://blog.nagih.io.vn/js/search.js'></script>



</html>