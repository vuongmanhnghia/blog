
      
      
      
    
      
      
      
    
      
      
      
    [{"authors":null,"categories":null,"content":"1. Kiến trúc Microservices là gì? Hãy tưởng tượng bạn đang xây một ngôi nhà.\nKiến trúc nguyên khối (Monolith): Bạn xây toàn bộ ngôi nhà bằng một khối bê tông khổng lồ duy nhất. Mọi thứ dính liền với nhau. Nếu bạn muốn sửa đường ống nước trong bếp, bạn có thể phải đục cả bức tường lớn, ảnh hưởng đến phòng khách bên cạnh.\nKiến trúc Microservices: Bạn xây ngôi nhà bằng những viên gạch LEGO. Mỗi phòng (phòng khách, phòng ngủ, nhà bếp) là một khối LEGO riêng. Nếu muốn sửa bếp, bạn chỉ cần nhấc khối LEGO “nhà bếp” ra, sửa nó, rồi đặt lại mà không ảnh hưởng gì đến các phòng khác.\nTrong thế giới phần mềm, kiến trúc microservices là phương pháp chia một ứng dụng lớn thành nhiều dịch vụ (service) nhỏ, độc lập. Mỗi service đảm nhiệm một chức năng kinh doanh cụ thể, có cơ sở dữ liệu riêng, và được phát triển, triển khai, nâng cấp độc lập với các service khác.\n2. Các Service giao tiếp với nhau ra sao? Có giống Frontend gọi tới Backend không? Đây là câu hỏi cốt lõi và quan trọng nhất. Các service (vốn là các backend) giao tiếp với nhau qua mạng. Có hai kiểu giao tiếp chính:\na. Giao tiếp Đồng bộ (Synchronous) Giống như một cuộc gọi điện thoại. Service A gọi đến Service B và phải chờ Service B trả lời rồi mới làm việc tiếp.\nCách thức: Thường sử dụng các giao thức như REST API (qua HTTP/S) hoặc gRPC.\nVí dụ: Khi bạn đặt hàng, Service Đơn Hàng sẽ gọi trực tiếp đến Service Kho Hàng để hỏi “Sản phẩm X còn hàng không?”. Service Đơn Hàng sẽ phải đợi câu trả lời từ Service Kho Hàng rồi mới cho phép khách đặt hàng.\nGiống Frontend gọi Backend không? Về mặt kỹ thuật (dùng REST API) thì giống, nhưng bản chất là khác. Đây là giao tiếp giữa các backend với nhau (backend-to-backend), diễn ra bên trong hệ thống mà người dùng không nhìn thấy.\nb. Giao tiếp Bất đồng bộ (Asynchronous) Giống như gửi email hoặc tin nhắn. Service A gửi một “thông điệp” (message) cho Service B rồi tiếp tục công việc của mình ngay lập tức, không cần chờ B trả lời. Service B sẽ nhận và xử lý thông điệp đó khi nào sẵn sàng.\nCách thức: Sử dụng một hệ thống trung gian gọi là Message Broker (hoặc Message Queue) như RabbitMQ, Kafka.\nVí dụ: Sau khi bạn đặt hàng thành công, Service Đơn Hàng sẽ gửi một thông điệp có nội dung “Đơn hàng #123 đã được tạo” vào một hàng đợi (queue). Service Thông Báo sẽ lắng nghe hàng đợi này, thấy có thông điệp mới liền lấy ra và gửi email xác nhận cho bạn. Service Đơn Hàng không cần quan tâm Service Thông Báo đã gửi email hay chưa.\nƯu điểm: Giúp các service hoàn toàn độc lập (decoupled). Nếu Service Thông Báo bị lỗi, các đơn hàng vẫn được tạo bình thường, các thông điệp sẽ nằm chờ trong queue để được xử lý sau.\n3. Có phải Microservices là kiến trúc ở Backend? Frontend chỉ cần 1 service? Đúng vậy, Microservices chủ yếu là một kiến trúc cho phần backend. Tuy nhiên, việc có nhiều service backend nhỏ lẻ lại tạo ra một vấn đề cho frontend: “Frontend nên gọi đến service nào?”.\nKhông thể để frontend (ứng dụng web, mobile) gọi trực tiếp đến 10 service backend khác nhau. Điều này rất phức tạp, khó quản lý và không an toàn. Giải pháp phổ biến nhất là sử dụng một API Gateway.\nAPI Gateway là gì? Hãy coi API Gateway như một anh chàng lễ tân của toàn bộ hệ thống.\nFrontend chỉ cần nói chuyện với “anh lễ tân” này thôi.\n“Anh lễ tân” sẽ chịu trách nhiệm xác thực yêu cầu, sau đó xem xét yêu cầu này thuộc về phòng ban nào (service nào) và chuyển tiếp đến đúng nơi.\nNó cũng có thể tổng hợp thông tin từ nhiều service trước khi trả về cho frontend.\nVí dụ: Để hiển thị trang chi tiết sản phẩm, frontend chỉ cần gửi 1 yêu cầu duy nhất đến API Gateway. API Gateway sẽ tự động gọi đến Service Sản Phẩm để lấy thông tin sản phẩm và gọi đến Service Đánh Giá để lấy các bình luận, sau đó gộp hai kết quả này lại và trả về cho frontend.\nVậy câu trả lời là: Backend được chia thành nhiều microservices, và thường có một lớp API Gateway làm điểm vào duy nhất cho tất cả các client (web, mobile…).\n4. Vấn đề về Dữ liệu: Mỗi Service một Database? Đây là một trong những quy tắc vàng và cũng là thách thức lớn nhất của microservices: Mỗi microservice phải sở hữu và quản lý cơ sở dữ liệu (database) của riêng mình.\nTại sao? Để đảm bảo tính độc lập tuyệt đối. Nếu Service A và Service B dùng chung một database, khi Service A muốn thay đổi cấu trúc bảng, nó có thể làm sập Service B. Như vậy thì không còn gọi là độc lập nữa.\nThách thức: Làm sao để thực hiện một nghiệp vụ yêu cầu dữ liệu từ nhiều service? Ví dụ: làm sao để đảm bảo khi tạo đơn hàng (Service Đơn Hàng) thì số lượng tồn kho (Service Kho Hàng) cũng phải được trừ đi một cách nhất quán?\nGiải pháp: Cần sử dụng các pattern nâng cao như Saga Pattern để quản lý các giao dịch phân tán (distributed transactions). Đây là một chủ đề phức tạp, nhưng ý tưởng cơ bản là mỗi service sẽ thực hiện phần việc của mình và phát ra sự kiện để service tiếp theo thực hiện phần việc của nó.\n","date":1571741207,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1754629378,"objectID":"6f7eb678d11b2b6bc21a9dbcc6fb0131","permalink":"https://blog.nagih.io.vn/post/microservices/","publishdate":"2019-10-22T18:46:47+08:00","relpermalink":"/post/microservices/","section":"post","summary":"","tags":null,"title":"Microservices","type":"post"},{"authors":null,"categories":null,"content":"Obsidian - Why I love it Obsidian is the BEST notes application in the world. Go download it: https://obsidian.md/ The Setup Create a new folder labeled posts. This is where you will add your blog posts ….that’s all you have to do Actually…wait….find out where your Obsidian directories are. Right click your posts folder and choose show in system explorer You’ll need this directory in upcoming steps. ! Setting up Hugo Install Hugo Prerequisites Install Git: https://github.com/git-guides/install-git Install Go: https://go.dev/dl/ Install Hugo Link: https://gohugo.io/installation/\nCreate a new site ## Verify Hugo works hugo version ## Create a new site hugo new site blog cd blog Download a Hugo Theme Find themes from this link: https://themes.gohugo.io/ follow the theme instructions on how to download. The BEST option is to install as a git submodule ## Initialize a git repository (Make sure you are in your Hugo website directory) git init ## Set global username and email parameters for git git config --global user.name \u0026#34;Your Name\u0026#34; git config --global user.email \u0026#34;your.email@example.com\u0026#34; ## Install a theme (we are installing the Terminal theme here). Once downloaded it should be in your Hugo themes folder ## Find a theme ---\u0026gt; https://themes.gohugo.io/ git submodule add -f https://github.com/panr/hugo-theme-terminal.git themes/terminal Adjust Hugo settings Most themes you download will have an example configuration you can use. This is usually the best way to make sure Hugo works well and out of the box. For the Terminal theme, they gave this example config below. We will edit the hugo.toml file to make these changes. —-\u0026gt; nano hugo.toml (Linux/Mac) or notepad hugo.toml (Windows) or code hugo.toml (All platforms) baseurl = \u0026#34;/your-domain\u0026#34; publishDir = \u0026#34;public\u0026#34; languageCode = \u0026#34;en-us\u0026#34; # Add it only if you keep the theme in the `themes` directory. # Remove it if you use the theme as a remote Hugo Module. theme = \u0026#34;terminal\u0026#34; paginate = 5 [params] # dir name of your main content (default is `content/posts`). # the list of set content will show up on your index page (baseurl). contentTypeName = \u0026#34;posts\u0026#34; # if you set this to 0, only submenu trigger will be visible showMenuItems = 2 # show selector to switch language showLanguageSelector = yes # set theme to full screen width fullWidthTheme = yes # center theme with default width centerTheme = yes # if your resource directory contains an image called `cover.(jpg|png|webp)`, # then the file will be used as a cover automatically. # With this option you don\u0026#39;t have to put the `cover` param in a front-matter. autoCover = true # set post to show the last updated # If you use git, you can set `enableGitInfo` to `true` and then post will automatically get the last updated showLastUpdated = false # Provide a string as a prefix for the last update date. By default, it looks like this: 2020-xx-xx [Updated: 2020-xx-xx] :: Author # updatedDatePrefix = \u0026#34;Updated\u0026#34; # whether to show a page\u0026#39;s estimated reading time # readingTime = false # default # whether to show a table of contents # can be overridden in a page\u0026#39;s front-matter # Toc = false # default # set title for the table of contents # can be overridden in a page\u0026#39;s front-matter # TocTitle = \u0026#34;Table of Contents\u0026#34; # default [params.twitter] # set Twitter handles for Twitter cards # see https://developer.twitter.com/en/docs/tweets/optimize-with-cards/guides/getting-started#card-and-content-attribution # do not include @ creator = \u0026#34;\u0026#34; site = \u0026#34;\u0026#34; [languages] [languages.en] languageName = \u0026#34;English\u0026#34; title = \u0026#34;Terminal\u0026#34; [languages.en.params] subtitle = \u0026#34;A simple, retro theme for Hugo\u0026#34; owner = \u0026#34;\u0026#34; keywords = \u0026#34;\u0026#34; copyright = \u0026#34;\u0026#34; menuMore = \u0026#34;Show more\u0026#34; readMore = \u0026#34;Read more\u0026#34; readOtherPosts = \u0026#34;Read other posts\u0026#34; newerPosts = \u0026#34;Newer posts\u0026#34; olderPosts = \u0026#34;Older posts\u0026#34; missingContentMessage = \u0026#34;Page not found...\u0026#34; missingBackButtonLabel = \u0026#34;Back to home page\u0026#34; minuteReadingTime = \u0026#34;min read\u0026#34; words = \u0026#34;words\u0026#34; [languages.en.params.logo] logoText = \u0026#34;Terminal\u0026#34; logoHomeLink = \u0026#34;/\u0026#34; [languages.en.menu] [[languages.en.menu.main]] identifier = \u0026#34;about\u0026#34; name = \u0026#34;About\u0026#34; url = \u0026#34;/about\u0026#34; [[languages.en.menu.main]] identifier = \u0026#34;showcase\u0026#34; name = \u0026#34;Showcase\u0026#34; url = \u0026#34;/showcase\u0026#34; Test Hugo ## Verify Hugo works with your theme by running this command hugo server -t themename # Walking Through the Steps _NOTE: There is a MEGA SCRIPT later in this blog that will do everything in one go._ ## Syncing Obsidian to Hugo ### Windows ```powershell robocopy sourcepath destination path /mir Mac/Linux rsync -av --delete \u0026#34;sourcepath\u0026#34; \u0026#34;destinationpath\u0026#34; Add some frontmatter --- title: blogtitle date: 2024-11-06 draft: false tags: - tag1 - tag2 --- Transfer Images from Obsidian to Hugo Windows import os import re import shutil # Paths (using raw strings to handle Windows backslashes correctly) posts_dir = r\u0026#34;C:\\Users\\$USER\\Documents\\blog\\content\\posts\u0026#34; attachments_dir = r\u0026#34;C:\\Users\\$USER\\Documents\\Obsidian Vault\\Attachments\u0026#34; static_images_dir = r\u0026#34;C:\\Users\\$USER\\blog\\static\\images\u0026#34; # Step 1: Process each …","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1754629378,"objectID":"44f8921c02cb368e686e72119fe9d24b","permalink":"https://blog.nagih.io.vn/post/my-blog-pipeline/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/post/my-blog-pipeline/","section":"post","summary":"Obsidian - Why I love it Obsidian is the BEST notes application in the world. Go download it: https://obsidian.md/ The Setup Create a new folder labeled posts. This is where you will add your blog posts ….that’s all you have to do Actually…wait….find out where your Obsidian directories are. Right click your posts folder and choose show in system explorer You’ll need this directory in upcoming steps. ! Setting up Hugo Install Hugo Prerequisites Install Git: https://github.com/git-guides/install-git Install Go: https://go.dev/dl/ Install Hugo Link: https://gohugo.io/installation/\n","tags":null,"title":"","type":"post"}]