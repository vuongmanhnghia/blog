<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hướng dẫn setup cloudflared tunnel cơ bản | Nagih | Blog</title>
<meta name=keywords content="tunnel"><meta name=description content="Thiết lập Cloudflare Tunnel là một bước nâng cao cực kỳ mạnh mẽ cho server của bạn. Nó giúp bạn phơi bày (expose) các dịch vụ đang chạy trên server ra internet một cách an toàn mà không cần mở bất kỳ cổng nào trên Firewall."><meta name=author content="Nagih"><link rel=canonical href=https://blog.nagih.io.vn/posts/cloudflared-tunnel-workflow/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.08f7d74f0ada0f975d29ae436285b61ed7a719d05f350cb888d00341642995a2.css integrity="sha256-CPfXTwraD5ddKa5DYoW2HtenGdBfNQy4iNADQWQplaI=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.nagih.io.vn/posts/cloudflared-tunnel-workflow/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.nagih.io.vn/posts/cloudflared-tunnel-workflow/"><meta property="og:site_name" content="Nagih | Blog"><meta property="og:title" content="Hướng dẫn setup cloudflared tunnel cơ bản"><meta property="og:description" content="Thiết lập Cloudflare Tunnel là một bước nâng cao cực kỳ mạnh mẽ cho server của bạn. Nó giúp bạn phơi bày (expose) các dịch vụ đang chạy trên server ra internet một cách an toàn mà không cần mở bất kỳ cổng nào trên Firewall."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-19T00:00:00+00:00"><meta property="article:modified_time" content="2025-10-19T00:00:00+00:00"><meta property="article:tag" content="Tunnel"><meta property="og:image" content="https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Hướng dẫn setup cloudflared tunnel cơ bản"><meta name=twitter:description content="Thiết lập Cloudflare Tunnel là một bước nâng cao cực kỳ mạnh mẽ cho server của bạn. Nó giúp bạn phơi bày (expose) các dịch vụ đang chạy trên server ra internet một cách an toàn mà không cần mở bất kỳ cổng nào trên Firewall."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.nagih.io.vn/posts/"},{"@type":"ListItem","position":2,"name":"Hướng dẫn setup cloudflared tunnel cơ bản","item":"https://blog.nagih.io.vn/posts/cloudflared-tunnel-workflow/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hướng dẫn setup cloudflared tunnel cơ bản","name":"Hướng dẫn setup cloudflared tunnel cơ bản","description":"Thiết lập Cloudflare Tunnel là một bước nâng cao cực kỳ mạnh mẽ cho server của bạn. Nó giúp bạn phơi bày (expose) các dịch vụ đang chạy trên server ra internet một cách an toàn mà không cần mở bất kỳ cổng nào trên Firewall.\n","keywords":["tunnel"],"articleBody":"Thiết lập Cloudflare Tunnel là một bước nâng cao cực kỳ mạnh mẽ cho server của bạn. Nó giúp bạn phơi bày (expose) các dịch vụ đang chạy trên server ra internet một cách an toàn mà không cần mở bất kỳ cổng nào trên Firewall.\nMục tiêu: Chạy một ứng dụng web trên server (ví dụ: localhost:3000).\nTạo một Tunnel để kết nối server với Cloudflare.\nTruy cập ứng dụng web đó qua một tên miền phụ (ví dụ: app.yourdomain.com) với HTTPS mà không cần mở cổng 80/443 trên server.\nGiai Đoạn 0: Điều Kiện Cần Có Tài khoản Cloudflare: Hoàn toàn miễn phí.\nTên miền đã thêm vào Cloudflare: Bạn phải quản lý DNS của tên miền đó thông qua Cloudflare.\nServer đã cài đặt: Một VPS hoặc máy chủ vật lý đang chạy (ví dụ: Ubuntu 22.04).\nMột dịch vụ đang chạy trên server: Ví dụ, một ứng dụng Node.js đang lắng nghe ở cổng 3000.\nPhase 1: Cài Đặt cloudflared trên Server cloudflared là một daemon (một chương trình chạy nền) gọn nhẹ sẽ tạo và quản lý kết nối Tunnel.\nKết nối SSH vào server của bạn.\nTải và cài đặt cloudflared (Dành cho Debian/Ubuntu):\nThêm kho lưu trữ của Cloudflare để đảm bảo bạn luôn có phiên bản mới nhất.\n# Thêm GPG key của Cloudflare sudo mkdir -p --mode=0755 /usr/share/keyrings curl -fsSL https://pkg.cloudflare.com/cloudflare-main.gpg | sudo tee /usr/share/keyrings/cloudflare-main.gpg \u003e/dev/null # Thêm kho lưu trữ Cloudflare vào sources list echo \"deb [signed-by=/usr/share/keyrings/cloudflare-main.gpg] https://pkg.cloudflare.com/cloudflared $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/cloudflared.list # Cập nhật và cài đặt sudo apt-get update sudo apt-get install cloudflared -y Lưu ý: Nếu bạn dùng phiên bản Ubuntu khác jammy (22.04), hãy thay thế nó bằng tên mã của phiên bản bạn đang dùng (ví dụ: focal cho 20.04).\nPhase 2: Xác Thực cloudflared với Tài Khoản Cloudflare Bước này sẽ liên kết daemon cloudflared trên server của bạn với tài khoản Cloudflare.\nChạy lệnh đăng nhập:\ncloudflared tunnel login Thực hiện xác thực:\nLệnh trên sẽ in ra một đường link URL trong terminal.\nCopy và Paste vào trình duyệt trên máy tính cá nhân của bạn.\nĐăng nhập vào tài khoản Cloudflare của bạn.\nChọn tên miền bạn muốn sử dụng cho Tunnel.\nNhấn Authorize.\nXác nhận thành công:\nSau khi xác thực thành công trên trình duyệt, cloudflared trên server của bạn sẽ tự động tải về một file chứng chỉ (cert.pem) và lưu nó vào thư mục ~/.cloudflared/. File này chính là Key để server của bạn giao tiếp với Cloudflare. Phase 3: Cấu Hình Tunnel Giờ là bước quan trọng nhất: tạo một Tunnel có tên và định nghĩa cách nó sẽ định tuyến lưu lượng truy cập.\nTạo một Tunnel có tên:\nHãy chọn một cái tên dễ nhớ cho tunnel của bạn (ví dụ: main-tunnel).\ncloudflared tunnel create main-tunnel Lệnh này sẽ đăng ký tunnel với Cloudflare và trả về một UUID (một chuỗi ID duy nhất) cho tunnel đó. Nó cũng sẽ tạo một file credentials (.json) trong thư mục ~/.cloudflared/. Hãy lưu lại UUID này.\nTạo file cấu hình:\ncloudflared sử dụng một file config.yml để biết cách định tuyến các yêu cầu.\nvi ~/.cloudflared/config.yml Dán nội dung sau vào file. Hãy thay thế UUID bằng UUID bạn nhận được ở bước trên.\n# UUID của tunnel bạn vừa tạo tunnel: 8e34e9a6-0935-4563-87c1-652a5d7a825a # Đường dẫn đến file credentials credentials-file: /home/your_username/.cloudflared/8e34e9a6-0935-4563-87c1-652a5d7a825a.json # Cấu hình định tuyến (ingress rules) ingress: # Quy tắc 1: Gửi traffic từ app.yourdomain.com đến dịch vụ ở localhost:3000 - hostname: app.yourdomain.com service: http://localhost:3000 # Quy tắc cuối cùng: Bắt buộc phải có. # Nó sẽ trả về lỗi 404 cho bất kỳ request nào không khớp với các quy tắc trên. - service: http_status:404 Thay your_username bằng tên người dùng của bạn trên server.\nThay app.yourdomain.com bằng tên miền phụ bạn muốn sử dụng.\nThay http://localhost:3000 bằng địa chỉ và cổng của dịch vụ bạn muốn phơi bày.\nPhase 4: Định Tuyến DNS Chạy lệnh định tuyến DNS:\ncloudflared tunnel route dns my-web-app app.yourdomain.com Lệnh này sẽ tự động tạo một bản ghi CNAME trong phần quản lý DNS của bạn trên Cloudflare, trỏ tên miền phụ của bạn vào tunnel.\nPhase 5: Chạy Tunnel như một Dịch Vụ (Service) Để tunnel luôn chạy kể cả khi bạn đóng cửa sổ SSH hoặc khởi động lại server, bạn cần cài đặt nó như một dịch vụ hệ thống (systemd).\nDi chuyển file cấu hình và credentials đến vị trí hệ thống:\nDịch vụ systemd sẽ tìm file cấu hình ở /etc/cloudflared/, không phải trong thư mục home của bạn.\n# Tạo thư mục cấu hình sudo mkdir /etc/cloudflared # Sao chép file config và đổi tên thành config.yml sudo cp ~/.cloudflared/config.yml /etc/cloudflared/config.yml # Sao chép file credentials sudo cp ~/.cloudflared/.json /etc/cloudflared/ Lưu ý: Bạn cần sửa lại đường dẫn credentials-file trong /etc/cloudflared/config.yml để trỏ đến vị trí mới: /etc/cloudflared/.json.\nsudo nano /etc/cloudflared/config.yml # Sửa dòng credentials-file thành: credentials-file: /etc/cloudflared/8e34e9a6-0935-4563-87c1-652a5d7a825a.json Cài đặt và khởi chạy dịch vụ:\n# Cài đặt dịch vụ systemd sudo cloudflared service install # Khởi động dịch vụ sudo systemctl start cloudflared # (Tùy chọn) Kiểm tra trạng thái dịch vụ sudo systemctl status cloudflared Nếu bước này xảy ra lỗi, bạn cần kiểm tra xem có tồn tại user cloudflared hay không, nếu có hãy cấp quyền cho cloudflared. Nếu không có hãy tạo mới user cloudflared và cấp quyền.\n# Kiểm tra có tồn tại user cloudflared không id cloudflared # Nếu không có user cloudflared sudo useradd -r -M -s /usr/sbin/nologin cloudflared # Phân quyền sở hữu sudo chown -R cloudflared:cloudflared /etc/cloudflared sudo chmod 640 /etc/cloudflared/* # Hãy quay lại Bước 2: Cài đặt và khởi tạo dịch vụ Xong! Bây giờ, hãy thử truy cập https://app.yourdomain.com trên trình duyệt. Bạn sẽ thấy ứng dụng của mình đang chạy, được bảo vệ bởi Cloudflare với HTTPS, trong khi server của bạn không hề mở bất kỳ cổng nào ra ngoài internet.\nTích Hợp với Docker và Docker Compose Nếu bạn đang dùng Docker, việc chạy cloudflared trong một container riêng là cách làm khá Ok.\nBạn có thể thêm một service cloudflared vào file docker-compose.yml\nservices: web-app: build: . # ... các cấu hình khác của bạn networks: - app-network cloudflared: image: cloudflare/cloudflared:latest restart: unless-stopped command: tunnel --no-autoupdate run --token depends_on: - web-app networks: - app-network networks: app-network: driver: bridge Trong trường hợp này, bạn sẽ lấy Token của Tunnel từ trang quản trị Cloudflare Zero Trust thay vì dùng file cert.pem và credentials.json.\nTrong trang quản trị Cloudflare, bạn sẽ cấu hình Public Hostname (app.yourdomain.com) để trỏ đến service bên trong mạng Docker (ví dụ: http://web-app:3000).\nps: Cách làm này phù hợp với quy trình tự động hóa và IaC (Infrastructure as Code)\n","wordCount":"1132","inLanguage":"en","image":"https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-10-19T00:00:00Z","dateModified":"2025-10-19T00:00:00Z","author":{"@type":"Person","name":"Nagih"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.nagih.io.vn/posts/cloudflared-tunnel-workflow/"},"publisher":{"@type":"Organization","name":"Nagih | Blog","logo":{"@type":"ImageObject","url":"https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.nagih.io.vn/ accesskey=h title="Home (Alt + H)"><img src=https://blog.nagih.io.vn/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.nagih.io.vn/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.nagih.io.vn/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.nagih.io.vn/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.nagih.io.vn/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://nagih.io.vn title=Home><span>Home</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.nagih.io.vn/>Home</a>&nbsp;»&nbsp;<a href=https://blog.nagih.io.vn/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Hướng dẫn setup cloudflared tunnel cơ bản</h1><div class=post-meta><span title='2025-10-19 00:00:00 +0000 UTC'>October 19, 2025</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1132 words&nbsp;·&nbsp;Nagih&nbsp;|&nbsp;<a href=https://github.com/vuongmanhnghia/posts/content/posts/workflow/Cloudflared%20Tunnel%20Workflow.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#mục-tiêu><strong>Mục tiêu:</strong></a></li><li><a href=#giai-đoạn-0-điều-kiện-cần-có><strong>Giai Đoạn 0:</strong> Điều Kiện Cần Có</a></li><li><a href=#phase-1-cài-đặt-cloudflared-trên-server><strong>Phase 1:</strong> Cài Đặt cloudflared trên Server</a></li><li><a href=#phase-2-xác-thực-cloudflared-với-tài-khoản-cloudflare><strong>Phase 2:</strong> Xác Thực cloudflared với Tài Khoản Cloudflare</a></li><li><a href=#phase-3-cấu-hình-tunnel><strong>Phase 3:</strong> Cấu Hình Tunnel</a></li><li><a href=#phase-4-định-tuyến-dns><strong>Phase 4:</strong> Định Tuyến DNS</a></li><li><a href=#phase-5-chạy-tunnel-như-một-dịch-vụ-service><strong>Phase 5:</strong> Chạy Tunnel như một Dịch Vụ (Service)</a></li><li><a href=#tích-hợp-với-docker-và-docker-compose>Tích Hợp với Docker và Docker Compose</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>Thiết lập Cloudflare Tunnel là một bước nâng cao cực kỳ mạnh mẽ cho server của bạn. Nó giúp bạn phơi bày (expose) các dịch vụ đang chạy trên server ra internet một cách an toàn mà không cần mở bất kỳ cổng nào trên <strong>Firewall</strong>.</p><hr><h3 id=mục-tiêu><strong>Mục tiêu:</strong><a hidden class=anchor aria-hidden=true href=#mục-tiêu>#</a></h3><ul><li><p>Chạy một ứng dụng web trên server (ví dụ: localhost:3000).</p></li><li><p>Tạo một Tunnel để kết nối server với Cloudflare.</p></li><li><p>Truy cập ứng dụng web đó qua một tên miền phụ (ví dụ: app.yourdomain.com) với HTTPS mà <strong>không cần mở cổng 80/443 trên server</strong>.</p></li></ul><h3 id=giai-đoạn-0-điều-kiện-cần-có><strong>Giai Đoạn 0:</strong> Điều Kiện Cần Có<a hidden class=anchor aria-hidden=true href=#giai-đoạn-0-điều-kiện-cần-có>#</a></h3><ol><li><p><strong>Tài khoản Cloudflare:</strong> Hoàn toàn miễn phí.</p></li><li><p><strong>Tên miền đã thêm vào Cloudflare:</strong> Bạn phải quản lý DNS của tên miền đó thông qua Cloudflare.</p></li><li><p><strong>Server đã cài đặt:</strong> Một VPS hoặc máy chủ vật lý đang chạy (ví dụ: Ubuntu 22.04).</p></li><li><p><strong>Một dịch vụ đang chạy trên server:</strong> Ví dụ, một ứng dụng Node.js đang lắng nghe ở cổng 3000.</p></li></ol><hr><h3 id=phase-1-cài-đặt-cloudflared-trên-server><strong>Phase 1:</strong> Cài Đặt cloudflared trên Server<a hidden class=anchor aria-hidden=true href=#phase-1-cài-đặt-cloudflared-trên-server>#</a></h3><p>cloudflared là một daemon (một chương trình chạy nền) gọn nhẹ sẽ tạo và quản lý kết nối Tunnel.</p><ol><li><p><strong>Kết nối SSH vào server của bạn.</strong></p></li><li><p><strong>Tải và cài đặt cloudflared (Dành cho Debian/Ubuntu):</strong></p><ul><li><p>Thêm kho lưu trữ của Cloudflare để đảm bảo bạn luôn có phiên bản mới nhất.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Thêm GPG key của Cloudflare</span>
</span></span><span class=line><span class=cl>sudo mkdir -p --mode<span class=o>=</span><span class=m>0755</span> /usr/share/keyrings curl -fsSL https://pkg.cloudflare.com/cloudflare-main.gpg <span class=p>|</span> sudo tee /usr/share/keyrings/cloudflare-main.gpg &gt;/dev/null  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Thêm kho lưu trữ Cloudflare vào sources list</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;deb [signed-by=/usr/share/keyrings/cloudflare-main.gpg] https://pkg.cloudflare.com/cloudflared </span><span class=k>$(</span>lsb_release -cs<span class=k>)</span><span class=s2> main&#34;</span> <span class=p>|</span> sudo tee /etc/apt/sources.list.d/cloudflared.list
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cập nhật và cài đặt</span>
</span></span><span class=line><span class=cl>sudo apt-get update sudo apt-get install cloudflared -y
</span></span></code></pre></div></li><li><p>Lưu ý: Nếu bạn dùng phiên bản Ubuntu khác jammy (22.04), hãy thay thế nó bằng tên mã của phiên bản bạn đang dùng (ví dụ: focal cho 20.04).</p></li></ul></li></ol><h3 id=phase-2-xác-thực-cloudflared-với-tài-khoản-cloudflare><strong>Phase 2:</strong> Xác Thực cloudflared với Tài Khoản Cloudflare<a hidden class=anchor aria-hidden=true href=#phase-2-xác-thực-cloudflared-với-tài-khoản-cloudflare>#</a></h3><p>Bước này sẽ liên kết daemon cloudflared trên server của bạn với tài khoản Cloudflare.</p><ol><li><p><strong>Chạy lệnh đăng nhập:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cloudflared tunnel login
</span></span></code></pre></div></li><li><p><strong>Thực hiện xác thực:</strong></p><ul><li><p>Lệnh trên sẽ in ra một đường link URL trong terminal.</p></li><li><p><strong>Copy</strong> và <strong>Paste</strong> vào trình duyệt trên máy tính cá nhân của bạn.</p></li><li><p>Đăng nhập vào tài khoản Cloudflare của bạn.</p></li><li><p>Chọn tên miền bạn muốn sử dụng cho Tunnel.</p></li><li><p>Nhấn <strong>Authorize</strong>.</p></li></ul></li><li><p><strong>Xác nhận thành công:</strong></p><ul><li>Sau khi xác thực thành công trên trình duyệt, cloudflared trên server của bạn sẽ tự động tải về một file chứng chỉ (cert.pem) và lưu nó vào thư mục <code>~/.cloudflared/</code>. File này chính là <strong>Key</strong> để server của bạn giao tiếp với Cloudflare.</li></ul></li></ol><h3 id=phase-3-cấu-hình-tunnel><strong>Phase 3:</strong> Cấu Hình Tunnel<a hidden class=anchor aria-hidden=true href=#phase-3-cấu-hình-tunnel>#</a></h3><p>Giờ là bước quan trọng nhất: tạo một Tunnel có tên và định nghĩa cách nó sẽ định tuyến lưu lượng truy cập.</p><ol><li><p><strong>Tạo một Tunnel có tên:</strong></p><ul><li><p>Hãy chọn một cái tên dễ nhớ cho tunnel của bạn (ví dụ: <code>main-tunnel</code>).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cloudflared tunnel create main-tunnel
</span></span></code></pre></div></li><li><p>Lệnh này sẽ đăng ký tunnel với Cloudflare và trả về một <strong>UUID</strong> (một chuỗi ID duy nhất) cho tunnel đó. Nó cũng sẽ tạo một file credentials (<code>&lt;UUID>.json</code>) trong thư mục <code>~/.cloudflared/</code>. <strong>Hãy lưu lại UUID này.</strong></p></li></ul></li><li><p><strong>Tạo file cấu hình:</strong></p><ul><li><p>cloudflared sử dụng một file <code>config.yml</code> để biết cách định tuyến các yêu cầu.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi ~/.cloudflared/config.yml
</span></span></code></pre></div></li><li><p>Dán nội dung sau vào file. <strong>Hãy thay thế UUID bằng UUID bạn nhận được ở bước trên.</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=c># UUID của tunnel bạn vừa tạo </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>tunnel</span><span class=p>:</span><span class=w> </span><span class=l>8e34e9a6-0935-4563-87c1-652a5d7a825a  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Đường dẫn đến file credentials </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>credentials-file</span><span class=p>:</span><span class=w> </span><span class=l>/home/your_username/.cloudflared/8e34e9a6-0935-4563-87c1-652a5d7a825a.json </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Cấu hình định tuyến (ingress rules) </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>ingress</span><span class=p>:</span><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Quy tắc 1: Gửi traffic từ app.yourdomain.com đến dịch vụ ở localhost:3000   </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class=l>app.yourdomain.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>http://localhost:3000 </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Quy tắc cuối cùng: Bắt buộc phải có. </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Nó sẽ trả về lỗi 404 cho bất kỳ request nào không khớp với các quy tắc trên.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>http_status:404</span><span class=w>
</span></span></span></code></pre></div><ul><li><p>Thay <code>your_username</code> bằng tên người dùng của bạn trên server.</p></li><li><p>Thay <code>app.yourdomain.com</code> bằng tên miền phụ bạn muốn sử dụng.</p></li><li><p>Thay <code>http://localhost:3000</code> bằng địa chỉ và cổng của dịch vụ bạn muốn phơi bày.</p></li></ul></li></ul></li></ol><h3 id=phase-4-định-tuyến-dns><strong>Phase 4:</strong> Định Tuyến DNS<a hidden class=anchor aria-hidden=true href=#phase-4-định-tuyến-dns>#</a></h3><ol><li><p><strong>Chạy lệnh định tuyến DNS:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cloudflared tunnel route dns my-web-app app.yourdomain.com
</span></span></code></pre></div></li><li><p>Lệnh này sẽ tự động tạo một bản ghi <strong>CNAME</strong> trong phần quản lý DNS của bạn trên Cloudflare, trỏ tên miền phụ của bạn vào tunnel.</p></li></ol><h3 id=phase-5-chạy-tunnel-như-một-dịch-vụ-service><strong>Phase 5:</strong> Chạy Tunnel như một Dịch Vụ (Service)<a hidden class=anchor aria-hidden=true href=#phase-5-chạy-tunnel-như-một-dịch-vụ-service>#</a></h3><p>Để tunnel luôn chạy kể cả khi bạn đóng cửa sổ SSH hoặc khởi động lại server, bạn cần cài đặt nó như một dịch vụ hệ thống (systemd).</p><ol><li><p><strong>Di chuyển file cấu hình và credentials đến vị trí hệ thống:</strong></p><ul><li><p>Dịch vụ systemd sẽ tìm file cấu hình ở /etc/cloudflared/, không phải trong thư mục home của bạn.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Tạo thư mục cấu hình</span>
</span></span><span class=line><span class=cl>sudo mkdir /etc/cloudflared
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Sao chép file config và đổi tên thành config.yml</span>
</span></span><span class=line><span class=cl>sudo cp ~/.cloudflared/config.yml /etc/cloudflared/config.yml
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Sao chép file credentials</span>
</span></span><span class=line><span class=cl>sudo cp ~/.cloudflared/&lt;UUID&gt;.json /etc/cloudflared/
</span></span></code></pre></div></li><li><p><strong>Lưu ý:</strong> Bạn cần sửa lại đường dẫn credentials-file trong <code>/etc/cloudflared/config.yml để trỏ đến vị trí mới: /etc/cloudflared/&lt;UUID>.json.</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo nano /etc/cloudflared/config.yml 
</span></span><span class=line><span class=cl><span class=c1># Sửa dòng credentials-file thành: credentials-file: /etc/cloudflared/8e34e9a6-0935-4563-87c1-652a5d7a825a.json</span>
</span></span></code></pre></div></li></ul></li><li><p><strong>Cài đặt và khởi chạy dịch vụ:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Cài đặt dịch vụ systemd</span>
</span></span><span class=line><span class=cl>sudo cloudflared service install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Khởi động dịch vụ</span>
</span></span><span class=line><span class=cl>sudo systemctl start cloudflared  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># (Tùy chọn) Kiểm tra trạng thái dịch vụ</span>
</span></span><span class=line><span class=cl>sudo systemctl status cloudflared
</span></span></code></pre></div><ul><li><p>Nếu bước này xảy ra lỗi, bạn cần kiểm tra xem có tồn tại user <code>cloudflared</code> hay không, nếu có hãy cấp quyền cho <code>cloudflared</code>. Nếu không có hãy tạo mới user <code>cloudflared</code> và cấp quyền.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Kiểm tra có tồn tại user cloudflared không</span>
</span></span><span class=line><span class=cl>id cloudflared
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Nếu không có user cloudflared</span>
</span></span><span class=line><span class=cl>sudo useradd -r -M -s /usr/sbin/nologin cloudflared
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Phân quyền sở hữu</span>
</span></span><span class=line><span class=cl>sudo chown -R cloudflared:cloudflared /etc/cloudflared
</span></span><span class=line><span class=cl>sudo chmod <span class=m>640</span> /etc/cloudflared/*
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Hãy quay lại Bước 2: Cài đặt và khởi tạo dịch vụ</span>
</span></span></code></pre></div></li></ul></li></ol><p><strong>Xong!</strong> Bây giờ, hãy thử truy cập<code> https://app.yourdomain.com</code> trên trình duyệt. Bạn sẽ thấy ứng dụng của mình đang chạy, được bảo vệ bởi Cloudflare với HTTPS, trong khi server của bạn không hề mở bất kỳ cổng nào ra ngoài internet.</p><hr><h3 id=tích-hợp-với-docker-và-docker-compose>Tích Hợp với Docker và Docker Compose<a hidden class=anchor aria-hidden=true href=#tích-hợp-với-docker-và-docker-compose>#</a></h3><p>Nếu bạn đang dùng Docker, việc chạy cloudflared trong một container riêng là cách làm khá Ok.</p><ul><li><p>Bạn có thể thêm một service cloudflared vào <code>file docker-compose.yml</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>web-app</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class=l>.     </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=c># ... các cấu hình khác của bạn</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span>- <span class=l>app-network</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>cloudflared</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare/cloudflared:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>tunnel --no-autoupdate run --token &lt;YOUR_TUNNEL_TOKEN&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span>- <span class=l>web-app     </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span>- <span class=l>app-network</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>app-network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class=l>bridge</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Trong trường hợp này, bạn sẽ lấy <strong>Token</strong> của Tunnel từ trang quản trị Cloudflare Zero Trust thay vì dùng file <code>cert.pem</code> và <code>credentials.json</code>.</p></li><li><p>Trong trang quản trị Cloudflare, bạn sẽ cấu hình Public Hostname (<code>app.yourdomain.com</code>) để trỏ đến service bên trong mạng Docker (ví dụ: <code>http://web-app:3000</code>).</p></li></ul><p><em>ps: Cách làm này phù hợp với quy trình tự động hóa và IaC (Infrastructure as Code)</em></p><hr></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.nagih.io.vn/tags/tunnel/>Tunnel</a></li></ul><nav class=paginav><a class=next href=https://blog.nagih.io.vn/posts/backup-database/><span class=title>Next »</span><br><span>Kĩ thuật backup dữ liệu Database định kỳ</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup cloudflared tunnel cơ bản on x" href="https://x.com/intent/tweet/?text=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20cloudflared%20tunnel%20c%c6%a1%20b%e1%ba%a3n&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fcloudflared-tunnel-workflow%2f&amp;hashtags=tunnel"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup cloudflared tunnel cơ bản on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fcloudflared-tunnel-workflow%2f&amp;title=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20cloudflared%20tunnel%20c%c6%a1%20b%e1%ba%a3n&amp;summary=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20cloudflared%20tunnel%20c%c6%a1%20b%e1%ba%a3n&amp;source=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fcloudflared-tunnel-workflow%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup cloudflared tunnel cơ bản on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fcloudflared-tunnel-workflow%2f&title=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20cloudflared%20tunnel%20c%c6%a1%20b%e1%ba%a3n"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup cloudflared tunnel cơ bản on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fcloudflared-tunnel-workflow%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup cloudflared tunnel cơ bản on whatsapp" href="https://api.whatsapp.com/send?text=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20cloudflared%20tunnel%20c%c6%a1%20b%e1%ba%a3n%20-%20https%3a%2f%2fblog.nagih.io.vn%2fposts%2fcloudflared-tunnel-workflow%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup cloudflared tunnel cơ bản on telegram" href="https://telegram.me/share/url?text=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20cloudflared%20tunnel%20c%c6%a1%20b%e1%ba%a3n&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fcloudflared-tunnel-workflow%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup cloudflared tunnel cơ bản on ycombinator" href="https://news.ycombinator.com/submitlink?t=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20cloudflared%20tunnel%20c%c6%a1%20b%e1%ba%a3n&u=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fcloudflared-tunnel-workflow%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.nagih.io.vn/>Nagih | Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>