<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Mẫu Documentation cho Backend | Nagih | Blog</title>
<meta name=keywords content="backend"><meta name=description content="Chia sẻ mẫu Documentation cho lập trình viên Backend"><meta name=author content="Nagih"><link rel=canonical href=https://blog.nagih.io.vn/posts/docs/backend-documentation/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.08f7d74f0ada0f975d29ae436285b61ed7a719d05f350cb888d00341642995a2.css integrity="sha256-CPfXTwraD5ddKa5DYoW2HtenGdBfNQy4iNADQWQplaI=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.nagih.io.vn/posts/docs/backend-documentation/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.nagih.io.vn/posts/docs/backend-documentation/"><meta property="og:site_name" content="Nagih | Blog"><meta property="og:title" content="Mẫu Documentation cho Backend"><meta property="og:description" content="Chia sẻ mẫu Documentation cho lập trình viên Backend"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-09-16T00:00:00+00:00"><meta property="article:modified_time" content="2025-09-16T00:00:00+00:00"><meta property="article:tag" content="Backend"><meta property="og:image" content="https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Mẫu Documentation cho Backend"><meta name=twitter:description content="Chia sẻ mẫu Documentation cho lập trình viên Backend"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.nagih.io.vn/posts/"},{"@type":"ListItem","position":2,"name":"Mẫu Documentation cho Backend","item":"https://blog.nagih.io.vn/posts/docs/backend-documentation/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Mẫu Documentation cho Backend","name":"Mẫu Documentation cho Backend","description":"Chia sẻ mẫu Documentation cho lập trình viên Backend\n","keywords":["backend"],"articleBody":"Chia sẻ mẫu Documentation cho lập trình viên Backend\nE-Library Management System - Backend Documentation 📋 Table of Contents System Overview Architecture API Documentation Database Schema Authentication \u0026 Security Setup \u0026 Deployment Testing Monitoring \u0026 Logging 🎯 System Overview Project: E-Library Management System\nVersion: v2.1.0\nTech Stack: Node.js, Express.js, MongoDB, Redis, Docker\nPurpose: Backend API cho hệ thống quản lý thư viện sách điện tử\nCore Features User authentication \u0026 authorization Book catalog management Book borrowing/returning system Search \u0026 filtering User notifications Admin dashboard APIs 🏗️ Architecture High-Level Architecture ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ │ Client Apps │────│ Load Balancer │────│ API Gateway │ └─────────────────┘ └─────────────────┘ └─────────────────┘ │ ┌───────────────────────────────┼───────────────────────────────┐ │ │ │ ┌───────▼───────┐ ┌───────▼───────┐ ┌───────▼───────┐ │ Auth Service │ │ Book Service │ │ User Service │ └───────────────┘ └───────────────┘ └───────────────┘ │ │ │ └───────────────────────────────┼───────────────────────────────┘ │ ┌───────────────────────────────┼───────────────────────────────┐ │ │ │ ┌───────▼───────┐ ┌───────▼───────┐ ┌───────▼───────┐ │ MongoDB │ │ Redis │ │ File Store │ │ (Primary) │ │ (Caching) │ │ (Images) │ └───────────────┘ └───────────────┘ └───────────────┘ Service Dependencies Auth Service: JWT token validation, user roles Book Service: Book CRUD operations, search, categorization User Service: User profile management, borrowing history Notification Service: Email/SMS notifications File Service: Book cover uploads, PDF handling 📡 API Documentation Base URL Production: https://api.elibrary.com/v2 Staging: https://staging-api.elibrary.com/v2 Development: http://localhost:3000/v2 Authentication All protected endpoints require Bearer token:\nAuthorization: Bearer Response Format { \"success\": true, \"message\": \"Request processed successfully\", \"data\": {}, \"pagination\": { \"page\": 1, \"limit\": 20, \"total\": 100, \"totalPages\": 5 }, \"timestamp\": \"2025-09-16T10:30:00.000Z\" } Error Response { \"success\": false, \"error\": { \"code\": \"VALIDATION_ERROR\", \"message\": \"Invalid request data\", \"details\": [ { \"field\": \"email\", \"message\": \"Email format is invalid\" } ] }, \"timestamp\": \"2025-09-16T10:30:00.000Z\" } 🔐 Authentication Endpoints POST /auth/register Description: Đăng ký tài khoản mới\nRequest Body:\n{ \"email\": \"user@example.com\", \"password\": \"SecurePass123!\", \"firstName\": \"John\", \"lastName\": \"Doe\", \"phoneNumber\": \"+84901234567\" } Response (201):\n{ \"success\": true, \"message\": \"User registered successfully\", \"data\": { \"user\": { \"id\": \"66e123456789abcdef123456\", \"email\": \"user@example.com\", \"firstName\": \"John\", \"lastName\": \"Doe\", \"role\": \"user\", \"isVerified\": false }, \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\" } } POST /auth/login Description: Đăng nhập hệ thống\nRequest Body:\n{ \"email\": \"user@example.com\", \"password\": \"SecurePass123!\" } Response (200):\n{ \"success\": true, \"message\": \"Login successful\", \"data\": { \"user\": { \"id\": \"66e123456789abcdef123456\", \"email\": \"user@example.com\", \"firstName\": \"John\", \"lastName\": \"Doe\", \"role\": \"user\" }, \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\", \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\" } } 📚 Book Management Endpoints GET /books Description: Lấy danh sách sách với phân trang và filter\nQuery Parameters:\npage (integer, default: 1): Trang hiện tại limit (integer, default: 20): Số sách per page category (string): Filter theo danh mục author (string): Filter theo tác giả search (string): Tìm kiếm theo title/author available (boolean): Chỉ lấy sách còn available Example Request:\nGET /books?page=1\u0026limit=10\u0026category=fiction\u0026available=true Response (200):\n{ \"success\": true, \"data\": { \"books\": [ { \"id\": \"66e123456789abcdef123456\", \"title\": \"The Great Gatsby\", \"author\": \"F. Scott Fitzgerald\", \"isbn\": \"978-0743273565\", \"category\": \"fiction\", \"publishYear\": 1925, \"description\": \"A classic American novel...\", \"coverImage\": \"https://cdn.elibrary.com/covers/great-gatsby.jpg\", \"totalCopies\": 5, \"availableCopies\": 3, \"rating\": 4.5, \"createdAt\": \"2025-09-01T10:00:00.000Z\", \"updatedAt\": \"2025-09-15T14:30:00.000Z\" } ] }, \"pagination\": { \"page\": 1, \"limit\": 10, \"total\": 156, \"totalPages\": 16 } } POST /books Description: Thêm sách mới (Admin only)\nAuthentication: Required (Admin role)\nRequest Body:\n{ \"title\": \"New Book Title\", \"author\": \"Author Name\", \"isbn\": \"978-1234567890\", \"category\": \"science\", \"publishYear\": 2024, \"description\": \"Book description here...\", \"totalCopies\": 3, \"coverImage\": \"base64_encoded_image_or_url\" } Response (201):\n{ \"success\": true, \"message\": \"Book created successfully\", \"data\": { \"book\": { \"id\": \"66e123456789abcdef123457\", \"title\": \"New Book Title\", \"author\": \"Author Name\", \"isbn\": \"978-1234567890\", \"category\": \"science\", \"publishYear\": 2024, \"description\": \"Book description here...\", \"totalCopies\": 3, \"availableCopies\": 3, \"rating\": 0, \"createdAt\": \"2025-09-16T10:30:00.000Z\" } } } PUT /books/:bookId Description: Cập nhật thông tin sách (Admin only)\nAuthentication: Required (Admin role)\nDELETE /books/:bookId Description: Xóa sách (Admin only)\nAuthentication: Required (Admin role)\n📖 Borrowing System Endpoints POST /borrowings Description: Mượn sách\nAuthentication: Required\nRequest Body:\n{ \"bookId\": \"66e123456789abcdef123456\", \"borrowDuration\": 14 } Response (201):\n{ \"success\": true, \"message\": \"Book borrowed successfully\", \"data\": { \"borrowing\": { \"id\": \"66e123456789abcdef123458\", \"userId\": \"66e123456789abcdef123456\", \"bookId\": \"66e123456789abcdef123456\", \"borrowDate\": \"2025-09-16T10:30:00.000Z\", \"dueDate\": \"2025-09-30T10:30:00.000Z\", \"status\": \"active\", \"renewalCount\": 0 } } } PUT /borrowings/:borrowingId/return Description: Trả sách\nAuthentication: Required\nResponse (200):\n{ \"success\": true, \"message\": \"Book returned successfully\", \"data\": { \"borrowing\": { \"id\": \"66e123456789abcdef123458\", \"returnDate\": \"2025-09-16T15:45:00.000Z\", \"status\": \"returned\", \"lateFee\": 0 } } } GET /borrowings/my-books Description: Lấy danh sách sách đang mượn của user\nAuthentication: Required\n🗄️ Database Schema Users Collection { _id: ObjectId, email: String (unique, required), password: String (hashed, required), firstName: String (required), lastName: String (required), phoneNumber: String, role: String (enum: ['user', 'librarian', 'admin'], default: 'user'), isVerified: Boolean (default: false), avatar: String, address: { street: String, city: String, zipCode: String }, preferences: { notifications: { email: Boolean (default: true), sms: Boolean (default: false) }, favoriteCategories: [String] }, createdAt: Date, updatedAt: Date } Books Collection { _id: ObjectId, title: String (required, indexed), author: String (required, indexed), isbn: String (unique, required), category: String (required, indexed), publishYear: Number, publisher: String, language: String (default: 'vietnamese'), description: String, coverImage: String, pdfFile: String, totalCopies: Number (required, min: 1), availableCopies: Number (required), rating: Number (default: 0), reviewCount: Number (default: 0), tags: [String], createdAt: Date, updatedAt: Date, createdBy: ObjectId (ref: 'User') } Borrowings Collection { _id: ObjectId, userId: ObjectId (ref: 'User', required), bookId: ObjectId (ref: 'Book', required), borrowDate: Date (required), dueDate: Date (required), returnDate: Date, status: String (enum: ['active', 'returned', 'overdue'], required), renewalCount: Number (default: 0, max: 2), lateFee: Number (default: 0), notes: String, createdAt: Date, updatedAt: Date } Categories Collection { _id: ObjectId, name: String (required, unique), slug: String (required, unique), description: String, parentCategory: ObjectId (ref: 'Category'), isActive: Boolean (default: true), sortOrder: Number (default: 0), createdAt: Date, updatedAt: Date } 🔒 Authentication \u0026 Security JWT Configuration { secret: process.env.JWT_SECRET, algorithm: 'HS256', expiresIn: '24h', refreshTokenExpiresIn: '7d' } Password Requirements Minimum 8 characters At least 1 uppercase letter At least 1 lowercase letter At least 1 number At least 1 special character Rate Limiting { \"/auth/login\": \"5 requests per 15 minutes per IP\", \"/auth/register\": \"3 requests per hour per IP\", \"/books\": \"100 requests per 15 minutes per user\", \"/borrowings\": \"20 requests per hour per user\" } CORS Configuration { origin: [ 'https://elibrary.com', 'https://admin.elibrary.com', 'http://localhost:3000' // development only ], methods: ['GET', 'POST', 'PUT', 'DELETE'], allowedHeaders: ['Content-Type', 'Authorization'] } ⚙️ Setup \u0026 Deployment Environment Variables # Database MONGODB_URI=mongodb://localhost:27017/elibrary REDIS_URL=redis://localhost:6379 # Authentication JWT_SECRET=your-super-secret-jwt-key JWT_EXPIRES_IN=24h REFRESH_TOKEN_SECRET=your-refresh-token-secret # External Services EMAIL_SERVICE_API_KEY=your-email-service-key SMS_SERVICE_API_KEY=your-sms-service-key CLOUDINARY_URL=cloudinary://your-cloudinary-url # Server PORT=3000 NODE_ENV=production Development Setup # 1. Clone repository git clone https://github.com/company/elibrary-backend.git cd elibrary-backend # 2. Install dependencies npm install # 3. Copy environment file cp .env.example .env # 4. Start MongoDB and Redis docker-compose up -d mongo redis # 5. Run database migrations npm run migrate # 6. Start development server npm run dev Docker Deployment # docker-compose.prod.yml version: '3.8' services: app: build: . ports: - \"3000:3000\" environment: - NODE_ENV=production - MONGODB_URI=mongodb://mongo:27017/elibrary - REDIS_URL=redis://redis:6379 depends_on: - mongo - redis mongo: image: mongo:6.0 volumes: - mongo_data:/data/db environment: MONGO_INITDB_ROOT_USERNAME: admin MONGO_INITDB_ROOT_PASSWORD: password redis: image: redis:7-alpine volumes: - redis_data:/data volumes: mongo_data: redis_data: CI/CD Pipeline (GitHub Actions) name: Deploy to Production on: push: branches: [main] jobs: test: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - uses: actions/setup-node@v3 with: node-version: '18' - run: npm ci - run: npm test deploy: needs: test runs-on: ubuntu-latest steps: - name: Deploy to server run: | ssh user@server \"cd /app \u0026\u0026 git pull \u0026\u0026 docker-compose up -d --build\" 🧪 Testing Test Structure tests/ ├── unit/ │ ├── controllers/ │ ├── services/ │ └── utils/ ├── integration/ │ ├── auth.test.js │ ├── books.test.js │ └── borrowings.test.js └── e2e/ └── api.test.js Running Tests # Unit tests npm run test:unit # Integration tests npm run test:integration # E2E tests npm run test:e2e # All tests with coverage npm run test:coverage Test Example // tests/integration/books.test.js describe('Books API', () =\u003e { beforeEach(async () =\u003e { await Book.deleteMany({}); await User.deleteMany({}); // Create test user and admin testUser = await User.create({ email: 'test@example.com', password: 'hashedpassword', firstName: 'Test', lastName: 'User' }); userToken = jwt.sign({ userId: testUser._id }, process.env.JWT_SECRET); }); describe('GET /books', () =\u003e { it('should return paginated books', async () =\u003e { // Create test books await Book.create([ { title: 'Book 1', author: 'Author 1', isbn: '1111111111' }, { title: 'Book 2', author: 'Author 2', isbn: '2222222222' } ]); const response = await request(app) .get('/v2/books?page=1\u0026limit=10') .expect(200); expect(response.body.success).toBe(true); expect(response.body.data.books).toHaveLength(2); expect(response.body.pagination.total).toBe(2); }); }); }); 📊 Monitoring \u0026 Logging Logging Configuration // config/logger.js const winston = require('winston'); const logger = winston.createLogger({ level: process.env.LOG_LEVEL || 'info', format: winston.format.combine( winston.format.timestamp(), winston.format.errors({ stack: true }), winston.format.json() ), transports: [ new winston.transports.File({ filename: 'logs/error.log', level: 'error' }), new winston.transports.File({ filename: 'logs/combined.log' }), new winston.transports.Console({ format: winston.format.simple() }) ] }); Metrics Collection Response Time: Average API response time Request Rate: Requests per second Error Rate: 4xx/5xx error percentage Database Connection: MongoDB connection pool status Memory Usage: Node.js heap usage Active Users: Currently logged in users Health Check Endpoint // GET /health { \"status\": \"healthy\", \"timestamp\": \"2025-09-16T10:30:00.000Z\", \"services\": { \"database\": \"connected\", \"redis\": \"connected\", \"external_apis\": \"operational\" }, \"metrics\": { \"uptime\": \"72h 15m\", \"memory_usage\": \"245MB\", \"cpu_usage\": \"15%\" } } Alerting Rules Response time \u003e 2000ms for 5 minutes Error rate \u003e 5% for 3 minutes Database connection lost Memory usage \u003e 80% Disk space \u003c 10% 📈 Error Codes Reference Code HTTP Status Description VALIDATION_ERROR 400 Request validation failed UNAUTHORIZED 401 Invalid or missing authentication FORBIDDEN 403 Insufficient permissions NOT_FOUND 404 Resource not found CONFLICT 409 Resource already exists RATE_LIMIT_EXCEEDED 429 Too many requests INTERNAL_ERROR 500 Server error SERVICE_UNAVAILABLE 503 External service unavailable 🔄 Changelog v2.1.0 (2025-09-16) Added\nBook rating and review system Advanced search with filters PDF file upload for digital books Notification system for due dates Changed\nImproved authentication with refresh tokens Enhanced error handling and logging Updated database schema for better performance Fixed\nMemory leaks in file upload Race condition in book borrowing Timezone issues in due date calculations v2.0.0 (2025-08-01) Added\nComplete API redesign Role-based access control Redis caching layer Docker containerization 📞 Support \u0026 Contact Development Team: backend-team@company.com\nDevOps Team: devops@company.com\nDocumentation: https://docs.elibrary.com\nIssue Tracker: https://github.com/company/elibrary-backend/issues\nLast updated: September 16, 2025\n","wordCount":"1612","inLanguage":"en","image":"https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-09-16T00:00:00Z","dateModified":"2025-09-16T00:00:00Z","author":{"@type":"Person","name":"Nagih"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.nagih.io.vn/posts/docs/backend-documentation/"},"publisher":{"@type":"Organization","name":"Nagih | Blog","logo":{"@type":"ImageObject","url":"https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.nagih.io.vn/ accesskey=h title="Home (Alt + H)"><img src=https://blog.nagih.io.vn/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.nagih.io.vn/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.nagih.io.vn/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.nagih.io.vn/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.nagih.io.vn/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://nagih.io.vn title=Home><span>Home</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.nagih.io.vn/>Home</a>&nbsp;»&nbsp;<a href=https://blog.nagih.io.vn/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Mẫu Documentation cho Backend</h1><div class=post-meta><span title='2025-09-16 00:00:00 +0000 UTC'>September 16, 2025</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1612 words&nbsp;·&nbsp;Nagih&nbsp;|&nbsp;<a href=https://github.com/vuongmanhnghia/posts/content/posts/docs/Backend%20Documentation.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>Chia sẻ mẫu Documentation cho lập trình viên Backend</p><h1 id=e-library-management-system---backend-documentation>E-Library Management System - Backend Documentation<a hidden class=anchor aria-hidden=true href=#e-library-management-system---backend-documentation>#</a></h1><h2 id=-table-of-contents>📋 Table of Contents<a hidden class=anchor aria-hidden=true href=#-table-of-contents>#</a></h2><ol><li><a href=#system-overview>System Overview</a></li><li><a href=#architecture>Architecture</a></li><li><a href=#api-documentation>API Documentation</a></li><li><a href=#database-schema>Database Schema</a></li><li><a href=#authentication--security>Authentication & Security</a></li><li><a href=#setup--deployment>Setup & Deployment</a></li><li><a href=#testing>Testing</a></li><li><a href=#monitoring--logging>Monitoring & Logging</a></li></ol><hr><h2 id=-system-overview>🎯 System Overview<a hidden class=anchor aria-hidden=true href=#-system-overview>#</a></h2><p><strong>Project</strong>: E-Library Management System<br><strong>Version</strong>: v2.1.0<br><strong>Tech Stack</strong>: Node.js, Express.js, MongoDB, Redis, Docker<br><strong>Purpose</strong>: Backend API cho hệ thống quản lý thư viện sách điện tử</p><h3 id=core-features>Core Features<a hidden class=anchor aria-hidden=true href=#core-features>#</a></h3><ul><li>User authentication & authorization</li><li>Book catalog management</li><li>Book borrowing/returning system</li><li>Search & filtering</li><li>User notifications</li><li>Admin dashboard APIs</li></ul><hr><h2 id=-architecture>🏗️ Architecture<a hidden class=anchor aria-hidden=true href=#-architecture>#</a></h2><h3 id=high-level-architecture>High-Level Architecture<a hidden class=anchor aria-hidden=true href=#high-level-architecture>#</a></h3><pre tabindex=0><code>┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Client Apps   │────│  Load Balancer  │────│   API Gateway   │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                                        │
                        ┌───────────────────────────────┼───────────────────────────────┐
                        │                               │                               │
                ┌───────▼───────┐              ┌───────▼───────┐              ┌───────▼───────┐
                │  Auth Service │              │  Book Service │              │ User Service  │
                └───────────────┘              └───────────────┘              └───────────────┘
                        │                               │                               │
                        └───────────────────────────────┼───────────────────────────────┘
                                                        │
                        ┌───────────────────────────────┼───────────────────────────────┐
                        │                               │                               │
                ┌───────▼───────┐              ┌───────▼───────┐              ┌───────▼───────┐
                │   MongoDB     │              │     Redis     │              │   File Store  │
                │   (Primary)   │              │   (Caching)   │              │   (Images)    │
                └───────────────┘              └───────────────┘              └───────────────┘
</code></pre><h3 id=service-dependencies>Service Dependencies<a hidden class=anchor aria-hidden=true href=#service-dependencies>#</a></h3><ul><li><strong>Auth Service</strong>: JWT token validation, user roles</li><li><strong>Book Service</strong>: Book CRUD operations, search, categorization</li><li><strong>User Service</strong>: User profile management, borrowing history</li><li><strong>Notification Service</strong>: Email/SMS notifications</li><li><strong>File Service</strong>: Book cover uploads, PDF handling</li></ul><hr><h2 id=-api-documentation>📡 API Documentation<a hidden class=anchor aria-hidden=true href=#-api-documentation>#</a></h2><h3 id=base-url>Base URL<a hidden class=anchor aria-hidden=true href=#base-url>#</a></h3><pre tabindex=0><code>Production: https://api.elibrary.com/v2
Staging: https://staging-api.elibrary.com/v2
Development: http://localhost:3000/v2
</code></pre><h3 id=authentication>Authentication<a hidden class=anchor aria-hidden=true href=#authentication>#</a></h3><p>All protected endpoints require Bearer token:</p><pre tabindex=0><code>Authorization: Bearer &lt;jwt_token&gt;
</code></pre><h3 id=response-format>Response Format<a hidden class=anchor aria-hidden=true href=#response-format>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Request processed successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pagination&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;page&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=mi>20</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total&#34;</span><span class=p>:</span> <span class=mi>100</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;totalPages&#34;</span><span class=p>:</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-09-16T10:30:00.000Z&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=error-response>Error Response<a hidden class=anchor aria-hidden=true href=#error-response>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;error&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;code&#34;</span><span class=p>:</span> <span class=s2>&#34;VALIDATION_ERROR&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Invalid request data&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;details&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;field&#34;</span><span class=p>:</span> <span class=s2>&#34;email&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Email format is invalid&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-09-16T10:30:00.000Z&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><hr><h2 id=-authentication-endpoints>🔐 Authentication Endpoints<a hidden class=anchor aria-hidden=true href=#-authentication-endpoints>#</a></h2><h3 id=post-authregister>POST /auth/register<a hidden class=anchor aria-hidden=true href=#post-authregister>#</a></h3><p><strong>Description</strong>: Đăng ký tài khoản mới</p><p><strong>Request Body</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;email&#34;</span><span class=p>:</span> <span class=s2>&#34;user@example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;password&#34;</span><span class=p>:</span> <span class=s2>&#34;SecurePass123!&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;firstName&#34;</span><span class=p>:</span> <span class=s2>&#34;John&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;lastName&#34;</span><span class=p>:</span> <span class=s2>&#34;Doe&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;phoneNumber&#34;</span><span class=p>:</span> <span class=s2>&#34;+84901234567&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Response (201)</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;User registered successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;user&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;66e123456789abcdef123456&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;email&#34;</span><span class=p>:</span> <span class=s2>&#34;user@example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;firstName&#34;</span><span class=p>:</span> <span class=s2>&#34;John&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;lastName&#34;</span><span class=p>:</span> <span class=s2>&#34;Doe&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;role&#34;</span><span class=p>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;isVerified&#34;</span><span class=p>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;token&#34;</span><span class=p>:</span> <span class=s2>&#34;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=post-authlogin>POST /auth/login<a hidden class=anchor aria-hidden=true href=#post-authlogin>#</a></h3><p><strong>Description</strong>: Đăng nhập hệ thống</p><p><strong>Request Body</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;email&#34;</span><span class=p>:</span> <span class=s2>&#34;user@example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;password&#34;</span><span class=p>:</span> <span class=s2>&#34;SecurePass123!&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Response (200)</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Login successful&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;user&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;66e123456789abcdef123456&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;email&#34;</span><span class=p>:</span> <span class=s2>&#34;user@example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;firstName&#34;</span><span class=p>:</span> <span class=s2>&#34;John&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;lastName&#34;</span><span class=p>:</span> <span class=s2>&#34;Doe&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;role&#34;</span><span class=p>:</span> <span class=s2>&#34;user&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;token&#34;</span><span class=p>:</span> <span class=s2>&#34;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;refreshToken&#34;</span><span class=p>:</span> <span class=s2>&#34;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><hr><h2 id=-book-management-endpoints>📚 Book Management Endpoints<a hidden class=anchor aria-hidden=true href=#-book-management-endpoints>#</a></h2><h3 id=get-books>GET /books<a hidden class=anchor aria-hidden=true href=#get-books>#</a></h3><p><strong>Description</strong>: Lấy danh sách sách với phân trang và filter</p><p><strong>Query Parameters</strong>:</p><ul><li><code>page</code> (integer, default: 1): Trang hiện tại</li><li><code>limit</code> (integer, default: 20): Số sách per page</li><li><code>category</code> (string): Filter theo danh mục</li><li><code>author</code> (string): Filter theo tác giả</li><li><code>search</code> (string): Tìm kiếm theo title/author</li><li><code>available</code> (boolean): Chỉ lấy sách còn available</li></ul><p><strong>Example Request</strong>:</p><pre tabindex=0><code>GET /books?page=1&amp;limit=10&amp;category=fiction&amp;available=true
</code></pre><p><strong>Response (200)</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;books&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;66e123456789abcdef123456&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;The Great Gatsby&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;author&#34;</span><span class=p>:</span> <span class=s2>&#34;F. Scott Fitzgerald&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;isbn&#34;</span><span class=p>:</span> <span class=s2>&#34;978-0743273565&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;category&#34;</span><span class=p>:</span> <span class=s2>&#34;fiction&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;publishYear&#34;</span><span class=p>:</span> <span class=mi>1925</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;A classic American novel...&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;coverImage&#34;</span><span class=p>:</span> <span class=s2>&#34;https://cdn.elibrary.com/covers/great-gatsby.jpg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;totalCopies&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;availableCopies&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;rating&#34;</span><span class=p>:</span> <span class=mf>4.5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;createdAt&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-09-01T10:00:00.000Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;updatedAt&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-09-15T14:30:00.000Z&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pagination&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;page&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total&#34;</span><span class=p>:</span> <span class=mi>156</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;totalPages&#34;</span><span class=p>:</span> <span class=mi>16</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=post-books>POST /books<a hidden class=anchor aria-hidden=true href=#post-books>#</a></h3><p><strong>Description</strong>: Thêm sách mới (Admin only)<br><strong>Authentication</strong>: Required (Admin role)</p><p><strong>Request Body</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;New Book Title&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;author&#34;</span><span class=p>:</span> <span class=s2>&#34;Author Name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;isbn&#34;</span><span class=p>:</span> <span class=s2>&#34;978-1234567890&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;category&#34;</span><span class=p>:</span> <span class=s2>&#34;science&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;publishYear&#34;</span><span class=p>:</span> <span class=mi>2024</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Book description here...&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;totalCopies&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;coverImage&#34;</span><span class=p>:</span> <span class=s2>&#34;base64_encoded_image_or_url&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Response (201)</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Book created successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;book&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;66e123456789abcdef123457&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;New Book Title&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;author&#34;</span><span class=p>:</span> <span class=s2>&#34;Author Name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;isbn&#34;</span><span class=p>:</span> <span class=s2>&#34;978-1234567890&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;category&#34;</span><span class=p>:</span> <span class=s2>&#34;science&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;publishYear&#34;</span><span class=p>:</span> <span class=mi>2024</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Book description here...&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;totalCopies&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;availableCopies&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;rating&#34;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;createdAt&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-09-16T10:30:00.000Z&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=put-booksbookid>PUT /books/:bookId<a hidden class=anchor aria-hidden=true href=#put-booksbookid>#</a></h3><p><strong>Description</strong>: Cập nhật thông tin sách (Admin only)<br><strong>Authentication</strong>: Required (Admin role)</p><h3 id=delete-booksbookid>DELETE /books/:bookId<a hidden class=anchor aria-hidden=true href=#delete-booksbookid>#</a></h3><p><strong>Description</strong>: Xóa sách (Admin only)<br><strong>Authentication</strong>: Required (Admin role)</p><hr><h2 id=-borrowing-system-endpoints>📖 Borrowing System Endpoints<a hidden class=anchor aria-hidden=true href=#-borrowing-system-endpoints>#</a></h2><h3 id=post-borrowings>POST /borrowings<a hidden class=anchor aria-hidden=true href=#post-borrowings>#</a></h3><p><strong>Description</strong>: Mượn sách<br><strong>Authentication</strong>: Required</p><p><strong>Request Body</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;bookId&#34;</span><span class=p>:</span> <span class=s2>&#34;66e123456789abcdef123456&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;borrowDuration&#34;</span><span class=p>:</span> <span class=mi>14</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Response (201)</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Book borrowed successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;borrowing&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;66e123456789abcdef123458&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;userId&#34;</span><span class=p>:</span> <span class=s2>&#34;66e123456789abcdef123456&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;bookId&#34;</span><span class=p>:</span> <span class=s2>&#34;66e123456789abcdef123456&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;borrowDate&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-09-16T10:30:00.000Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;dueDate&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-09-30T10:30:00.000Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;active&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;renewalCount&#34;</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=put-borrowingsborrowingidreturn>PUT /borrowings/:borrowingId/return<a hidden class=anchor aria-hidden=true href=#put-borrowingsborrowingidreturn>#</a></h3><p><strong>Description</strong>: Trả sách<br><strong>Authentication</strong>: Required</p><p><strong>Response (200)</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Book returned successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;borrowing&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;66e123456789abcdef123458&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;returnDate&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-09-16T15:45:00.000Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;returned&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;lateFee&#34;</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=get-borrowingsmy-books>GET /borrowings/my-books<a hidden class=anchor aria-hidden=true href=#get-borrowingsmy-books>#</a></h3><p><strong>Description</strong>: Lấy danh sách sách đang mượn của user<br><strong>Authentication</strong>: Required</p><hr><h2 id=-database-schema>🗄️ Database Schema<a hidden class=anchor aria-hidden=true href=#-database-schema>#</a></h2><h3 id=users-collection>Users Collection<a hidden class=anchor aria-hidden=true href=#users-collection>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>_id</span><span class=o>:</span> <span class=nx>ObjectId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>email</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=nx>unique</span><span class=p>,</span> <span class=nx>required</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>password</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=nx>hashed</span><span class=p>,</span> <span class=nx>required</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>firstName</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=nx>required</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>lastName</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=nx>required</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>phoneNumber</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>role</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=kr>enum</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;user&#39;</span><span class=p>,</span> <span class=s1>&#39;librarian&#39;</span><span class=p>,</span> <span class=s1>&#39;admin&#39;</span><span class=p>],</span> <span class=k>default</span><span class=o>:</span> <span class=s1>&#39;user&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>isVerified</span><span class=o>:</span> <span class=nb>Boolean</span> <span class=p>(</span><span class=k>default</span><span class=o>:</span> <span class=kc>false</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>avatar</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>address</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>street</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>city</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>zipCode</span><span class=o>:</span> <span class=nb>String</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>preferences</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>notifications</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>email</span><span class=o>:</span> <span class=nb>Boolean</span> <span class=p>(</span><span class=k>default</span><span class=o>:</span> <span class=kc>true</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>sms</span><span class=o>:</span> <span class=nb>Boolean</span> <span class=p>(</span><span class=k>default</span><span class=o>:</span> <span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>favoriteCategories</span><span class=o>:</span> <span class=p>[</span><span class=nb>String</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>createdAt</span><span class=o>:</span> <span class=nb>Date</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>updatedAt</span><span class=o>:</span> <span class=nb>Date</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=books-collection>Books Collection<a hidden class=anchor aria-hidden=true href=#books-collection>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>_id</span><span class=o>:</span> <span class=nx>ObjectId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>title</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=nx>required</span><span class=p>,</span> <span class=nx>indexed</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>author</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=nx>required</span><span class=p>,</span> <span class=nx>indexed</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>isbn</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=nx>unique</span><span class=p>,</span> <span class=nx>required</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>category</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=nx>required</span><span class=p>,</span> <span class=nx>indexed</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>publishYear</span><span class=o>:</span> <span class=nb>Number</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>publisher</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>language</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=k>default</span><span class=o>:</span> <span class=s1>&#39;vietnamese&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>description</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>coverImage</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>pdfFile</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>totalCopies</span><span class=o>:</span> <span class=nb>Number</span> <span class=p>(</span><span class=nx>required</span><span class=p>,</span> <span class=nx>min</span><span class=o>:</span> <span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>availableCopies</span><span class=o>:</span> <span class=nb>Number</span> <span class=p>(</span><span class=nx>required</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>rating</span><span class=o>:</span> <span class=nb>Number</span> <span class=p>(</span><span class=k>default</span><span class=o>:</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>reviewCount</span><span class=o>:</span> <span class=nb>Number</span> <span class=p>(</span><span class=k>default</span><span class=o>:</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=nb>String</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>createdAt</span><span class=o>:</span> <span class=nb>Date</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>updatedAt</span><span class=o>:</span> <span class=nb>Date</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>createdBy</span><span class=o>:</span> <span class=nx>ObjectId</span> <span class=p>(</span><span class=nx>ref</span><span class=o>:</span> <span class=s1>&#39;User&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=borrowings-collection>Borrowings Collection<a hidden class=anchor aria-hidden=true href=#borrowings-collection>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>_id</span><span class=o>:</span> <span class=nx>ObjectId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>userId</span><span class=o>:</span> <span class=nx>ObjectId</span> <span class=p>(</span><span class=nx>ref</span><span class=o>:</span> <span class=s1>&#39;User&#39;</span><span class=p>,</span> <span class=nx>required</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>bookId</span><span class=o>:</span> <span class=nx>ObjectId</span> <span class=p>(</span><span class=nx>ref</span><span class=o>:</span> <span class=s1>&#39;Book&#39;</span><span class=p>,</span> <span class=nx>required</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>borrowDate</span><span class=o>:</span> <span class=nb>Date</span> <span class=p>(</span><span class=nx>required</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>dueDate</span><span class=o>:</span> <span class=nb>Date</span> <span class=p>(</span><span class=nx>required</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>returnDate</span><span class=o>:</span> <span class=nb>Date</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>status</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=kr>enum</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;active&#39;</span><span class=p>,</span> <span class=s1>&#39;returned&#39;</span><span class=p>,</span> <span class=s1>&#39;overdue&#39;</span><span class=p>],</span> <span class=nx>required</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>renewalCount</span><span class=o>:</span> <span class=nb>Number</span> <span class=p>(</span><span class=k>default</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>max</span><span class=o>:</span> <span class=mi>2</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>lateFee</span><span class=o>:</span> <span class=nb>Number</span> <span class=p>(</span><span class=k>default</span><span class=o>:</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>notes</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>createdAt</span><span class=o>:</span> <span class=nb>Date</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>updatedAt</span><span class=o>:</span> <span class=nb>Date</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=categories-collection>Categories Collection<a hidden class=anchor aria-hidden=true href=#categories-collection>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>_id</span><span class=o>:</span> <span class=nx>ObjectId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=nx>required</span><span class=p>,</span> <span class=nx>unique</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>slug</span><span class=o>:</span> <span class=nb>String</span> <span class=p>(</span><span class=nx>required</span><span class=p>,</span> <span class=nx>unique</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>description</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>parentCategory</span><span class=o>:</span> <span class=nx>ObjectId</span> <span class=p>(</span><span class=nx>ref</span><span class=o>:</span> <span class=s1>&#39;Category&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>isActive</span><span class=o>:</span> <span class=nb>Boolean</span> <span class=p>(</span><span class=k>default</span><span class=o>:</span> <span class=kc>true</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>sortOrder</span><span class=o>:</span> <span class=nb>Number</span> <span class=p>(</span><span class=k>default</span><span class=o>:</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>createdAt</span><span class=o>:</span> <span class=nb>Date</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>updatedAt</span><span class=o>:</span> <span class=nb>Date</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><hr><h2 id=-authentication--security>🔒 Authentication & Security<a hidden class=anchor aria-hidden=true href=#-authentication--security>#</a></h2><h3 id=jwt-configuration>JWT Configuration<a hidden class=anchor aria-hidden=true href=#jwt-configuration>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>secret</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>JWT_SECRET</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>algorithm</span><span class=o>:</span> <span class=s1>&#39;HS256&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>expiresIn</span><span class=o>:</span> <span class=s1>&#39;24h&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>refreshTokenExpiresIn</span><span class=o>:</span> <span class=s1>&#39;7d&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=password-requirements>Password Requirements<a hidden class=anchor aria-hidden=true href=#password-requirements>#</a></h3><ul><li>Minimum 8 characters</li><li>At least 1 uppercase letter</li><li>At least 1 lowercase letter</li><li>At least 1 number</li><li>At least 1 special character</li></ul><h3 id=rate-limiting>Rate Limiting<a hidden class=anchor aria-hidden=true href=#rate-limiting>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;/auth/login&#34;</span><span class=o>:</span> <span class=s2>&#34;5 requests per 15 minutes per IP&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;/auth/register&#34;</span><span class=o>:</span> <span class=s2>&#34;3 requests per hour per IP&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;/books&#34;</span><span class=o>:</span> <span class=s2>&#34;100 requests per 15 minutes per user&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;/borrowings&#34;</span><span class=o>:</span> <span class=s2>&#34;20 requests per hour per user&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=cors-configuration>CORS Configuration<a hidden class=anchor aria-hidden=true href=#cors-configuration>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>origin</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;https://elibrary.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;https://admin.elibrary.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;http://localhost:3000&#39;</span> <span class=c1>// development only
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>methods</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=s1>&#39;POST&#39;</span><span class=p>,</span> <span class=s1>&#39;PUT&#39;</span><span class=p>,</span> <span class=s1>&#39;DELETE&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>allowedHeaders</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>,</span> <span class=s1>&#39;Authorization&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><hr><h2 id=-setup--deployment>⚙️ Setup & Deployment<a hidden class=anchor aria-hidden=true href=#-setup--deployment>#</a></h2><h3 id=environment-variables>Environment Variables<a hidden class=anchor aria-hidden=true href=#environment-variables>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Database</span>
</span></span><span class=line><span class=cl><span class=nv>MONGODB_URI</span><span class=o>=</span>mongodb://localhost:27017/elibrary
</span></span><span class=line><span class=cl><span class=nv>REDIS_URL</span><span class=o>=</span>redis://localhost:6379
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Authentication</span>
</span></span><span class=line><span class=cl><span class=nv>JWT_SECRET</span><span class=o>=</span>your-super-secret-jwt-key
</span></span><span class=line><span class=cl><span class=nv>JWT_EXPIRES_IN</span><span class=o>=</span>24h
</span></span><span class=line><span class=cl><span class=nv>REFRESH_TOKEN_SECRET</span><span class=o>=</span>your-refresh-token-secret
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># External Services</span>
</span></span><span class=line><span class=cl><span class=nv>EMAIL_SERVICE_API_KEY</span><span class=o>=</span>your-email-service-key
</span></span><span class=line><span class=cl><span class=nv>SMS_SERVICE_API_KEY</span><span class=o>=</span>your-sms-service-key
</span></span><span class=line><span class=cl><span class=nv>CLOUDINARY_URL</span><span class=o>=</span>cloudinary://your-cloudinary-url
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Server</span>
</span></span><span class=line><span class=cl><span class=nv>PORT</span><span class=o>=</span><span class=m>3000</span>
</span></span><span class=line><span class=cl><span class=nv>NODE_ENV</span><span class=o>=</span>production
</span></span></code></pre></div><h3 id=development-setup>Development Setup<a hidden class=anchor aria-hidden=true href=#development-setup>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Clone repository</span>
</span></span><span class=line><span class=cl>git clone https://github.com/company/elibrary-backend.git
</span></span><span class=line><span class=cl><span class=nb>cd</span> elibrary-backend
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Install dependencies</span>
</span></span><span class=line><span class=cl>npm install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Copy environment file</span>
</span></span><span class=line><span class=cl>cp .env.example .env
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. Start MongoDB and Redis</span>
</span></span><span class=line><span class=cl>docker-compose up -d mongo redis
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 5. Run database migrations</span>
</span></span><span class=line><span class=cl>npm run migrate
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 6. Start development server</span>
</span></span><span class=line><span class=cl>npm run dev
</span></span></code></pre></div><h3 id=docker-deployment>Docker Deployment<a hidden class=anchor aria-hidden=true href=#docker-deployment>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># docker-compose.prod.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3.8&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>app</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class=l>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;3000:3000&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>NODE_ENV=production</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>MONGODB_URI=mongodb://mongo:27017/elibrary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>REDIS_URL=redis://redis:6379</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mongo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mongo</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>mongo:6.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mongo_data:/data/db</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MONGO_INITDB_ROOT_USERNAME</span><span class=p>:</span><span class=w> </span><span class=l>admin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MONGO_INITDB_ROOT_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>password</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>redis</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>redis:7-alpine</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>redis_data:/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mongo_data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>redis_data</span><span class=p>:</span><span class=w>
</span></span></span></code></pre></div><h3 id=cicd-pipeline-github-actions>CI/CD Pipeline (GitHub Actions)<a hidden class=anchor aria-hidden=true href=#cicd-pipeline-github-actions>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy to Production</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>main]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-node@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;18&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm ci</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>needs</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy to server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          ssh user@server &#34;cd /app &amp;&amp; git pull &amp;&amp; docker-compose up -d --build&#34;</span><span class=w>
</span></span></span></code></pre></div><hr><h2 id=-testing>🧪 Testing<a hidden class=anchor aria-hidden=true href=#-testing>#</a></h2><h3 id=test-structure>Test Structure<a hidden class=anchor aria-hidden=true href=#test-structure>#</a></h3><pre tabindex=0><code>tests/
├── unit/
│   ├── controllers/
│   ├── services/
│   └── utils/
├── integration/
│   ├── auth.test.js
│   ├── books.test.js
│   └── borrowings.test.js
└── e2e/
    └── api.test.js
</code></pre><h3 id=running-tests>Running Tests<a hidden class=anchor aria-hidden=true href=#running-tests>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Unit tests</span>
</span></span><span class=line><span class=cl>npm run test:unit
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Integration tests  </span>
</span></span><span class=line><span class=cl>npm run test:integration
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># E2E tests</span>
</span></span><span class=line><span class=cl>npm run test:e2e
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># All tests with coverage</span>
</span></span><span class=line><span class=cl>npm run test:coverage
</span></span></code></pre></div><h3 id=test-example>Test Example<a hidden class=anchor aria-hidden=true href=#test-example>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// tests/integration/books.test.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;Books API&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>beforeEach</span><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>Book</span><span class=p>.</span><span class=nx>deleteMany</span><span class=p>({});</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>User</span><span class=p>.</span><span class=nx>deleteMany</span><span class=p>({});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Create test user and admin
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>testUser</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>User</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>email</span><span class=o>:</span> <span class=s1>&#39;test@example.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>password</span><span class=o>:</span> <span class=s1>&#39;hashedpassword&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>firstName</span><span class=o>:</span> <span class=s1>&#39;Test&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>lastName</span><span class=o>:</span> <span class=s1>&#39;User&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>userToken</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>sign</span><span class=p>({</span> <span class=nx>userId</span><span class=o>:</span> <span class=nx>testUser</span><span class=p>.</span><span class=nx>_id</span> <span class=p>},</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>JWT_SECRET</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;GET /books&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should return paginated books&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// Create test books
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=kr>await</span> <span class=nx>Book</span><span class=p>.</span><span class=nx>create</span><span class=p>([</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span> <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Book 1&#39;</span><span class=p>,</span> <span class=nx>author</span><span class=o>:</span> <span class=s1>&#39;Author 1&#39;</span><span class=p>,</span> <span class=nx>isbn</span><span class=o>:</span> <span class=s1>&#39;1111111111&#39;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span> <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Book 2&#39;</span><span class=p>,</span> <span class=nx>author</span><span class=o>:</span> <span class=s1>&#39;Author 2&#39;</span><span class=p>,</span> <span class=nx>isbn</span><span class=o>:</span> <span class=s1>&#39;2222222222&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>request</span><span class=p>(</span><span class=nx>app</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/v2/books?page=1&amp;limit=10&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>expect</span><span class=p>(</span><span class=mi>200</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=nx>expect</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>success</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>expect</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>books</span><span class=p>).</span><span class=nx>toHaveLength</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>expect</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>pagination</span><span class=p>.</span><span class=nx>total</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><hr><h2 id=-monitoring--logging>📊 Monitoring & Logging<a hidden class=anchor aria-hidden=true href=#-monitoring--logging>#</a></h2><h3 id=logging-configuration>Logging Configuration<a hidden class=anchor aria-hidden=true href=#logging-configuration>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// config/logger.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>winston</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;winston&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>logger</span> <span class=o>=</span> <span class=nx>winston</span><span class=p>.</span><span class=nx>createLogger</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>level</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>LOG_LEVEL</span> <span class=o>||</span> <span class=s1>&#39;info&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>format</span><span class=o>:</span> <span class=nx>winston</span><span class=p>.</span><span class=nx>format</span><span class=p>.</span><span class=nx>combine</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>winston</span><span class=p>.</span><span class=nx>format</span><span class=p>.</span><span class=nx>timestamp</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=nx>winston</span><span class=p>.</span><span class=nx>format</span><span class=p>.</span><span class=nx>errors</span><span class=p>({</span> <span class=nx>stack</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=nx>winston</span><span class=p>.</span><span class=nx>format</span><span class=p>.</span><span class=nx>json</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>transports</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=nx>winston</span><span class=p>.</span><span class=nx>transports</span><span class=p>.</span><span class=nx>File</span><span class=p>({</span> <span class=nx>filename</span><span class=o>:</span> <span class=s1>&#39;logs/error.log&#39;</span><span class=p>,</span> <span class=nx>level</span><span class=o>:</span> <span class=s1>&#39;error&#39;</span> <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=nx>winston</span><span class=p>.</span><span class=nx>transports</span><span class=p>.</span><span class=nx>File</span><span class=p>({</span> <span class=nx>filename</span><span class=o>:</span> <span class=s1>&#39;logs/combined.log&#39;</span> <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=nx>winston</span><span class=p>.</span><span class=nx>transports</span><span class=p>.</span><span class=nx>Console</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>format</span><span class=o>:</span> <span class=nx>winston</span><span class=p>.</span><span class=nx>format</span><span class=p>.</span><span class=nx>simple</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><h3 id=metrics-collection>Metrics Collection<a hidden class=anchor aria-hidden=true href=#metrics-collection>#</a></h3><ul><li><strong>Response Time</strong>: Average API response time</li><li><strong>Request Rate</strong>: Requests per second</li><li><strong>Error Rate</strong>: 4xx/5xx error percentage</li><li><strong>Database Connection</strong>: MongoDB connection pool status</li><li><strong>Memory Usage</strong>: Node.js heap usage</li><li><strong>Active Users</strong>: Currently logged in users</li></ul><h3 id=health-check-endpoint>Health Check Endpoint<a hidden class=anchor aria-hidden=true href=#health-check-endpoint>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// GET /health
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;status&#34;</span><span class=o>:</span> <span class=s2>&#34;healthy&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;timestamp&#34;</span><span class=o>:</span> <span class=s2>&#34;2025-09-16T10:30:00.000Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;services&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;database&#34;</span><span class=o>:</span> <span class=s2>&#34;connected&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;redis&#34;</span><span class=o>:</span> <span class=s2>&#34;connected&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;external_apis&#34;</span><span class=o>:</span> <span class=s2>&#34;operational&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;metrics&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;uptime&#34;</span><span class=o>:</span> <span class=s2>&#34;72h 15m&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;memory_usage&#34;</span><span class=o>:</span> <span class=s2>&#34;245MB&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cpu_usage&#34;</span><span class=o>:</span> <span class=s2>&#34;15%&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=alerting-rules>Alerting Rules<a hidden class=anchor aria-hidden=true href=#alerting-rules>#</a></h3><ul><li>Response time > 2000ms for 5 minutes</li><li>Error rate > 5% for 3 minutes</li><li>Database connection lost</li><li>Memory usage > 80%</li><li>Disk space &lt; 10%</li></ul><hr><h2 id=-error-codes-reference>📈 Error Codes Reference<a hidden class=anchor aria-hidden=true href=#-error-codes-reference>#</a></h2><table><thead><tr><th>Code</th><th>HTTP Status</th><th>Description</th></tr></thead><tbody><tr><td><code>VALIDATION_ERROR</code></td><td>400</td><td>Request validation failed</td></tr><tr><td><code>UNAUTHORIZED</code></td><td>401</td><td>Invalid or missing authentication</td></tr><tr><td><code>FORBIDDEN</code></td><td>403</td><td>Insufficient permissions</td></tr><tr><td><code>NOT_FOUND</code></td><td>404</td><td>Resource not found</td></tr><tr><td><code>CONFLICT</code></td><td>409</td><td>Resource already exists</td></tr><tr><td><code>RATE_LIMIT_EXCEEDED</code></td><td>429</td><td>Too many requests</td></tr><tr><td><code>INTERNAL_ERROR</code></td><td>500</td><td>Server error</td></tr><tr><td><code>SERVICE_UNAVAILABLE</code></td><td>503</td><td>External service unavailable</td></tr></tbody></table><h2 id=-changelog>🔄 Changelog<a hidden class=anchor aria-hidden=true href=#-changelog>#</a></h2><h3 id=v210-2025-09-16>v2.1.0 (2025-09-16)<a hidden class=anchor aria-hidden=true href=#v210-2025-09-16>#</a></h3><p><strong>Added</strong></p><ul><li>Book rating and review system</li><li>Advanced search with filters</li><li>PDF file upload for digital books</li><li>Notification system for due dates</li></ul><p><strong>Changed</strong></p><ul><li>Improved authentication with refresh tokens</li><li>Enhanced error handling and logging</li><li>Updated database schema for better performance</li></ul><p><strong>Fixed</strong></p><ul><li>Memory leaks in file upload</li><li>Race condition in book borrowing</li><li>Timezone issues in due date calculations</li></ul><h3 id=v200-2025-08-01>v2.0.0 (2025-08-01)<a hidden class=anchor aria-hidden=true href=#v200-2025-08-01>#</a></h3><p><strong>Added</strong></p><ul><li>Complete API redesign</li><li>Role-based access control</li><li>Redis caching layer</li><li>Docker containerization</li></ul><hr><h2 id=-support--contact>📞 Support & Contact<a hidden class=anchor aria-hidden=true href=#-support--contact>#</a></h2><p><strong>Development Team</strong>: <a href=mailto:backend-team@company.com>backend-team@company.com</a><br><strong>DevOps Team</strong>: <a href=mailto:devops@company.com>devops@company.com</a><br><strong>Documentation</strong>: <a href=https://docs.elibrary.com>https://docs.elibrary.com</a><br><strong>Issue Tracker</strong>: <a href=https://github.com/company/elibrary-backend/issues>https://github.com/company/elibrary-backend/issues</a></p><hr><p><em>Last updated: September 16, 2025</em></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.nagih.io.vn/tags/backend/>Backend</a></li></ul><nav class=paginav><a class=next href=https://blog.nagih.io.vn/posts/network/protocol/ssh/all-in-one/><span class=title>Next »</span><br><span>Hướng dẫn quản lý nhiều khóa SSH trên 1 thiết bị</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Mẫu Documentation cho Backend on x" href="https://x.com/intent/tweet/?text=M%e1%ba%abu%20Documentation%20cho%20Backend&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fdocs%2fbackend-documentation%2f&amp;hashtags=backend"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Mẫu Documentation cho Backend on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fdocs%2fbackend-documentation%2f&amp;title=M%e1%ba%abu%20Documentation%20cho%20Backend&amp;summary=M%e1%ba%abu%20Documentation%20cho%20Backend&amp;source=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fdocs%2fbackend-documentation%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Mẫu Documentation cho Backend on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fdocs%2fbackend-documentation%2f&title=M%e1%ba%abu%20Documentation%20cho%20Backend"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Mẫu Documentation cho Backend on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fdocs%2fbackend-documentation%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Mẫu Documentation cho Backend on whatsapp" href="https://api.whatsapp.com/send?text=M%e1%ba%abu%20Documentation%20cho%20Backend%20-%20https%3a%2f%2fblog.nagih.io.vn%2fposts%2fdocs%2fbackend-documentation%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Mẫu Documentation cho Backend on telegram" href="https://telegram.me/share/url?text=M%e1%ba%abu%20Documentation%20cho%20Backend&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fdocs%2fbackend-documentation%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Mẫu Documentation cho Backend on ycombinator" href="https://news.ycombinator.com/submitlink?t=M%e1%ba%abu%20Documentation%20cho%20Backend&u=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fdocs%2fbackend-documentation%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.nagih.io.vn/>Nagih | Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>