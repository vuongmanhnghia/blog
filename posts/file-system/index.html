<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content><title>Linux File System</title><link rel=canonical href=https://nagih.nooblearn2code.com/posts/file-system/><link rel=stylesheet href=/scss/style.min.833d6eed45de56f48306bf57268d5b8cdfc8a60e8e7bdc99810464fcd033f7c6.css><meta property='og:title' content="Linux File System"><meta property='og:description' content><meta property='og:url' content='https://nagih.nooblearn2code.com/posts/file-system/'><meta property='og:site_name' content='Nagih | Blog'><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='file'><meta property='article:published_time' content='2025-11-30T00:00:00+00:00'><meta property='article:modified_time' content='2025-11-30T00:00:00+00:00'><meta name=twitter:title content="Linux File System"><meta name=twitter:description content></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/images/VuongManhNghia_hu_d72cb41bfd209668.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üç•</span></figure><div class=site-meta><h1 class=site-name><a href=/>Nagih | Blog</a></h1><h2 class=site-description>Hi there, I'm Vuong Manh Nghia.</h2></div></header><ol class=menu-social><li><a href=https://discord.gg/nagih_isme target=_blank title=Discord rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 12a1 1 0 102 0 1 1 0 00-2 0"/><path d="M14 12a1 1 0 102 0 1 1 0 00-2 0"/><path d="M15.5 17c0 1 1.5 3 2 3 1.5.0 2.833-1.667 3.5-3 .667-1.667.5-5.833-1.5-11.5-1.457-1.015-3-1.34-4.5-1.5l-.972 1.923a11.913 11.913.0 00-4.053.0L9 4c-1.5.16-3.043.485-4.5 1.5-2 5.667-2.167 9.833-1.5 11.5.667 1.333 2 3 3.5 3 .5.0 2-2 2-3"/><path d="M7 16.5c3.5 1 6.5 1 10 0"/></svg></a></li><li><a href=https://www.facebook.com/vmn.isme target=_blank title=Facebook rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 10v4h3v7h4v-7h3l1-4h-4V8a1 1 0 011-1h3V3h-3a5 5 0 00-5 5v2H7"/></svg></a></li><li><a href=https://github.com/vuongmanhnghia target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/vuongmanhnghia target=_blank title=LinkedIn rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"/><path d="M8 11v5"/><path d="M8 8v.01"/><path d="M12 16v-5"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/categories/><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>Categories</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><a href=#1-everything-is-a-file>1. &ldquo;Everything is a file&rdquo;</a></li><li><a href=#2-c·∫•u-tr√∫c-th∆∞-m·ª•c-chu·∫©n-filesystem-hierarchy-standard---fhs>2. C·∫•u tr√∫c th∆∞ m·ª•c chu·∫©n (Filesystem Hierarchy Standard - FHS)</a></li><li><a href=#3-c∆°-ch·∫ø-ho·∫°t-ƒë·ªông-under-the-hood>3. C∆° ch·∫ø ho·∫°t ƒë·ªông (Under the Hood)</a></li><li><a href=#4-c√°c-lo·∫°i-file-system-ph·ªï-bi·∫øn>4. C√°c lo·∫°i File System ph·ªï bi·∫øn</a></li><li><a href=#5-quy·ªÅn-h·∫°n-permissions--security>5. Quy·ªÅn h·∫°n (Permissions) & Security</a></li><li><a href=#6-qu·∫£n-l√Ω-l∆∞u-tr·ªØ-storage-management>6. Qu·∫£n l√Ω l∆∞u tr·ªØ (Storage Management)</a></li><li><a href=#7-file-system-trong-th·∫ø-gi·ªõi-container-dockerk8s>7. File System trong th·∫ø gi·ªõi Container (Docker/K8s)</a></li><li><a href=#8-c√°c-l·ªánh-v√†-k·ªπ-nƒÉng-troubleshooting-c·∫ßn-thi·∫øt>8. C√°c l·ªánh v√† k·ªπ nƒÉng Troubleshooting c·∫ßn thi·∫øt</a></li><li><a href=#b√†i-vi·∫øt-li√™n-quan>B√†i vi·∫øt li√™n quan</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/linux/>Linux
</a><a href=/categories/system/>System
</a><a href=/categories/architechture/>Architechture</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/file-system/>Linux File System</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2025-11-30T00:00:00Z>November 30, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><hr><h3 id=1-everything-is-a-file>1. &ldquo;Everything is a file&rdquo;</h3><p>Trong Linux, m·ªçi th·ª© ƒë·ªÅu l√† t·∫≠p tin (ho·∫∑c ƒë∆∞·ª£c bi·ªÉu di·ªÖn nh∆∞ m·ªôt t·∫≠p tin):</p><ul><li><p><strong>D·ªØ li·ªáu:</strong> VƒÉn b·∫£n, h√¨nh ·∫£nh, code.</p></li><li><p><strong>Thi·∫øt b·ªã ph·∫ßn c·ª©ng:</strong> ·ªî c·ª©ng (<code>/dev/sda</code>), b√†n ph√≠m, chu·ªôt.</p></li><li><p><strong>Ti·∫øn tr√¨nh (Process):</strong> Th√¥ng tin v·ªÅ RAM, CPU (<code>/proc</code>).</p></li><li><p><strong>Socket/Pipe:</strong> Giao ti·∫øp m·∫°ng.</p></li></ul><hr><h3 id=2-c·∫•u-tr√∫c-th∆∞-m·ª•c-chu·∫©n-filesystem-hierarchy-standard---fhs>2. C·∫•u tr√∫c th∆∞ m·ª•c chu·∫©n (Filesystem Hierarchy Standard - FHS)</h3><div class=table-wrapper><table><thead><tr><th style=text-align:left>Folder</th><th style=text-align:left>Meaning</th></tr></thead><tbody><tr><td style=text-align:left><code>/</code> (Root)</td><td style=text-align:left>G·ªëc c·ªßa h·ªá th·ªëng. Ch·ªâ user <code>root</code> m·ªõi c√≥ quy·ªÅn ghi.</td></tr><tr><td style=text-align:left><code>/bin</code> & <code>/usr/bin</code></td><td style=text-align:left>Ch·ª©a c√°c l·ªánh c∆° b·∫£n (<code>ls</code>, <code>cp</code>, <code>docker</code>).</td></tr><tr><td style=text-align:left><code>/sbin</code> & <code>/usr/sbin</code></td><td style=text-align:left>Ch·ª©a l·ªánh qu·∫£n tr·ªã h·ªá th·ªëng (<code>iptables</code>, <code>reboot</code>).</td></tr><tr><td style=text-align:left><strong><code>/etc</code></strong></td><td style=text-align:left><strong>Quan tr·ªçng:</strong> Ch·ª©a file c·∫•u h√¨nh (Nginx, SSH, Systemd). ƒê√¢y l√† n∆°i Configuration Management (Ansible/Chef) t√°c ƒë·ªông nhi·ªÅu nh·∫•t.</td></tr><tr><td style=text-align:left><strong><code>/var</code></strong></td><td style=text-align:left><strong>Quan tr·ªçng:</strong> Ch·ª©a d·ªØ li·ªáu bi·∫øn ƒë·ªïi (Variable).<br>- <code>/var/log</code>: Log h·ªá th·ªëng (c·∫ßn monitor ƒë·ªÉ tr√°nh ƒë·∫ßy ·ªï c·ª©ng).<br>- <code>/var/lib</code>: D·ªØ li·ªáu database (MySQL, Docker containers).</td></tr><tr><td style=text-align:left><code>/home</code></td><td style=text-align:left>Th∆∞ m·ª•c c√° nh√¢n c·ªßa user.</td></tr><tr><td style=text-align:left><code>/root</code></td><td style=text-align:left>Th∆∞ m·ª•c c√° nh√¢n c·ªßa user root.</td></tr><tr><td style=text-align:left><code>/tmp</code></td><td style=text-align:left>File t·∫°m. S·∫Ω b·ªã x√≥a khi reboot. <strong>C·∫£nh b√°o:</strong> ƒê·ª´ng l∆∞u data quan tr·ªçng ·ªü ƒë√¢y.</td></tr><tr><td style=text-align:left><code>/boot</code></td><td style=text-align:left>Kernel v√† Bootloader.</td></tr><tr><td style=text-align:left><code>/opt</code></td><td style=text-align:left>Ph·∫ßn m·ªÅm b√™n th·ª© 3 (th∆∞·ªùng d√πng cho c√°c ·ª©ng d·ª•ng c√†i th·ªß c√¥ng nh∆∞ Java, Tomcat).</td></tr><tr><td style=text-align:left><strong><code>/proc</code> & <code>/sys</code></strong></td><td style=text-align:left><strong>Virtual Filesystem:</strong> Kh√¥ng chi·∫øm dung l∆∞·ª£ng ·ªï c·ª©ng, n·∫±m tr√™n RAM. Ch·ª©a th√¥ng tin kernel, process. Monitoring tool (Prometheus/Nagios) ƒë·ªçc data t·ª´ ƒë√¢y.</td></tr><tr><td style=text-align:left><code>/dev</code></td><td style=text-align:left>Device files (<code>/dev/null</code>, <code>/dev/zero</code>, <code>/dev/random</code>).</td></tr></tbody></table></div><hr><h3 id=3-c∆°-ch·∫ø-ho·∫°t-ƒë·ªông-under-the-hood>3. C∆° ch·∫ø ho·∫°t ƒë·ªông (Under the Hood)</h3><p><strong>A. Inode (Index Node)</strong></p><p>M·ªói file c√≥ 2 ph·∫ßn:</p><ol><li><p><strong>Data:</strong> N·ªôi dung th·ª±c s·ª± c·ªßa file.</p></li><li><p><strong>Inode:</strong> Metadata (Quy·ªÅn h·∫°n, ch·ªß s·ªü h·ªØu, k√≠ch th∆∞·ªõc, v·ªã tr√≠ block tr√™n ·ªï c·ª©ng, th·ªùi gian t·∫°o&mldr;).</p></li></ol><p><strong>K·ªãch b·∫£n:</strong></p><ul><li><p><strong>L·ªói:</strong> &ldquo;No space left on device&rdquo; nh∆∞ng <code>df -h</code> th·∫•y ·ªï c·ª©ng v·∫´n c√≤n tr·ªëng 50%.</p></li><li><p><strong>Nguy√™n nh√¢n:</strong> H·∫øt <strong>Inode</strong> (do t·∫°o qu√° nhi·ªÅu file nh·ªè, v√≠ d·ª•: session files c·ªßa PHP ho·∫∑c cache).</p></li><li><p><strong>Check:</strong> <code>df -i</code></p></li></ul><p><strong>B. Superblock</strong></p><p>Ch·ª©a th√¥ng tin v·ªÅ ch√≠nh File System ƒë√≥ (t·ªïng s·ªë block, k√≠ch th∆∞·ªõc block, tr·∫°ng th√°i mount). N·∫øu Superblock h·ªèng, FS s·∫Ω kh√¥ng th·ªÉ mount ƒë∆∞·ª£c.</p><p><strong>C. Journaling (Nh·∫≠t k√Ω)</strong></p><p>C√°c FS hi·ªán ƒë·∫°i (ext4, xfs) ƒë·ªÅu l√† Journaling File System. N√≥ ghi l·∫°i c√°c thay ƒë·ªïi d·ª± ki·∫øn v√†o m·ªôt v√πng log tr∆∞·ªõc khi ghi th·∫≠t s·ª±.</p><ul><li><strong>L·ª£i √≠ch:</strong> Gi√∫p ph·ª•c h·ªìi d·ªØ li·ªáu nhanh ch√≥ng n·∫øu m·∫•t ƒëi·ªán ƒë·ªôt ng·ªôt, gi·∫£m thi·ªÉu r·ªßi ro l·ªói file system (<code>fsck</code>).</li></ul><hr><h3 id=4-c√°c-lo·∫°i-file-system-ph·ªï-bi·∫øn>4. C√°c lo·∫°i File System ph·ªï bi·∫øn</h3><p>Khi format ·ªï ƒëƒ©a ho·∫∑c mount volume cho Database, b·∫°n c·∫ßn ch·ªçn ƒë√∫ng lo·∫°i:</p><ol><li><p><strong>ext4 (Fourth Extended Filesystem):</strong></p><ul><li><p>Chu·∫©n m·ª±c, ·ªïn ƒë·ªãnh, t∆∞∆°ng th√≠ch t·ªët.</p></li><li><p>D√πng cho: OS disk, General purpose.</p></li></ul></li><li><p><strong>XFS:</strong></p><ul><li><p>Hi·ªáu nƒÉng cao v·ªõi file l·ªõn, m·ªü r·ªông t·ªët (Scalability). L√† m·∫∑c ƒë·ªãnh c·ªßa RHEL/CentOS.</p></li><li><p>D√πng cho: Database server, CI/CD artifacts storage.</p></li><li><p><em>L∆∞u √Ω:</em> XFS kh√¥ng th·ªÉ thu nh·ªè (shrink) partition, ch·ªâ c√≥ th·ªÉ m·ªü r·ªông.</p></li></ul></li><li><p><strong>Btrfs & ZFS:</strong></p><ul><li><p>H·ªó tr·ª£ n√¢ng cao: Snapshot, Pooling, Checksum (ch·ªëng bit rot).</p></li><li><p>D√πng cho: Storage Server, Backup server, Container storage driver.</p></li></ul></li></ol><hr><h3 id=5-quy·ªÅn-h·∫°n-permissions--security>5. Quy·ªÅn h·∫°n (Permissions) & Security</h3><p><strong>A. C∆° b·∫£n (UGO - User Group Other)</strong></p><ul><li><p>Read (4), Write (2), Execute (1).</p></li><li><p>L·ªánh: <code>chmod</code>, <code>chown</code>.</p></li></ul><p><strong>B. N√¢ng cao (Special Permissions)</strong></p><ul><li><p><strong>SUID (Set User ID):</strong> Ch·∫°y file v·ªõi quy·ªÅn c·ªßa ng∆∞·ªùi s·ªü h·ªØu file (th∆∞·ªùng l√† root) thay v√¨ ng∆∞·ªùi ch·∫°y l·ªánh. (V√≠ d·ª•: l·ªánh <code>passwd</code>). <em>Nguy c∆° b·∫£o m·∫≠t cao.</em></p></li><li><p><strong>SGID:</strong> File t·∫°o ra trong th∆∞ m·ª•c s·∫Ω th·ª´a k·∫ø Group c·ªßa th∆∞ m·ª•c ƒë√≥ (H·ªØu √≠ch cho Shared Folder).</p></li><li><p><strong>Sticky Bit:</strong> Ch·ªâ ng∆∞·ªùi t·∫°o file m·ªõi x√≥a ƒë∆∞·ª£c file trong th∆∞ m·ª•c chung (V√≠ d·ª•: <code>/tmp</code>).</p></li></ul><p><strong>C. ACL (Access Control Lists)</strong></p><p>Khi quy·ªÅn UGO kh√¥ng ƒë·ªß chi ti·∫øt (VD: Mu·ªën user A ƒë·ªçc, user B ghi, user C kh√¥ng l√†m g√¨ tr√™n c√πng 1 file), d√πng <code>setfacl</code> v√† <code>getfacl</code>.</p><hr><h3 id=6-qu·∫£n-l√Ω-l∆∞u-tr·ªØ-storage-management>6. Qu·∫£n l√Ω l∆∞u tr·ªØ (Storage Management)</h3><p><strong>A. Mounting</strong></p><p>G·∫Øn m·ªôt thi·∫øt b·ªã l∆∞u tr·ªØ v√†o c√¢y th∆∞ m·ª•c.</p><ul><li><p>L·ªánh: <code>mount /dev/sdb1 /mnt/data</code></p></li><li><p><strong>Persist (B·ªÅn v·ªØng):</strong> C·∫•u h√¨nh trong <code>/etc/fstab</code> ƒë·ªÉ t·ª± mount khi kh·ªüi ƒë·ªông l·∫°i. <em>L∆∞u √Ω: Sai c√∫ ph√°p fstab c√≥ th·ªÉ l√†m m√°y kh√¥ng boot ƒë∆∞·ª£c.</em></p></li></ul><p><strong>B. LVM (Logical Volume Manager)</strong></p><p>L·ªõp tr·ª´u t∆∞·ª£ng gi·ªØa ·ªï c·ª©ng v·∫≠t l√Ω v√† File System.</p><ul><li><p><strong>Physical Volume (PV):</strong> ·ªî c·ª©ng th·∫≠t.</p></li><li><p><strong>Volume Group (VG):</strong> Gom c√°c PV l·∫°i th√†nh 1 c·ª•c to.</p></li><li><p><strong>Logical Volume (LV):</strong> C·∫Øt VG ra ƒë·ªÉ d√πng (gi·ªëng partition).</p></li><li><p><strong>L·ª£i √≠ch cho DevOps:</strong> C√≥ th·ªÉ m·ªü r·ªông dung l∆∞·ª£ng ·ªï c·ª©ng (Resize) online m√† kh√¥ng c·∫ßn t·∫Øt server (Zero downtime).</p></li></ul><hr><h3 id=7-file-system-trong-th·∫ø-gi·ªõi-container-dockerk8s>7. File System trong th·∫ø gi·ªõi Container (Docker/K8s)</h3><p><strong>A. Union File System (OverlayFS)</strong></p><p>Docker images ƒë∆∞·ª£c x√¢y d·ª±ng t·ª´ c√°c <strong>Layers</strong> (l·ªõp).</p><ul><li><p><strong>LowerDir:</strong> C√°c l·ªõp Read-only (Base image).</p></li><li><p><strong>UpperDir:</strong> L·ªõp Read-write (Container layer).</p></li><li><p><strong>Merged:</strong> C√°i b·∫°n nh√¨n th·∫•y khi ch·∫°y container.</p></li><li><p><strong>C∆° ch·∫ø Copy-on-Write (CoW):</strong> Khi container s·ª≠a m·ªôt file t·ª´ image g·ªëc, n√≥ copy file ƒë√≥ l√™n l·ªõp UpperDir ƒë·ªÉ s·ª≠a, file g·ªëc v·∫´n nguy√™n v·∫πn.</p></li></ul><p><strong>B. Volumes & Bind Mounts</strong></p><ul><li><p>D·ªØ li·ªáu trong container l√† <strong>Ephemeral</strong> (m·∫•t khi container ch·∫øt).</p></li><li><p>ƒê·ªÉ l∆∞u d·ªØ li·ªáu b·ªÅn v·ªØng (Database), ph·∫£i d√πng <strong>Volume</strong> (Docker qu·∫£n l√Ω t·∫°i <code>/var/lib/docker/volumes</code>) ho·∫∑c <strong>Bind Mount</strong> (map th∆∞ m·ª•c host v√†o container).</p></li></ul><hr><h3 id=8-c√°c-l·ªánh-v√†-k·ªπ-nƒÉng-troubleshooting-c·∫ßn-thi·∫øt>8. C√°c l·ªánh v√† k·ªπ nƒÉng Troubleshooting c·∫ßn thi·∫øt</h3><ol><li><p><strong>Ki·ªÉm tra dung l∆∞·ª£ng:</strong></p><ul><li><p><code>df -hT</code>: Xem dung l∆∞·ª£ng t·ªïng qu√°t v√† lo·∫°i FS.</p></li><li><p><code>du -sh *</code>: Xem th∆∞ m·ª•c n√†o chi·∫øm nhi·ªÅu ch·ªó nh·∫•t.</p></li><li><p><code>ncdu</code>: C√¥ng c·ª• giao di·ªán d√≤ng l·ªánh ƒë·ªÉ soi dung l∆∞·ª£ng (r·∫•t ti·ªán).</p></li></ul></li><li><p><strong>Ki·ªÉm tra I/O Performance:</strong></p><ul><li><p><code>iostat -xz 1</code>: Xem t·ªëc ƒë·ªô ƒë·ªçc ghi, %iowait.</p></li><li><p><code>iotop</code>: Xem ti·∫øn tr√¨nh n√†o ƒëang &ldquo;ƒÉn&rdquo; ·ªï c·ª©ng.</p></li></ul></li><li><p><strong>X·ª≠ l√Ω file ƒëang m·ªü (Locked files):</strong></p><ul><li><p><code>lsof | grep deleted</code>: T√¨m c√°c file ƒë√£ b·ªã x√≥a nh∆∞ng process v·∫´n ƒëang gi·ªØ (nguy√™n nh√¢n ph·ªï bi·∫øn khi·∫øn x√≥a log r·ªìi m√† dung l∆∞·ª£ng kh√¥ng gi·∫£m).</p></li><li><p>Gi·∫£i ph√°p: Restart process ƒë√≥ (v√≠ d·ª•: <code>systemctl reload nginx</code>).</p></li></ul></li><li><p><strong>Mount/Unmount:</strong></p><ul><li><p><code>mount -a</code>: Mount t·∫•t c·∫£ trong fstab.</p></li><li><p><code>umount -l</code>: Lazy unmount (d√πng khi th∆∞ m·ª•c ƒëang b·ªã busy/treo).</p></li></ul></li></ol><hr><h3 id=b√†i-vi·∫øt-li√™n-quan>B√†i vi·∫øt li√™n quan</h3><ul><li><p><a href=/inode.md/>Inode trong Linux File System</a></p></li><li><p><a href=/posts/linux/system-calls/>ƒêi·ªÅu g√¨ s·∫Ω x·∫£y ra sau khi Command ƒë∆∞·ª£c g·ª≠i ƒëi tr√™n Linux</a></p></li><li><p><a href=/sudo.md/>ƒêi·ªÅu g√¨ s·∫Ω x·∫£y ra sau khi s·ª≠ d·ª•ng Sudo</a></p></li></ul><hr></section><footer class=article-footer><section class=article-tags><a href=/tags/file/>File</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/posts/inode/><div class=article-details><h2 class=article-title>Inode trong Linux File System</h2></div></a></article><article><a href=/posts/system-calls/><div class=article-details><h2 class=article-title>ƒêi·ªÅu g√¨ s·∫Ω x·∫£y ra khi g√µ b·∫•t k·ª≥ command n√†o trong terminal tr√™n Linux ?</h2></div></a></article><article><a href=/posts/sudo/><div class=article-details><h2 class=article-title>ƒêi·ªÅu g√¨ x·∫£y ra khi b·∫°n s·ª≠ d·ª•ng l·ªánh Sudo ?</h2></div></a></article><article><a href=/posts/server-hardening-checklist/><div class=article-details><h2 class=article-title>Nh·ªØng ƒëi·ªÅu c·∫ßn l√†m ngay sau khi s·ªü h·ªØu 1 server Linux (VPS, Cloud)</h2></div></a></article><article><a href=/posts/setup-swap/><div class=article-details><h2 class=article-title>H∆∞·ªõng d·∫´n setup Swap tr√™n Linux</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2025 -
2026 Vuong Manh Nghia</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>