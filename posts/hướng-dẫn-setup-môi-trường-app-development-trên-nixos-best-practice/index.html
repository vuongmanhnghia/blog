<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hướng dẫn setup môi trường App Development trên nixos best practice | Nagih | Blog</title>
<meta name=keywords content="app,NixOS"><meta name=description content="Sử dụng triết lý của Nix ứng dụng trong việc triển khai môi trường lập trình ứng dụng sao cho tối ưu và tốt nhất."><meta name=author content="Nagih"><link rel=canonical href=https://blog.nagih.io.vn/posts/h%C6%B0%E1%BB%9Bng-d%E1%BA%ABn-setup-m%C3%B4i-tr%C6%B0%E1%BB%9Dng-app-development-tr%C3%AAn-nixos-best-practice/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.08f7d74f0ada0f975d29ae436285b61ed7a719d05f350cb888d00341642995a2.css integrity="sha256-CPfXTwraD5ddKa5DYoW2HtenGdBfNQy4iNADQWQplaI=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.nagih.io.vn/posts/h%C6%B0%E1%BB%9Bng-d%E1%BA%ABn-setup-m%C3%B4i-tr%C6%B0%E1%BB%9Dng-app-development-tr%C3%AAn-nixos-best-practice/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.nagih.io.vn/posts/h%C6%B0%E1%BB%9Bng-d%E1%BA%ABn-setup-m%C3%B4i-tr%C6%B0%E1%BB%9Dng-app-development-tr%C3%AAn-nixos-best-practice/"><meta property="og:site_name" content="Nagih | Blog"><meta property="og:title" content="Hướng dẫn setup môi trường App Development trên nixos best practice"><meta property="og:description" content="Sử dụng triết lý của Nix ứng dụng trong việc triển khai môi trường lập trình ứng dụng sao cho tối ưu và tốt nhất."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-09-09T00:00:00+00:00"><meta property="article:modified_time" content="2025-09-09T00:00:00+00:00"><meta property="article:tag" content="App"><meta property="article:tag" content="NixOS"><meta property="og:image" content="https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Hướng dẫn setup môi trường App Development trên nixos best practice"><meta name=twitter:description content="Sử dụng triết lý của Nix ứng dụng trong việc triển khai môi trường lập trình ứng dụng sao cho tối ưu và tốt nhất."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.nagih.io.vn/posts/"},{"@type":"ListItem","position":2,"name":"Hướng dẫn setup môi trường App Development trên nixos best practice","item":"https://blog.nagih.io.vn/posts/h%C6%B0%E1%BB%9Bng-d%E1%BA%ABn-setup-m%C3%B4i-tr%C6%B0%E1%BB%9Dng-app-development-tr%C3%AAn-nixos-best-practice/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hướng dẫn setup môi trường App Development trên nixos best practice","name":"Hướng dẫn setup môi trường App Development trên nixos best practice","description":"Sử dụng triết lý của Nix ứng dụng trong việc triển khai môi trường lập trình ứng dụng sao cho tối ưu và tốt nhất.\n","keywords":["app","NixOS"],"articleBody":"Sử dụng triết lý của Nix ứng dụng trong việc triển khai môi trường lập trình ứng dụng sao cho tối ưu và tốt nhất.\nTrong bài viết này, tôi sẽ hướng dẫn các bạn setup môi trường lập trình ứng dụng trên NixOS bằng IntelliJ IDEA và Nix Flakes thay vì sử dụng Android Studio. Đây là quy trình hiệu quả và phù hợp với triết lý của NixOS\nQuá trình này quản lý 2 nguyên tắc cốt lõi của NixOS\nQuản lý hệ thống bằng cách khai báo (Declarative System Management): Mọi package, phần mềm, cấu hình hệ thống được define trong file configuration.nix, giúp hệ thống luôn có thể tái tạo và có tính nhất quán\nMôi trường phát triển biệt lập (Isolated Development Environments): Sử dụng nix-shell để tạo ra môi trường chứa chính xác phiên bản của các công cụ đã được define cho từng project mà không làm ảnh hưởng tới hệ thống chính\nCác bước tiến hành Bước 1: Cài đặt các công cụ cơ bản trên hệ thống Điều đầu tiên, vì sử dụng IntelliJ IDEA nên bắt buộc rằng nó được cài trên hệ thống của bạn và đã bật tính năng Flakes của NixOS\nMở file cấu hình hệ thống NixOS của bạn\nThêm package jetbrains.idea-community hoặc idea-ultimate(nếu có premium) vào danh sách environment.systemPackages\nTrong bước này có thể thêm JDK mặc định nếu muốn, nhưng việc define JDK cho từng project sẽ tốt hơn nếu bạn không muốn cài trên hệ thống chính\n# .../configuration.nix { config, pkgs, ... }: { # Bật tính năng Flakes và nix-command mới nix.settings.experimental-features = [ \"nix-command\" \"flakes\" ]; environment.systemPackages = with pkgs; [ git # Git để quản lý mã nguồn jetbrains.idea-community # Thêm IntelliJ IDEA vào cấu hình ]; # ... các cấu hình khác } Rebuild NixOS để áp dụng thay đổi: sudo nixos-rebuild switch\nBước 2: Tạo môi trường phát triển riêng cho Project Đây là bước quan trọng nhất và là nơi sức mạnh của nix được thể hiện rõ nhất\nTạo thư mục chứa dự án\nmkdir my-app cd my-app Tạo file flake.nix. File này là trái tim của môi trường, nó sẽ define tất cả những công cụ cần thiết trong project: JDK, Maven, Gradle, …\n{ description = \"Môi trường phát triển Android trên NixOS (kênh Unstable)\"; inputs = { nixpkgs.url = \"github:NixOS/nixpkgs/nixos-unstable\"; flake-utils.url = \"github:numtide/flake-utils\"; }; outputs = { self, nixpkgs, flake-utils }: flake-utils.lib.eachDefaultSystem (system: let # Cấu hình để tự động chấp nhận giấy phép Android SDK pkgs = import nixpkgs { inherit system; config = { allowUnfree = true; android_sdk.accept_license = true; }; }; # \"Lắp ráp\" môi trường SDK bằng hàm và tham số tương thích android-sdk-env = pkgs.androidenv.composeAndroidPackages { platformVersions = [ \"36\" ]; buildToolsVersions = [ \"36.0.0\" ]; includeEmulator = true; platformToolsVersion = \"36.0.0\"; cmdLineToolsVersion = \"11.0\"; includeSystemImages = true; systemImageTypes = [ \"google_apis\" ]; abiVersions = [ \"x86_64\" ]; }; in { devShells.default = pkgs.mkShell { buildInputs = [ # Hàm cũ trả về một attribute set, cần truy cập .androidsdk android-sdk-env.androidsdk pkgs.jdk pkgs.qt6.qtwayland ]; shellHook = '' # Đường dẫn SDK cũng cần .androidsdk export ANDROID_SDK_ROOT=\"${android-sdk-env.androidsdk}/libexec/android-sdk\" export PATH=\"$ANDROID_SDK_ROOT/cmdline-tools/latest/bin:$ANDROID_SDK_ROOT/platform-tools:$ANDROID_SDK_ROOT/emulator:$PATH\" export QT_QPA_PLATFORM=xcb echo \"✅ Môi trường Android cho API 36 (Unstable) đã sẵn sàng.\" ''; }; }); } Lưu ý: Có thể thay đổi các version máy ảo Android cho phù hợp, tuy nhiên các công cần sử dụng đúng version để có thể hoạt động được với nhau (platformVersions, buildToolsVersions , platformToolsVersion)\nInstall và truy cập vào nix-shell\nnix develop ➜ nix develop ✅ Môi trường Android đã sẵn sàng. [nagih@nixos:~/Workspaces/noob/app/my-app]$ Bước 3: Cấu hình IntelliJ IDEA Bây giờ, ta sẽ khởi động IntelliJ IDEA bên trong môi trường Nix để có thể nhận diện được tất cả công cụ\nKhởi động IntelliJ: Từ terminal, gõ lệnh\nidea-community . Cài đặt Plugin Android mới: Nếu đây là lần đầu sử dụng IntelliJ cho Android, hãy vào Plugins -\u003e Marketplace, Tìm kiếm Android và cài đặt\n![[/images/Pasted image 20250909150919.png|Image Description]]\nTạo dự án mới\nTrong IntelliJ, vào Projects -\u003e New Project\nChọn Android từ danh sách Generators bên trái\nChọn template, ví dụ Empty Views Activity và nhấn next\n![[/images/Pasted image 20250909151418.png|Image Description]]\nĐiền thông tin project\nQuan trọng: Ở mục Build configuration language cần phù hợp với language đã được khai báo trong flake.nix (kotlin / groovy)\n![[/images/Pasted image 20250909152633.png|Image Description]]\nSau khi tạo project, nếu thấy hiển thị lỗi này, hãy sửa theo hướng dẫn của phần Các lỗi phổ biến ở phía dưới\n![[/images/Pasted image 20250911225113.png|Image Description]]\nBước 4: Tạo và khởi chạy máy ảo AVD (Android Virtual Device) Phương pháp 1: Tạo trong intelliJ (Recommand) Truy cập Device Manager\nNhấn + để thêm mới AVD\nChọn thiết bị mà bạn muốn sử dụng\nChọn System Image\nChọn tab x86 Images\nChọn System Image mà bạn đã cài đặt (Không chọn bất kỳ system image nào có nút Install)\nTrường hợp không thấy bất cứ System Image nào đã được cài, điều này chứng tỏ System Image mà bạn define không được hỗ trợ nữa\nChọn lấy 1 System Image trong phần x86 Images (Không Install) Thoát khỏi IntelliJ và nix-shell Sửa file flake.nix theo System Image mà bạn đã chọn ở trên Kích hoạt nix develop và tiếp tục Khởi chạy máy ảo\nSau khi tạo thành công máy ảo, có thể chưa hiện ngay trong phần Device Manager, lúc này hãy thoát IntelliJ và mở lại, bạn sẽ thấy nó. Sau đó chỉ cần nhấn nút Run.\nPhương pháp 2: Sử dụng CLI (Chạy máy ảo với cửa sổ riêng) Close hoàn toàn IntelliJ IDEA\nXác minh công cụ emulator và avdmanager có tồn tại trong môi trường hay không\nwhich emulator which avdmanager Nếu kết quả có các đường dẫn trỏ tới /nix/store/... cho cả 2 lệnh thì xin chúc mừng Nếu không thấy kết quả -\u003e Điều này có nghĩa là flake.nix của bạn đang có vấn đề, hoặc có thể bạn chưa truy cập và nix develop Kiểm tra System Image\nsdkmanager --list_installed Tạo máy ảo (AVD) thông qua andmanager\navdmanager create avd --name \"Pixel_API36\" --package \"system-images;android-36;google_apis;x86_64\" --device \"pixel_7_pro\" name: Tên AVD package: System image device: Loại thiết bị, nếu muốn kiểm tra có các thiết bị nào, hãy dùng lệnh avdmanager list device Khởi động IntelliJ\nKhởi động lại IntelliJ IDEA trong môi trường nix-shell\nidea-community . Open project mà khi nãy đã tạo (nếu đã bị thoát ra)\nMáy ảo AVD sẽ xuất hiện trong phần Device Manager. Bạn có thể thấy xuất hiện dấu !, điều này là bình thường vì chưa run AVD\n![[/images/Pasted image 20250909203943.png|Image Description]]\nKhởi chạy máy ảo AVD\nOpen terminal bên trong IntelliJ IDEA\nemulator -avd [avd-name] \u0026 Các lỗi phổ biến 1. Lỗi khi tạo dự án ![[/images/Pasted image 20250911225113.png|Image Description]]\nNguyên nhân Lỗi này xảy ra do IntelliJ mặc định sử dụng template có sẵn (API 34) nhưng trong flake.nix difine API khác\nCố gắng tải API 34: Khi thấy công thức yêu cầu API 34 mà trong bếp không có, nó sẽ cố gắng tự đi “chợ” (tự tải về) và đặt vào kho (/nix/store). Bị NixOS chặn lại: NixOS thấy IntelliJ đang cố ghi vào “kho” chỉ đọc, nên đã chặn lại và báo lỗi Failed to read or create install properties file.34 Giải pháp Truy cập vào môi trường nix-shell\nCopy lấy đường dẫn của $ANDROID_SDK_ROOT\necho $ANDROID_SDK_ROOT Cấu hình cho IntelliJ\nTruy cập File -\u003e Project Structure... Vào tab Platform Settings -\u003e SDKs Nhấn + -\u003e Add Android SDK… và dán đường dẫn $ANDROID_SDK_ROOT (đường dẫn này đang trỏ đến SDK của bạn). Trong phần Build target sẽ xuất hiện SDK của bạn Cập nhật build.gradle\nMở file app/build.gradle.kts\nThay đổi compileSdk và targetSdk thành SDK mà bạn đã define (36)\nĐồng bộ Gradle:\nNhấn nút “Sync Now”. 2. “The skin directory, does not point to valid skin” Lỗi này có nghĩa là máy ảo (AVD) đang cố gắng sử dụng một “skin” (bộ giao diện mô phỏng viền cứng của điện thoại), nhưng không thể tìm thấy các file của skin đó ở đường dẫn được chỉ định.\nGiải pháp 1: Tắt Skin trong Cài đặt Máy ảo (Cách dễ nhất) Cách đơn giản và hiệu quả nhất là yêu cầu máy ảo không cần tải skin nữa.\nMở Device Manager trong IntelliJ. Tìm đến máy ảo đang bị lỗi của bạn và nhấn vào biểu tượng Edit (hình cây bút chì) ở cột Actions. Cửa sổ “Virtual Device Configuration” sẽ hiện ra. Hãy tìm đến mục “Enable Device Frame” (Bật khung thiết bị). Bỏ dấu tick ở ô này. Nhấn Finish để lưu lại thay đổi. Sau khi tắt skin, hãy thử khởi động lại máy ảo. Lỗi sẽ biến mất và máy ảo sẽ hiển thị dưới dạng một cửa sổ đơn giản chỉ có màn hình.\nGiải pháp 2: Sửa file cấu hình thủ công (Cách trực tiếp) Nếu bạn không tìm thấy tùy chọn trong giao diện, bạn có thể chỉnh sửa file cấu hình trực tiếp.\nMở terminal và điều hướng đến thư mục cấu hình của máy ảo. Thay TenMayAo.avd bằng tên máy ảo của bạn (ví dụ: Pixel8Pro_API35.avd):\ncd ~/.android/avd/TenMayAo.avd/ Mở file config.ini bằng một trình soạn thảo văn bản (ví dụ: nano config.ini).\nTìm các dòng bắt đầu bằng skin.name và skin.path.\nThay đổi giá trị của chúng thành _no_skin hoặc xóa cả hai dòng đó đi.\nVí dụ, sửa từ:\nskin.name = pixel_8_pro skin.path = /some/invalid/nix/store/path Thành:\nskin.name = _no_skin skin.path = _no_skin Lưu file và thử khởi động lại máy ảo.\n","wordCount":"1605","inLanguage":"en","image":"https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-09-09T00:00:00Z","dateModified":"2025-09-09T00:00:00Z","author":{"@type":"Person","name":"Nagih"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.nagih.io.vn/posts/h%C6%B0%E1%BB%9Bng-d%E1%BA%ABn-setup-m%C3%B4i-tr%C6%B0%E1%BB%9Dng-app-development-tr%C3%AAn-nixos-best-practice/"},"publisher":{"@type":"Organization","name":"Nagih | Blog","logo":{"@type":"ImageObject","url":"https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.nagih.io.vn/ accesskey=h title="Home (Alt + H)"><img src=https://blog.nagih.io.vn/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.nagih.io.vn/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.nagih.io.vn/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.nagih.io.vn/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.nagih.io.vn/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://nagih.io.vn title=Home><span>Home</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.nagih.io.vn/>Home</a>&nbsp;»&nbsp;<a href=https://blog.nagih.io.vn/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Hướng dẫn setup môi trường App Development trên nixos best practice</h1><div class=post-meta><span title='2025-09-09 00:00:00 +0000 UTC'>September 9, 2025</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1605 words&nbsp;·&nbsp;Nagih&nbsp;|&nbsp;<a href=https://github.com/vuongmanhnghia/posts/content/posts/environment/App%20Development.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#các-bước-tiến-hành>Các bước tiến hành</a><ul><li><a href=#bước-1-cài-đặt-các-công-cụ-cơ-bản-trên-hệ-thống>Bước 1: Cài đặt các công cụ cơ bản trên hệ thống</a></li><li><a href=#bước-2-tạo-môi-trường-phát-triển-riêng-cho-project>Bước 2: Tạo môi trường phát triển riêng cho Project</a></li><li><a href=#bước-3-cấu-hình-intellij-idea>Bước 3: Cấu hình IntelliJ IDEA</a></li><li><a href=#bước-4-tạo-và-khởi-chạy-máy-ảo-avd-android-virtual-device>Bước 4: Tạo và khởi chạy máy ảo AVD (Android Virtual Device)</a></li></ul></li><li><a href=#các-lỗi-phổ-biến>Các lỗi phổ biến</a><ul><li><a href=#1-lỗi-khi-tạo-dự-án>1. Lỗi khi tạo dự án</a></li><li><a href=#2-the-skin-directory-does-not-point-to-valid-skin>2. &ldquo;The skin directory, does not point to valid skin&rdquo;</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>Sử dụng triết lý của Nix ứng dụng trong việc triển khai môi trường lập trình ứng dụng sao cho tối ưu và tốt nhất.</p><p>Trong bài viết này, tôi sẽ hướng dẫn các bạn setup môi trường lập trình ứng dụng trên <strong>NixOS bằng IntelliJ IDEA và Nix Flakes</strong> thay vì sử dụng <strong>Android Studio</strong>. Đây là quy trình hiệu quả và phù hợp với triết lý của NixOS</p><p><strong>Quá trình này quản lý 2 nguyên tắc cốt lõi của NixOS</strong></p><ul><li><p><strong>Quản lý hệ thống bằng cách khai báo (Declarative System Management):</strong> Mọi package, phần mềm, cấu hình hệ thống được define trong file <code>configuration.nix</code>, giúp hệ thống luôn có thể tái tạo và có tính nhất quán</p></li><li><p><strong>Môi trường phát triển biệt lập (Isolated Development Environments):</strong> Sử dụng <code>nix-shell</code> để tạo ra môi trường chứa chính xác phiên bản của các công cụ đã được define cho từng project mà không làm ảnh hưởng tới hệ thống chính</p></li></ul><hr><h2 id=các-bước-tiến-hành>Các bước tiến hành<a hidden class=anchor aria-hidden=true href=#các-bước-tiến-hành>#</a></h2><h3 id=bước-1-cài-đặt-các-công-cụ-cơ-bản-trên-hệ-thống>Bước 1: Cài đặt các công cụ cơ bản trên hệ thống<a hidden class=anchor aria-hidden=true href=#bước-1-cài-đặt-các-công-cụ-cơ-bản-trên-hệ-thống>#</a></h3><p>Điều đầu tiên, vì sử dụng IntelliJ IDEA nên bắt buộc rằng nó được cài trên hệ thống của bạn và đã bật tính năng <strong>Flakes của NixOS</strong></p><ul><li><p>Mở file cấu hình hệ thống NixOS của bạn</p></li><li><p>Thêm package <code>jetbrains.idea-community</code> hoặc <code>idea-ultimate</code>(nếu có premium) vào danh sách <code>environment.systemPackages</code></p></li><li><p>Trong bước này có thể thêm JDK mặc định nếu muốn, nhưng việc define JDK cho từng project sẽ tốt hơn nếu bạn không muốn cài trên hệ thống chính</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-nix data-lang=nix><span class=line><span class=cl><span class=c1># .../configuration.nix</span>
</span></span><span class=line><span class=cl><span class=p>{</span> <span class=n>config</span><span class=o>,</span> <span class=n>pkgs</span><span class=o>,</span> <span class=o>...</span> <span class=p>}:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1># Bật tính năng Flakes và nix-command mới</span>
</span></span><span class=line><span class=cl>  <span class=n>nix</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>experimental-features</span> <span class=o>=</span> <span class=p>[</span> <span class=s2>&#34;nix-command&#34;</span> <span class=s2>&#34;flakes&#34;</span> <span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>environment</span><span class=o>.</span><span class=n>systemPackages</span> <span class=o>=</span> <span class=k>with</span> <span class=n>pkgs</span><span class=p>;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>git</span>                        <span class=c1># Git để quản lý mã nguồn</span>
</span></span><span class=line><span class=cl>    <span class=n>jetbrains</span><span class=o>.</span><span class=n>idea-community</span>   <span class=c1># Thêm IntelliJ IDEA vào cấu hình</span>
</span></span><span class=line><span class=cl>  <span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># ... các cấu hình khác</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></li><li><p><strong>Rebuild NixOS</strong> để áp dụng thay đổi: <code>sudo nixos-rebuild switch</code></p></li></ul><h3 id=bước-2-tạo-môi-trường-phát-triển-riêng-cho-project>Bước 2: Tạo môi trường phát triển riêng cho Project<a hidden class=anchor aria-hidden=true href=#bước-2-tạo-môi-trường-phát-triển-riêng-cho-project>#</a></h3><p>Đây là bước quan trọng nhất và là nơi sức mạnh của nix được thể hiện rõ nhất</p><ul><li><p><strong>Tạo thư mục chứa dự án</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir my-app
</span></span><span class=line><span class=cl><span class=nb>cd</span> my-app
</span></span></code></pre></div></li><li><p>Tạo file <code>flake.nix</code>. File này là trái tim của môi trường, nó sẽ define tất cả những công cụ cần thiết trong project: JDK, Maven, Gradle, &mldr;</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-nix data-lang=nix><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>description</span> <span class=o>=</span> <span class=s2>&#34;Môi trường phát triển Android trên NixOS (kênh Unstable)&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>inputs</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>nixpkgs</span><span class=o>.</span><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;github:NixOS/nixpkgs/nixos-unstable&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>flake-utils</span><span class=o>.</span><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;github:numtide/flake-utils&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>outputs</span> <span class=o>=</span> <span class=p>{</span> <span class=n>self</span><span class=o>,</span> <span class=n>nixpkgs</span><span class=o>,</span> <span class=n>flake-utils</span> <span class=p>}:</span>
</span></span><span class=line><span class=cl>    <span class=n>flake-utils</span><span class=o>.</span><span class=n>lib</span><span class=o>.</span><span class=n>eachDefaultSystem</span> <span class=p>(</span><span class=n>system</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=k>let</span>
</span></span><span class=line><span class=cl>        <span class=c1># Cấu hình để tự động chấp nhận giấy phép Android SDK</span>
</span></span><span class=line><span class=cl>        <span class=n>pkgs</span> <span class=o>=</span> <span class=kn>import</span> <span class=n>nixpkgs</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>inherit</span> <span class=n>system</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=n>config</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>allowUnfree</span> <span class=o>=</span> <span class=no>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>android_sdk</span><span class=o>.</span><span class=n>accept_license</span> <span class=o>=</span> <span class=no>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># &#34;Lắp ráp&#34; môi trường SDK bằng hàm và tham số tương thích</span>
</span></span><span class=line><span class=cl>        <span class=n>android-sdk-env</span> <span class=o>=</span> <span class=n>pkgs</span><span class=o>.</span><span class=n>androidenv</span><span class=o>.</span><span class=n>composeAndroidPackages</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=n>platformVersions</span> <span class=o>=</span> <span class=p>[</span> <span class=s2>&#34;36&#34;</span> <span class=p>];</span>
</span></span><span class=line><span class=cl>          <span class=n>buildToolsVersions</span> <span class=o>=</span> <span class=p>[</span> <span class=s2>&#34;36.0.0&#34;</span> <span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=n>includeEmulator</span> <span class=o>=</span> <span class=no>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=n>platformToolsVersion</span> <span class=o>=</span> <span class=s2>&#34;36.0.0&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=n>cmdLineToolsVersion</span> <span class=o>=</span> <span class=s2>&#34;11.0&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=n>includeSystemImages</span> <span class=o>=</span> <span class=no>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=n>systemImageTypes</span> <span class=o>=</span> <span class=p>[</span> <span class=s2>&#34;google_apis&#34;</span> <span class=p>];</span>
</span></span><span class=line><span class=cl>          <span class=n>abiVersions</span> <span class=o>=</span> <span class=p>[</span> <span class=s2>&#34;x86_64&#34;</span> <span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>      <span class=k>in</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>devShells</span><span class=o>.</span><span class=n>default</span> <span class=o>=</span> <span class=n>pkgs</span><span class=o>.</span><span class=n>mkShell</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=n>buildInputs</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=c1># Hàm cũ trả về một attribute set, cần truy cập .androidsdk</span>
</span></span><span class=line><span class=cl>            <span class=n>android-sdk-env</span><span class=o>.</span><span class=n>androidsdk</span>
</span></span><span class=line><span class=cl>            <span class=n>pkgs</span><span class=o>.</span><span class=n>jdk</span>
</span></span><span class=line><span class=cl>            <span class=n>pkgs</span><span class=o>.</span><span class=n>qt6</span><span class=o>.</span><span class=n>qtwayland</span>
</span></span><span class=line><span class=cl>          <span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=n>shellHook</span> <span class=o>=</span> <span class=s1>&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>            # Đường dẫn SDK cũng cần .androidsdk
</span></span></span><span class=line><span class=cl><span class=s1>            export ANDROID_SDK_ROOT=&#34;</span><span class=si>${</span><span class=n>android-sdk-env</span><span class=o>.</span><span class=n>androidsdk</span><span class=si>}</span><span class=s1>/libexec/android-sdk&#34;
</span></span></span><span class=line><span class=cl><span class=s1>            export PATH=&#34;$ANDROID_SDK_ROOT/cmdline-tools/latest/bin:$ANDROID_SDK_ROOT/platform-tools:$ANDROID_SDK_ROOT/emulator:$PATH&#34;
</span></span></span><span class=line><span class=cl><span class=s1>            export QT_QPA_PLATFORM=xcb
</span></span></span><span class=line><span class=cl><span class=s1>            echo &#34;✅ Môi trường Android cho API 36 (Unstable) đã sẵn sàng.&#34;
</span></span></span><span class=line><span class=cl><span class=s1>          &#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><p><strong>Lưu ý:</strong> Có thể thay đổi các version máy ảo Android cho phù hợp, tuy nhiên các công cần sử dụng đúng version để có thể hoạt động được với nhau (platformVersions, buildToolsVersions , platformToolsVersion)</p></blockquote></li><li><p><strong>Install và truy cập vào <code>nix-shell</code></strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nix develop
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>➜ nix develop
</span></span><span class=line><span class=cl>✅ Môi trường Android đã sẵn sàng.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>nagih@nixos:~/Workspaces/noob/app/my-app<span class=o>]</span>$
</span></span></code></pre></div></li></ul><h3 id=bước-3-cấu-hình-intellij-idea>Bước 3: Cấu hình IntelliJ IDEA<a hidden class=anchor aria-hidden=true href=#bước-3-cấu-hình-intellij-idea>#</a></h3><p>Bây giờ, ta sẽ khởi động IntelliJ IDEA bên trong môi trường Nix để có thể nhận diện được tất cả công cụ</p><ol><li><p><strong>Khởi động IntelliJ:</strong> Từ terminal, gõ lệnh</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>idea-community .
</span></span></code></pre></div></li><li><p><strong>Cài đặt Plugin Android mới</strong>: Nếu đây là lần đầu sử dụng IntelliJ cho Android, hãy vào <code>Plugins</code> -> <code>Marketplace</code>, Tìm kiếm <code>Android</code> và cài đặt</p><p>![[/images/Pasted image 20250909150919.png|Image Description]]</p></li><li><p><strong>Tạo dự án mới</strong></p><ul><li><p>Trong IntelliJ, vào <code>Projects</code> -> <code>New Project</code></p></li><li><p>Chọn <code>Android</code> từ danh sách <code>Generators</code> bên trái</p></li><li><p>Chọn template, ví dụ <code>Empty Views Activity</code> và nhấn next</p><p>![[/images/Pasted image 20250909151418.png|Image Description]]</p></li><li><p>Điền thông tin project</p></li><li><p><strong>Quan trọng:</strong> Ở mục <code>Build configuration language</code> cần phù hợp với language đã được khai báo trong <code>flake.nix</code> (<code>kotlin</code> / <code>groovy</code>)</p><p>![[/images/Pasted image 20250909152633.png|Image Description]]</p></li><li><p>Sau khi tạo project, nếu thấy hiển thị lỗi này, hãy sửa theo hướng dẫn của phần <strong>Các lỗi phổ biến</strong> ở phía dưới</p><p>![[/images/Pasted image 20250911225113.png|Image Description]]</p></li></ul></li></ol><h3 id=bước-4-tạo-và-khởi-chạy-máy-ảo-avd-android-virtual-device>Bước 4: Tạo và khởi chạy máy ảo AVD (Android Virtual Device)<a hidden class=anchor aria-hidden=true href=#bước-4-tạo-và-khởi-chạy-máy-ảo-avd-android-virtual-device>#</a></h3><h4 id=phương-pháp-1-tạo-trong-intellij-recommand>Phương pháp 1: Tạo trong intelliJ (Recommand)<a hidden class=anchor aria-hidden=true href=#phương-pháp-1-tạo-trong-intellij-recommand>#</a></h4><ol><li><p><strong>Truy cập</strong> <code>Device Manager</code></p></li><li><p><strong>Nhấn <code>+</code></strong> để thêm mới AVD</p></li><li><p><strong>Chọn thiết bị</strong> mà bạn muốn sử dụng</p></li><li><p><strong>Chọn <code>System Image</code></strong></p><ul><li><p><strong>Chọn</strong> tab <code>x86 Images</code></p></li><li><p><strong>Chọn</strong> <code>System Image</code> mà bạn đã cài đặt (Không chọn bất kỳ system image nào có nút <code>Install</code>)</p><p>Trường hợp không thấy bất cứ <code>System Image</code> nào đã được cài, điều này chứng tỏ <code>System Image</code> mà bạn define không được hỗ trợ nữa</p><ul><li><strong>Chọn lấy 1</strong> <code>System Image</code> trong phần <code>x86 Images</code> (Không <code>Install</code>)</li><li>Thoát khỏi IntelliJ và <code>nix-shell</code></li><li>Sửa file <code>flake.nix</code> theo <code>System Image</code> mà bạn đã chọn ở trên</li><li><strong>Kích hoạt</strong> <code>nix develop</code> và <strong>tiếp tục</strong></li></ul></li></ul></li><li><p><strong>Khởi chạy</strong> máy ảo</p><p>Sau khi tạo thành công máy ảo, có thể chưa hiện ngay trong phần <code>Device Manager</code>, lúc này hãy thoát IntelliJ và mở lại, bạn sẽ thấy nó. Sau đó chỉ cần nhấn nút <code>Run</code>.</p></li></ol><h4 id=phương-pháp-2-sử-dụng-cli-chạy-máy-ảo-với-cửa-sổ-riêng>Phương pháp 2: Sử dụng CLI (Chạy máy ảo với cửa sổ riêng)<a hidden class=anchor aria-hidden=true href=#phương-pháp-2-sử-dụng-cli-chạy-máy-ảo-với-cửa-sổ-riêng>#</a></h4><ol><li><p><strong>Close hoàn toàn IntelliJ IDEA</strong></p></li><li><p><strong>Xác minh</strong> công cụ <code>emulator</code> và <code>avdmanager</code> có tồn tại trong môi trường hay không</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>which emulator
</span></span><span class=line><span class=cl>which avdmanager
</span></span></code></pre></div><ul><li>Nếu kết quả có các đường dẫn trỏ tới <code>/nix/store/...</code> cho cả 2 lệnh thì xin chúc mừng</li><li>Nếu không thấy kết quả -> Điều này có nghĩa là <code>flake.nix</code> của bạn đang có vấn đề, hoặc có thể bạn chưa truy cập và <code>nix develop</code></li></ul></li><li><p><strong>Kiểm tra System Image</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sdkmanager --list_installed
</span></span></code></pre></div></li><li><p><strong>Tạo máy ảo (AVD)</strong> thông qua <code>andmanager</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>avdmanager create avd --name <span class=s2>&#34;Pixel_API36&#34;</span> --package <span class=s2>&#34;system-images;android-36;google_apis;x86_64&#34;</span> --device <span class=s2>&#34;pixel_7_pro&#34;</span>
</span></span></code></pre></div><ul><li><code>name</code>: Tên AVD</li><li><code>package</code>: System image</li><li><code>device</code>: Loại thiết bị, nếu muốn kiểm tra có các thiết bị nào, hãy dùng lệnh <code>avdmanager list device</code></li></ul></li><li><p><strong>Khởi động IntelliJ</strong></p><ul><li><p><strong>Khởi động</strong> lại IntelliJ IDEA trong môi trường <code>nix-shell</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>idea-community .
</span></span></code></pre></div></li><li><p><strong>Open project</strong> mà khi nãy đã tạo (nếu đã bị thoát ra)</p></li><li><p>Máy ảo AVD sẽ xuất hiện trong phần <code>Device Manager</code>. Bạn có thể thấy xuất hiện dấu <code>!</code>, điều này là bình thường vì chưa run AVD</p><p>![[/images/Pasted image 20250909203943.png|Image Description]]</p></li></ul></li></ol><ul><li><p><strong>Khởi chạy máy ảo AVD</strong></p><p>Open <code>terminal</code> bên trong IntelliJ IDEA</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>emulator -avd <span class=o>[</span>avd-name<span class=o>]</span> <span class=p>&amp;</span>
</span></span></code></pre></div></li></ul><hr><h2 id=các-lỗi-phổ-biến>Các lỗi phổ biến<a hidden class=anchor aria-hidden=true href=#các-lỗi-phổ-biến>#</a></h2><h3 id=1-lỗi-khi-tạo-dự-án>1. Lỗi khi tạo dự án<a hidden class=anchor aria-hidden=true href=#1-lỗi-khi-tạo-dự-án>#</a></h3><p>![[/images/Pasted image 20250911225113.png|Image Description]]</p><h4 id=nguyên-nhân>Nguyên nhân<a hidden class=anchor aria-hidden=true href=#nguyên-nhân>#</a></h4><p>Lỗi này xảy ra do IntelliJ mặc định sử dụng template có sẵn (API 34) nhưng trong <code>flake.nix</code> difine API khác</p><ul><li><strong>Cố gắng tải API 34:</strong> Khi thấy công thức yêu cầu API 34 mà trong bếp không có, nó sẽ cố gắng tự đi &ldquo;chợ&rdquo; (tự tải về) và đặt vào kho (<code>/nix/store</code>).</li><li><strong>Bị NixOS chặn lại:</strong> NixOS thấy IntelliJ đang cố ghi vào &ldquo;kho&rdquo; chỉ đọc, nên đã chặn lại và báo lỗi <code>Failed to read or create install properties file</code>.34</li></ul><h4 id=giải-pháp>Giải pháp<a hidden class=anchor aria-hidden=true href=#giải-pháp>#</a></h4><p>Truy cập vào môi trường <code>nix-shell</code></p><ol><li><p><strong>Copy lấy đường dẫn của <code>$ANDROID_SDK_ROOT</code></strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$ANDROID_SDK_ROOT</span>
</span></span></code></pre></div></li><li><p><strong>Cấu hình cho IntelliJ</strong></p><ul><li>Truy cập <code>File</code> -> <code>Project Structure...</code></li><li>Vào tab <code>Platform Settings</code> -> <code>SDKs</code></li><li>Nhấn <strong><code>+</code> -> Add Android SDK&mldr;</strong> và dán đường dẫn <code>$ANDROID_SDK_ROOT</code> (đường dẫn này đang trỏ đến SDK của bạn).</li><li>Trong phần <code>Build target</code> sẽ xuất hiện SDK của bạn</li></ul></li><li><p><strong>Cập nhật <code>build.gradle</code></strong></p><ul><li><p>Mở file <code>app/build.gradle.kts</code></p></li><li><p>Thay đổi <code>compileSdk</code> và <code>targetSdk</code> thành SDK mà bạn đã define (36)</p></li></ul></li><li><p><strong>Đồng bộ Gradle:</strong></p><ul><li>Nhấn nút <strong>&ldquo;Sync Now&rdquo;</strong>.</li></ul></li></ol><h3 id=2-the-skin-directory-does-not-point-to-valid-skin>2. &ldquo;The skin directory, does not point to valid skin&rdquo;<a hidden class=anchor aria-hidden=true href=#2-the-skin-directory-does-not-point-to-valid-skin>#</a></h3><p>Lỗi này có nghĩa là máy ảo (AVD) đang cố gắng sử dụng một <strong>&ldquo;skin&rdquo;</strong> (bộ giao diện mô phỏng viền cứng của điện thoại), nhưng không thể tìm thấy các file của skin đó ở đường dẫn được chỉ định.</p><h4 id=giải-pháp-1-tắt-skin-trong-cài-đặt-máy-ảo-cách-dễ-nhất>Giải pháp 1: Tắt Skin trong Cài đặt Máy ảo (Cách dễ nhất)<a hidden class=anchor aria-hidden=true href=#giải-pháp-1-tắt-skin-trong-cài-đặt-máy-ảo-cách-dễ-nhất>#</a></h4><p>Cách đơn giản và hiệu quả nhất là yêu cầu máy ảo không cần tải skin nữa.</p><ol><li>Mở <strong>Device Manager</strong> trong IntelliJ.</li><li>Tìm đến máy ảo đang bị lỗi của bạn và nhấn vào biểu tượng <strong>Edit</strong> (hình cây bút chì) ở cột Actions.</li><li>Cửa sổ &ldquo;Virtual Device Configuration&rdquo; sẽ hiện ra. Hãy tìm đến mục <strong>&ldquo;Enable Device Frame&rdquo;</strong> (Bật khung thiết bị).</li><li><strong>Bỏ dấu tick</strong> ở ô này.</li><li>Nhấn <strong>Finish</strong> để lưu lại thay đổi.</li></ol><p>Sau khi tắt skin, hãy thử khởi động lại máy ảo. Lỗi sẽ biến mất và máy ảo sẽ hiển thị dưới dạng một cửa sổ đơn giản chỉ có màn hình.</p><hr><h4 id=giải-pháp-2-sửa-file-cấu-hình-thủ-công-cách-trực-tiếp>Giải pháp 2: Sửa file cấu hình thủ công (Cách trực tiếp)<a hidden class=anchor aria-hidden=true href=#giải-pháp-2-sửa-file-cấu-hình-thủ-công-cách-trực-tiếp>#</a></h4><p>Nếu bạn không tìm thấy tùy chọn trong giao diện, bạn có thể chỉnh sửa file cấu hình trực tiếp.</p><ol><li><p>Mở terminal và điều hướng đến thư mục cấu hình của máy ảo. Thay <code>TenMayAo.avd</code> bằng tên máy ảo của bạn (ví dụ: <code>Pixel8Pro_API35.avd</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/.android/avd/TenMayAo.avd/
</span></span></code></pre></div></li><li><p>Mở file <code>config.ini</code> bằng một trình soạn thảo văn bản (ví dụ: <code>nano config.ini</code>).</p></li><li><p>Tìm các dòng bắt đầu bằng <code>skin.name</code> và <code>skin.path</code>.</p></li><li><p>Thay đổi giá trị của chúng thành <code>_no_skin</code> hoặc xóa cả hai dòng đó đi.</p><p><strong>Ví dụ, sửa từ:</strong></p><pre tabindex=0><code>skin.name = pixel_8_pro
skin.path = /some/invalid/nix/store/path
</code></pre><p><strong>Thành:</strong></p><pre tabindex=0><code>skin.name = _no_skin
skin.path = _no_skin
</code></pre></li><li><p>Lưu file và thử khởi động lại máy ảo.</p></li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.nagih.io.vn/tags/app/>App</a></li><li><a href=https://blog.nagih.io.vn/tags/nixos/>NixOS</a></li></ul><nav class=paginav><a class=prev href=https://blog.nagih.io.vn/posts/ssh-github/><span class=title>« Prev</span><br><span>SSH - Github</span>
</a><a class=next href=https://blog.nagih.io.vn/posts/h%C6%B0%E1%BB%9Bng-d%E1%BA%ABn-t%C3%B9y-bi%E1%BA%BFn-ph%C3%A2n-v%C3%B9ng-efi-khi-c%C3%A0i-windows/><span class=title>Next »</span><br><span>Hướng dẫn tùy biến phân vùng EFI khi cài windows</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup môi trường App Development trên nixos best practice on x" href="https://x.com/intent/tweet/?text=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20m%c3%b4i%20tr%c6%b0%e1%bb%9dng%20App%20Development%20tr%c3%aan%20nixos%20best%20practice&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fh%25C6%25B0%25E1%25BB%259Bng-d%25E1%25BA%25ABn-setup-m%25C3%25B4i-tr%25C6%25B0%25E1%25BB%259Dng-app-development-tr%25C3%25AAn-nixos-best-practice%2f&amp;hashtags=app%2cNixOS"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup môi trường App Development trên nixos best practice on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fh%25C6%25B0%25E1%25BB%259Bng-d%25E1%25BA%25ABn-setup-m%25C3%25B4i-tr%25C6%25B0%25E1%25BB%259Dng-app-development-tr%25C3%25AAn-nixos-best-practice%2f&amp;title=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20m%c3%b4i%20tr%c6%b0%e1%bb%9dng%20App%20Development%20tr%c3%aan%20nixos%20best%20practice&amp;summary=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20m%c3%b4i%20tr%c6%b0%e1%bb%9dng%20App%20Development%20tr%c3%aan%20nixos%20best%20practice&amp;source=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fh%25C6%25B0%25E1%25BB%259Bng-d%25E1%25BA%25ABn-setup-m%25C3%25B4i-tr%25C6%25B0%25E1%25BB%259Dng-app-development-tr%25C3%25AAn-nixos-best-practice%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup môi trường App Development trên nixos best practice on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fh%25C6%25B0%25E1%25BB%259Bng-d%25E1%25BA%25ABn-setup-m%25C3%25B4i-tr%25C6%25B0%25E1%25BB%259Dng-app-development-tr%25C3%25AAn-nixos-best-practice%2f&title=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20m%c3%b4i%20tr%c6%b0%e1%bb%9dng%20App%20Development%20tr%c3%aan%20nixos%20best%20practice"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup môi trường App Development trên nixos best practice on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fh%25C6%25B0%25E1%25BB%259Bng-d%25E1%25BA%25ABn-setup-m%25C3%25B4i-tr%25C6%25B0%25E1%25BB%259Dng-app-development-tr%25C3%25AAn-nixos-best-practice%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup môi trường App Development trên nixos best practice on whatsapp" href="https://api.whatsapp.com/send?text=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20m%c3%b4i%20tr%c6%b0%e1%bb%9dng%20App%20Development%20tr%c3%aan%20nixos%20best%20practice%20-%20https%3a%2f%2fblog.nagih.io.vn%2fposts%2fh%25C6%25B0%25E1%25BB%259Bng-d%25E1%25BA%25ABn-setup-m%25C3%25B4i-tr%25C6%25B0%25E1%25BB%259Dng-app-development-tr%25C3%25AAn-nixos-best-practice%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup môi trường App Development trên nixos best practice on telegram" href="https://telegram.me/share/url?text=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20m%c3%b4i%20tr%c6%b0%e1%bb%9dng%20App%20Development%20tr%c3%aan%20nixos%20best%20practice&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fh%25C6%25B0%25E1%25BB%259Bng-d%25E1%25BA%25ABn-setup-m%25C3%25B4i-tr%25C6%25B0%25E1%25BB%259Dng-app-development-tr%25C3%25AAn-nixos-best-practice%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hướng dẫn setup môi trường App Development trên nixos best practice on ycombinator" href="https://news.ycombinator.com/submitlink?t=H%c6%b0%e1%bb%9bng%20d%e1%ba%abn%20setup%20m%c3%b4i%20tr%c6%b0%e1%bb%9dng%20App%20Development%20tr%c3%aan%20nixos%20best%20practice&u=https%3a%2f%2fblog.nagih.io.vn%2fposts%2fh%25C6%25B0%25E1%25BB%259Bng-d%25E1%25BA%25ABn-setup-m%25C3%25B4i-tr%25C6%25B0%25E1%25BB%259Dng-app-development-tr%25C3%25AAn-nixos-best-practice%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.nagih.io.vn/>Nagih | Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>