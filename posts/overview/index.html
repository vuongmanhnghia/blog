<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>DDD (Domain-Driven Design) | Nagih | Blog</title>
<meta name=keywords content="go"><meta name=description content="Architecture Overview Domain-Driven Design(DDD)"><meta name=author content="Nagih"><link rel=canonical href=https://blog.nagih.io.vn/posts/overview/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.08f7d74f0ada0f975d29ae436285b61ed7a719d05f350cb888d00341642995a2.css integrity="sha256-CPfXTwraD5ddKa5DYoW2HtenGdBfNQy4iNADQWQplaI=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.nagih.io.vn/posts/overview/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.nagih.io.vn/posts/overview/"><meta property="og:site_name" content="Nagih | Blog"><meta property="og:title" content="DDD (Domain-Driven Design)"><meta property="og:description" content="Architecture Overview Domain-Driven Design(DDD)"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-08-27T00:00:00+00:00"><meta property="article:modified_time" content="2025-08-27T00:00:00+00:00"><meta property="article:tag" content="Go"><meta property="og:image" content="https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="DDD (Domain-Driven Design)"><meta name=twitter:description content="Architecture Overview Domain-Driven Design(DDD)"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.nagih.io.vn/posts/"},{"@type":"ListItem","position":2,"name":"DDD (Domain-Driven Design)","item":"https://blog.nagih.io.vn/posts/overview/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"DDD (Domain-Driven Design)","name":"DDD (Domain-Driven Design)","description":"Architecture Overview Domain-Driven Design(DDD)\n","keywords":["go"],"articleBody":"Architecture Overview Domain-Driven Design(DDD)\nPhần I: Các Nguyên tắc Cốt lõi của DDD Thiết kế Chiến lược: Lập bản đồ Context Nghiệp vụ Context Giới hạn (Bounded Contexts) Các hệ thống lớn hiếm khi có một mô hình duy nhất, thống nhất. Thuật ngữ “Người dùng” có thể có ý nghĩa khác nhau trong layer “Xác thực” so với context “Hỗ trợ Kỹ thuật”. Chiến lược “chia để trị” này là câu trả lời của DDD để quản lý sự phức tạp trong các tổ chức lớn. Việc xác định các context là mục tiêu chính của Thiết kế Chiến lược và rất quan trọng để xác định ranh giới của các microservice.\nToàn bộ cấu trúc của một hệ thống phức tạp bắt nguồn trực tiếp từ những sự mơ hồ về ngôn ngữ được phát hiện trong quá trình thiết kế. Quá trình này diễn ra như sau: đầu tiên, các nhà phát triển nhận ra rằng một thuật ngữ duy nhất (ví dụ: “Khách hàng”) có nhiều ý nghĩa mâu thuẫn giữa các phòng ban (hiện tượng đa nghĩa). Để giải quyết vấn đề này, họ áp dụng mẫu Bounded Context, vẽ ra các ranh giới rõ ràng xung quanh các khu vực mà ngôn ngữ là nhất quán. Ví dụ, một “Context Bán hàng” và một “Context Hỗ trợ” được xác định. Các Bounded Context này sau đó trở thành các service hoặc module riêng biệt trong kiến trúc.\np/s: Bounded Context được hiểu là 1 context bị giới hạn\nThiết kế Cung cấp các mẫu để xây dựng một mô hình miền phong phú bên trong một Bounded Context duy nhất.\nEntities (Thực thể): Các đối tượng được xác định không phải bởi các thuộc tính của chúng, mà bởi định danh duy nhất và sự tồn tại liên tục theo thời gian (ví dụ: một Customer với một ID duy nhất). Chúng có thể thay đổi, nhưng các thay đổi trạng thái nên được mô hình hóa như các hoạt động nghiệp vụ rõ ràng (ví dụ: customer.ChangeAddress(), không phải customer.setAddress(). Value Objects (Đối tượng Giá trị): Các đối tượng đại diện cho một khía cạnh mô tả của miền và không có định danh khái niệm (ví dụ: Money, Address, Color). Được định nghĩa bởi các thuộc tính của chúng, là bất biến, và sự bằng nhau của chúng dựa trên giá trị, không phải định danh. Aggregates (Tập hợp): Một cụm các đối tượng liên quan (Entities và Value Objects) được coi là một đơn vị duy nhất cho các thay đổi dữ liệu. Mỗi Aggregate có một Entity gốc, được gọi là Aggregate Root. Aggregate Root là thành viên duy nhất của Aggregate mà các đối tượng bên ngoài được phép giữ tham chiếu đến. Nó chịu trách nhiệm thực thi các quy tắc nghiệp vụ (bất biến) cho toàn bộ cụm. Mẫu này xác định các ranh giới nhất quán giao dịch. Domain Services (Dịch vụ Miền): Khi một logic miền nào đó không tự nhiên thuộc về một Entity hoặc Value Object (ví dụ: một quy trình liên quan đến nhiều Aggregate), nó có thể được mô hình hóa trong một Domain Service không trạng thái. Domain Events (Sự kiện Miền): Một cơ chế để ghi lại các sự kiện quan trọng xảy ra trong miền (ví dụ: OrderShipped, DeliveryCanceled). Chúng rất quan trọng cho việc giao tiếp giữa các Aggregate và đặc biệt là giữa các Bounded Context khác nhau trong kiến trúc microservices. Repositories (Kho chứa) và Factories (Nhà máy): Repositories cung cấp ảo giác về một bộ sưu tập các Aggregate trong bộ nhớ, trừu tượng hóa cơ chế lưu trữ. Factories đóng gói logic để tạo ra các đối tượng hoặc Aggregate phức tạp. Tên Mẫu Mục đích Đặc điểm Chính Ví dụ Entity Đại diện cho một đối tượng có định danh và vòng đời. Có ID duy nhất, khả biến (mutable), sự bằng nhau dựa trên ID. Customer, Product, Order Value Object Mô tả một thuộc tính của miền. Không có ID, bất biến (immutable), sự bằng nhau dựa trên giá trị. Address, Money, DateRange Aggregate Một cụm các đối tượng được coi là một đơn vị nhất quán. Có một Aggregate Root, định nghĩa ranh giới giao dịch. Một Order cùng với các OrderLineItem của nó. Domain Service Đóng gói logic miền không thuộc về một Entity duy nhất. Không trạng thái, thường liên quan đến nhiều Aggregate. Dịch vụ tính toán phí vận chuyển dựa trên nhiều đơn hàng. Domain Event Ghi lại một sự kiện nghiệp vụ đã xảy ra. Bất biến, mô tả một điều gì đó trong quá khứ. OrderPlaced, PaymentReceived Repository Trừu tượng hóa việc truy cập và lưu trữ các Aggregate. Cung cấp giao diện giống như bộ sưu tập, ẩn chi tiết cơ sở dữ liệu. CustomerRepository, OrderRepository Factory Đóng gói logic tạo đối tượng phức tạp. Đảm bảo các đối tượng được tạo ra ở trạng thái hợp lệ. OrderFactory tạo một Order từ các thông tin đầu vào. Phân biệt rõ các tác vụ trong Internal Phần II: Clean và Hexagonal Architectures Phần này sẽ bắc cầu từ khái niệm DDD đến cấu trúc project.\nNguyên tắc Đảo ngược Phụ thuộc Vấn đề với kiến trúc phân lớp truyền thống là logic nghiệp vụ thường trở nên phụ thuộc vào cơ sở dữ liệu.\nKiến trúc Lục giác (Ports and Adapters): Mẫu này được giới thiệu như là giải pháp. Ý tưởng cốt lõi là cô lập logic nghiệp vụ của ứng dụng (“hình lục giác”) khỏi thế giới bên ngoài (UI, cơ sở dữ liệu, API bên ngoài).\nPorts: Đây là các interface được định nghĩa bên trong hình lục giác, quy định cách thức giao tiếp diễn ra. Chúng đại diện cho nhu cầu của ứng dụng (ví dụ: Tôi cần lưu một người dùng, Tôi cần được điều khiển bởi một yêu cầu HTTP). Adapters: Đây là các triển khai cụ thể của các port, sống bên ngoài hình lục giác. Chúng dịch giữa port độc lập công nghệ và một công nghệ cụ thể (ví dụ: một adapter PostgreSQL triển khai port lưu người dùng, một adapter xử lý HTTP). Cấu trúc Lõi Ứng dụng Kiến trúc Sạch (Clean Architecture): Được trình bày như một sự phát triển chi tiết hơn của Kiến trúc Lục giác, tổ chức lõi thành các lớp đồng tâm.\nQuy tắc Phụ thuộc: Đây là quy tắc quan trọng nhất: các phụ thuộc mã nguồn chỉ có thể trỏ vào trong. Logic miền ở trung tâm không biết gì về các lớp bên ngoài.\nGiải thích các Lớp:\nLớp Miền (Domain Layer - Entities): Trung tâm tuyệt đối. Chứa các Entities, Value Objects, và Aggregates được định nghĩa bởi Thiết kế Chiến thuật. Nó không có phụ thuộc bên ngoài nào. Lớp Ứng dụng (Application Layer - Use Cases): Quay quanh lớp miền. Nó chứa các quy tắc nghiệp vụ cụ thể của ứng dụng và điều phối các đối tượng miền để thực hiện các trường hợp sử dụng (ví dụ: CreateOrderService). Phụ thuộc vào lớp miền nhưng không phụ thuộc vào các lớp bên ngoài. Lớp Hạ tầng/Giao diện (Infrastructure/Interfaces Layer - Adapters): Lớp ngoài cùng. Chứa mọi thứ tương tác với thế giới bên ngoài: cơ sở dữ liệu, web frameworks, hàng đợi tin nhắn. Lớp này phụ thuộc vào các lớp bên trong, triển khai các interface (ports) mà chúng định nghĩa. Cấu trúc phân lớp của Clean Architecture về cơ bản là một chiến lược giảm thiểu rủi ro. Phần ổn định và quan trọng nhất của ứng dụng là các quy tắc nghiệp vụ cốt lõi (miền). Những quy tắc này lý tưởng chỉ nên thay đổi khi chính nghiệp vụ thay đổi. Ngược lại, các phần dễ thay đổi và ít độc đáo nhất là các chi tiết triển khai: cơ sở dữ liệu cụ thể, web framework, API của bên thứ ba. Quy tắc Phụ thuộc đảm bảo rằng những thay đổi trong các thành phần dễ thay đổi (lớp ngoài) không thể phá vỡ các thành phần ổn định (lớp trong). Việc chuyển từ PostgreSQL sang MongoDB không nên đòi hỏi thay đổi một dòng mã nào trong lớp miền hoặc lớp ứng dụng. Do đó, kiến trúc được thiết kế để bảo vệ tài sản quý giá nhất (logic nghiệp vụ) khỏi các thành phần có rủi ro cao nhất (chi tiết triển khai). Nó hoạt động như một bức tường lửa kiến trúc, làm cho hệ thống trở nên kiên cường hơn trước sự thay đổi công nghệ và dễ bảo trì hơn trong dài hạn.\nPhần III: Triển khai Thực tế Cấu trúc Project Go DDD Phần này trình bày một cấu trúc project Go kinh điển, được tổng hợp từ nhiều ví dụ. Cấu trúc này tuân thủ các quy ước của Go và các thực tiễn tốt nhất của cộng đồng (ví dụ: sử dụng thư mục /internal).\nCấu trúc Thư mục Đề xuất:\n/cmd /app main.go // Điểm khởi đầu ứng dụng, DI /internal /application // Các dịch vụ ứng dụng, use cases, DTOs /user service.go /domain // Logic miền cốt lõi /user user.go // Aggregate root User, entities, value objects repository.go // Interface Repository (port) /infrastructure // Triển khai cụ thể các interface của miền /repository user_memory.go // Triển khai repository trong bộ nhớ user_mysql.go // Triển khai repository MySQL /interfaces // Các adapter điều khiển ứng dụng /http handler.go // Các HTTP handler (controllers) router.go Bảng sau đây tạo ra một liên kết rõ ràng giữa các khái niệm trừu tượng của DDD/Clean Architecture và các thư mục cụ thể trong project Go.\nMẫu DDD/Chiến thuật Khái niệm Clean/Hexagonal Trách nhiệm của Lớp Thư mục Go Aggregate Root Entity Mô hình hóa các quy tắc nghiệp vụ cốt lõi, bất biến. /internal/domain/user/user.go Repository Interface Port (Driven) Định nghĩa hợp đồng cho việc lưu trữ, độc lập công nghệ. /internal/domain/user/repository.go Application Service Use Case / Interactor Điều phối các đối tượng miền để thực hiện một tác vụ. /internal/application/user/service.go Repository Implementation Adapter (Driven) Triển khai cụ thể việc lưu trữ (ví dụ: PostgreSQL, MongoDB). /internal/infrastructure/repository/user_mysql.go HTTP Handler Adapter (Driving) Dịch các yêu cầu HTTP thành các lệnh gọi Application Service. /internal/interfaces/http/handler.go Triển khai Mẫu Repository Định nghĩa Port (Lớp Miền) Đây là mã nguồn cho interface Repository. Interface này nằm trong package domain vì nó định nghĩa một hợp đồng mà lõi nghiệp vụ yêu cầu, nhưng nó không quan tâm đến cách hợp đồng đó được thực hiện. Nó hoàn toàn độc lập với công nghệ.\nGo\n// trong /internal/domain/hour/repository.go package hour import ( \"context\" \"time\" ) type Repository interface { GetOrCreateHour(ctx context.Context, hourTime time.Time) (*Hour, error) UpdateHour( ctx context.Context, hourTime time.Time, updateFn func(h *Hour) (*Hour, error), ) error } Triển khai các Adapter (Lớp Hạ tầng) Adapter Trong bộ nhớ (In-Memory) Triển khai này sử dụng một map của Go để mô phỏng một cơ sở dữ liệu. Nó rất quan trọng để cho phép các bài kiểm thử đơn vị (unit test) nhanh chóng và đáng tin cậy cho các dịch vụ ứng dụng mà không cần đến một cơ sở dữ liệu thực sự.\nGo\n// trong /internal/infrastructure/repository/hour_memory.go package repository import ( //... imports ) type MemoryHourRepository struct { hours maphour.Hour lock *sync.RWMutex hourFactory hour.Factory } func NewMemoryHourRepository(hourFactory hour.Factory) *MemoryHourRepository { //... return \u0026MemoryHourRepository{ hours: maphour.Hour{}, lock: \u0026sync.RWMutex{}, hourFactory: hourFactory, } } func (m *MemoryHourRepository) UpdateHour( _ context.Context, hourTime time.Time, updateFn func(h *hour.Hour) (*hour.Hour, error), ) error { m.lock.Lock() defer m.lock.Unlock() currentHour, err := m.getOrCreateHour(hourTime) if err!= nil { return err } updatedHour, err := updateFn(currentHour) if err!= nil { return err } m.hours = *updatedHour return nil } //... các phương thức khác Adapter MySQL Đây là một triển khai sẵn sàng cho môi trường production, bao gồm cả việc quản lý giao dịch để đảm bảo tính nhất quán của dữ liệu.\nGo\n// trong /internal/infrastructure/repository/hour_mysql.go package repository import ( //... imports ) type MySQLHourRepository struct { db *sqlx.DB hourFactory hour.Factory } //... NewMySQLHourRepository func (m MySQLHourRepository) UpdateHour( ctx context.Context, hourTime time.Time, updateFn func(h *hour.Hour) (*hour.Hour, error), ) (err error) { tx, err := m.db.Beginx() if err!= nil { return errors.Wrap(err, \"unable to start transaction\") } defer func() { err = m.finishTransaction(err, tx) }() existingHour, err := m.getOrCreateHour(ctx, tx, hourTime, true) // forUpdate = true if err!= nil { return err } updatedHour, err := updateFn(existingHour) if err!= nil { return err } if err := m.upsertHour(tx, updatedHour); err!= nil { return err } return nil } func (m MySQLHourRepository) getOrCreateHour( ctx context.Context, db sqlContextGetter, hourTime time.Time, forUpdate bool, ) (*hour.Hour, error) { //... query := \"SELECT * FROM `hours` WHERE `hour` =?\" if forUpdate { query += \" FOR UPDATE\" } //... } //... các phương thức khác Kết nối các Lớp: Ví dụ về một Use Case Một Application Service sẽ sử dụng interface hour.Repository thông qua dependency injection. Nó không biết và không quan tâm đến việc triển khai cụ thể là in-memory hay MySQL.\nGo\n// trong /internal/application/booking/service.go package booking type Service struct { hourRepo hour.Repository } func (s Service) ScheduleTraining(ctx context.Context, hourTime time.Time) error { err := s.hourRepo.UpdateHour(ctx, hourTime, func(h *hour.Hour) (*hour.Hour, error) { if err := h.ScheduleTraining(); err!= nil { return nil, err } return h, nil }) return err } Cuối cùng, tệp main.go là nơi ứng dụng được khởi tạo. Đây là nơi “kết nối” xảy ra: một MySQLHourRepository cụ thể được khởi tạo và được tiêm vào Application Service, thỏa mãn interface hour.Repository. Điều này minh họa cơ chế dependency injection làm cho toàn bộ kiến trúc hoạt động.\nGo\n// trong /cmd/app/main.go package main func main() { //... thiết lập kết nối cơ sở dữ liệu (db) hourFactory := hour.NewFactory() // Tiêm triển khai MySQL cụ thể hourRepo := repository.NewMySQLHourRepository(db, hourFactory) bookingService := booking.NewService(hourRepo) //... khởi tạo và chạy máy chủ HTTP với bookingService } Phần IV: Phân tích và Khuyến nghị - Sự Đánh đổi của DDD trong Go Đánh giá Lợi ích (“Pros”) Khả năng Kiểm thử (Testability): Logic nghiệp vụ cốt lõi có thể được kiểm thử hoàn toàn độc lập với UI, cơ sở dữ liệu hoặc bất kỳ dịch vụ bên ngoài nào, dẫn đến các bài kiểm thử nhanh hơn và đáng tin cậy hơn. Khả năng Bảo trì \u0026 Linh hoạt: Sự tách biệt rõ ràng các mối quan tâm và quy tắc phụ thuộc có nghĩa là những thay đổi ở một phần của hệ thống (ví dụ: thay đổi cơ sở dữ liệu) có tác động tối thiểu đến các phần khác. Điều này làm cho codebase dễ hiểu và phát triển hơn theo thời gian. Phát triển Song song: Một khi các interface (ports) được định nghĩa, các nhóm khác nhau có thể làm việc trên các adapter khác nhau (ví dụ: nhóm UI, nhóm cơ sở dữ liệu) song song mà không có xung đột. Phù hợp với Nghiệp vụ: Kiến trúc buộc mã nguồn phải phản ánh miền nghiệp vụ, tạo ra một tài sản có giá trị và dễ hiểu hơn. Xem xét Nhược điểm (“Cons”) Phức tạp \u0026 Đường cong Học tập: Đây không phải là kiến trúc dành cho người mới bắt đầu. Nó đòi hỏi sự hiểu biết vững chắc về các nguyên tắc thiết kế phần mềm như SOLID và chính DDD. Có một sự đầu tư đáng kể ban đầu về thời gian học tập. Mã lặp (Boilerplate) \u0026 Sự Gián tiếp: Nhu cầu về các interface, DTO, và việc ánh xạ giữa các lớp có thể làm tăng lượng mã và khiến việc theo dõi một yêu cầu có cảm giác như “nhảy qua các lớp thừa thãi”. Nguy cơ Thiết kế Quá mức (Over-Engineering): Đối với các ứng dụng CRUD đơn giản hoặc các project có logic nghiệp vụ tối thiểu, kiến trúc này là quá mức cần thiết. Chi phí triển khai vượt xa lợi ích. Điều này trực tiếp giải quyết những lo ngại của cộng đồng Go về việc các mẫu “doanh nghiệp” bị áp đặt lên một ngôn ngữ coi trọng sự đơn giản. Chi phí Hiệu năng Tiềm tàng: Sự gián tiếp từ các interface và việc ánh xạ dữ liệu có thể gây ra một hình phạt hiệu năng nhỏ, điều này có thể là một mối quan tâm trong các ứng dụng yêu cầu hiệu năng cực kỳ cao. Kết luận DDD, được hỗ trợ bởi kiến trúc Clean/Hexagonal, là một chiến lược mạnh mẽ để xây dựng các ứng dụng Go phức tạp, dễ bảo trì và bền vững. Đây là một sự đầu tư chiến lược. Chi phí ban đầu về sự phức tạp và học tập được đền đáp trong suốt vòng đời của dự án thông qua việc tăng khả năng bảo trì, khả năng kiểm thử và khả năng thích ứng với các nhu cầu nghiệp vụ thay đổi.\nNếu thấy hay, hãy để lại cho mình 1 comment xuống phía dưới để mình có động lực viết các blog chất lượng tiếp theo nhé!\n","wordCount":"2865","inLanguage":"en","image":"https://blog.nagih.io.vn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-08-27T00:00:00Z","dateModified":"2025-08-27T00:00:00Z","author":{"@type":"Person","name":"Nagih"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.nagih.io.vn/posts/overview/"},"publisher":{"@type":"Organization","name":"Nagih | Blog","logo":{"@type":"ImageObject","url":"https://blog.nagih.io.vn/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.nagih.io.vn/ accesskey=h title="Home (Alt + H)"><img src=https://blog.nagih.io.vn/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.nagih.io.vn/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.nagih.io.vn/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.nagih.io.vn/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.nagih.io.vn/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://nagih.io.vn title=Home><span>Home</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.nagih.io.vn/>Home</a>&nbsp;»&nbsp;<a href=https://blog.nagih.io.vn/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">DDD (Domain-Driven Design)</h1><div class=post-meta><span title='2025-08-27 00:00:00 +0000 UTC'>August 27, 2025</span>&nbsp;·&nbsp;14 min&nbsp;·&nbsp;2865 words&nbsp;·&nbsp;Nagih&nbsp;|&nbsp;<a href=https://github.com/vuongmanhnghia/posts/content/posts/architechture/ddd/Overview.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#phần-i-các-nguyên-tắc-cốt-lõi-của-ddd>Phần I: Các Nguyên tắc Cốt lõi của DDD</a><ul><li><a href=#thiết-kế-chiến-lược-lập-bản-đồ-context-nghiệp-vụ>Thiết kế Chiến lược: Lập bản đồ Context Nghiệp vụ</a></li><li><a href=#thiết-kế>Thiết kế</a></li></ul></li><li><a href=#phần-ii-clean-và-hexagonal-architectures>Phần II: Clean và Hexagonal Architectures</a><ul><li><a href=#nguyên-tắc-đảo-ngược-phụ-thuộc>Nguyên tắc Đảo ngược Phụ thuộc</a></li><li><a href=#cấu-trúc-lõi-ứng-dụng>Cấu trúc Lõi Ứng dụng</a></li></ul></li><li><a href=#phần-iii-triển-khai-thực-tế>Phần III: Triển khai Thực tế</a><ul><li><a href=#cấu-trúc-project-go-ddd>Cấu trúc Project Go DDD</a></li><li><a href=#triển-khai-mẫu-repository>Triển khai Mẫu Repository</a></li></ul></li><li><a href=#phần-iv-phân-tích-và-khuyến-nghị---sự-đánh-đổi-của-ddd-trong-go>Phần IV: Phân tích và Khuyến nghị - Sự Đánh đổi của DDD trong Go</a><ul><li><a href=#đánh-giá-lợi-ích-pros>Đánh giá Lợi ích (&ldquo;Pros&rdquo;)</a></li><li><a href=#xem-xét-nhược-điểm-cons>Xem xét Nhược điểm (&ldquo;Cons&rdquo;)</a></li></ul></li><li><a href=#kết-luận>Kết luận</a></li></ul></nav></div></details></div><div class=post-content><p>Architecture Overview Domain-Driven Design(DDD)</p><h2 id=phần-i-các-nguyên-tắc-cốt-lõi-của-ddd>Phần I: Các Nguyên tắc Cốt lõi của DDD<a hidden class=anchor aria-hidden=true href=#phần-i-các-nguyên-tắc-cốt-lõi-của-ddd>#</a></h2><h3 id=thiết-kế-chiến-lược-lập-bản-đồ-context-nghiệp-vụ>Thiết kế Chiến lược: Lập bản đồ Context Nghiệp vụ<a hidden class=anchor aria-hidden=true href=#thiết-kế-chiến-lược-lập-bản-đồ-context-nghiệp-vụ>#</a></h3><h4 id=context-giới-hạn-bounded-contexts>Context Giới hạn (Bounded Contexts)<a hidden class=anchor aria-hidden=true href=#context-giới-hạn-bounded-contexts>#</a></h4><p>Các hệ thống lớn hiếm khi có một mô hình <strong>duy nhất, thống nhất</strong>. Thuật ngữ &ldquo;Người dùng&rdquo; có thể có ý nghĩa khác nhau trong layer &ldquo;Xác thực&rdquo; so với context &ldquo;Hỗ trợ Kỹ thuật&rdquo;. Chiến lược &ldquo;chia để trị&rdquo; này là câu trả lời của DDD để quản lý sự phức tạp trong các tổ chức lớn. Việc xác định các context là mục tiêu chính của Thiết kế Chiến lược và rất quan trọng để xác định ranh giới của các microservice.</p><p>Toàn bộ cấu trúc của một hệ thống phức tạp bắt nguồn trực tiếp từ những sự mơ hồ về ngôn ngữ được phát hiện trong quá trình thiết kế. Quá trình này diễn ra như sau: đầu tiên, các nhà phát triển nhận ra rằng một thuật ngữ duy nhất (ví dụ: &ldquo;Khách hàng&rdquo;) có nhiều ý nghĩa mâu thuẫn giữa các phòng ban (hiện tượng đa nghĩa). Để giải quyết vấn đề này, họ áp dụng mẫu Bounded Context, vẽ ra các ranh giới rõ ràng xung quanh các khu vực mà ngôn ngữ là nhất quán. Ví dụ, một &ldquo;Context Bán hàng&rdquo; và một &ldquo;Context Hỗ trợ&rdquo; được xác định. Các Bounded Context này sau đó trở thành các service hoặc module riêng biệt trong kiến trúc.</p><p><em>p/s: Bounded Context được hiểu là 1 context bị giới hạn</em></p><h3 id=thiết-kế>Thiết kế<a hidden class=anchor aria-hidden=true href=#thiết-kế>#</a></h3><p>Cung cấp các mẫu để xây dựng một mô hình miền phong phú <em>bên trong</em> một Bounded Context duy nhất.</p><ul><li><strong>Entities (Thực thể):</strong> Các đối tượng được xác định không phải bởi các thuộc tính của chúng, mà bởi định danh duy nhất và sự tồn tại liên tục theo thời gian (ví dụ: một <code>Customer</code> với một ID duy nhất). Chúng có thể thay đổi, nhưng các thay đổi trạng thái nên được mô hình hóa như các hoạt động nghiệp vụ rõ ràng (ví dụ:
<code>customer.ChangeAddress()</code>, không phải <code>customer.setAddress()</code>.</li><li><strong>Value Objects (Đối tượng Giá trị):</strong> Các đối tượng đại diện cho một khía cạnh mô tả của miền và không có định danh khái niệm (ví dụ: <code>Money</code>, <code>Address</code>, <code>Color</code>). Được định nghĩa bởi các thuộc tính của chúng, là bất biến, và sự bằng nhau của chúng dựa trên giá trị, không phải định danh.</li><li><strong>Aggregates (Tập hợp):</strong> Một cụm các đối tượng liên quan (Entities và Value Objects) được coi là một đơn vị duy nhất cho các thay đổi dữ liệu. Mỗi Aggregate có một Entity gốc, được gọi là <strong>Aggregate Root</strong>. Aggregate Root là thành viên duy nhất của Aggregate mà các đối tượng bên ngoài được phép giữ tham chiếu đến. Nó chịu trách nhiệm thực thi các quy tắc nghiệp vụ (bất biến) cho toàn bộ cụm. Mẫu này xác định các ranh giới nhất quán giao dịch.</li><li><strong>Domain Services (Dịch vụ Miền):</strong> Khi một logic miền nào đó không tự nhiên thuộc về một Entity hoặc Value Object (ví dụ: một quy trình liên quan đến nhiều Aggregate), nó có thể được mô hình hóa trong một Domain Service không trạng thái.</li><li><strong>Domain Events (Sự kiện Miền):</strong> Một cơ chế để ghi lại các sự kiện quan trọng xảy ra trong miền (ví dụ: <code>OrderShipped</code>, <code>DeliveryCanceled</code>). Chúng rất quan trọng cho việc giao tiếp giữa các Aggregate và đặc biệt là giữa các Bounded Context khác nhau trong kiến trúc microservices.</li><li><strong>Repositories (Kho chứa) và Factories (Nhà máy):</strong> Repositories cung cấp ảo giác về một bộ sưu tập các Aggregate trong bộ nhớ, trừu tượng hóa cơ chế lưu trữ. Factories đóng gói logic để tạo ra các đối tượng hoặc Aggregate phức tạp.</li></ul><table><thead><tr><th>Tên Mẫu</th><th>Mục đích</th><th>Đặc điểm Chính</th><th>Ví dụ</th></tr></thead><tbody><tr><td><strong>Entity</strong></td><td>Đại diện cho một đối tượng có định danh và vòng đời.</td><td>Có ID duy nhất, khả biến (mutable), sự bằng nhau dựa trên ID.</td><td><code>Customer</code>, <code>Product</code>, <code>Order</code></td></tr><tr><td><strong>Value Object</strong></td><td>Mô tả một thuộc tính của miền.</td><td>Không có ID, bất biến (immutable), sự bằng nhau dựa trên giá trị.</td><td><code>Address</code>, <code>Money</code>, <code>DateRange</code></td></tr><tr><td><strong>Aggregate</strong></td><td>Một cụm các đối tượng được coi là một đơn vị nhất quán.</td><td>Có một Aggregate Root, định nghĩa ranh giới giao dịch.</td><td>Một <code>Order</code> cùng với các <code>OrderLineItem</code> của nó.</td></tr><tr><td><strong>Domain Service</strong></td><td>Đóng gói logic miền không thuộc về một Entity duy nhất.</td><td>Không trạng thái, thường liên quan đến nhiều Aggregate.</td><td>Dịch vụ tính toán phí vận chuyển dựa trên nhiều đơn hàng.</td></tr><tr><td><strong>Domain Event</strong></td><td>Ghi lại một sự kiện nghiệp vụ đã xảy ra.</td><td>Bất biến, mô tả một điều gì đó trong quá khứ.</td><td><code>OrderPlaced</code>, <code>PaymentReceived</code></td></tr><tr><td><strong>Repository</strong></td><td>Trừu tượng hóa việc truy cập và lưu trữ các Aggregate.</td><td>Cung cấp giao diện giống như bộ sưu tập, ẩn chi tiết cơ sở dữ liệu.</td><td><code>CustomerRepository</code>, <code>OrderRepository</code></td></tr><tr><td><strong>Factory</strong></td><td>Đóng gói logic tạo đối tượng phức tạp.</td><td>Đảm bảo các đối tượng được tạo ra ở trạng thái hợp lệ.</td><td><code>OrderFactory</code> tạo một <code>Order</code> từ các thông tin đầu vào.</td></tr></tbody></table><p><em><a href=/https://blog.nagih.io.vn/post/architechture/ddd/internal-separation//>Phân biệt rõ các tác vụ trong Internal</a></em></p><h2 id=phần-ii-clean-và-hexagonal-architectures>Phần II: Clean và Hexagonal Architectures<a hidden class=anchor aria-hidden=true href=#phần-ii-clean-và-hexagonal-architectures>#</a></h2><p>Phần này sẽ bắc cầu từ khái niệm DDD đến cấu trúc project.</p><h3 id=nguyên-tắc-đảo-ngược-phụ-thuộc>Nguyên tắc Đảo ngược Phụ thuộc<a hidden class=anchor aria-hidden=true href=#nguyên-tắc-đảo-ngược-phụ-thuộc>#</a></h3><p>Vấn đề với kiến trúc phân lớp truyền thống là logic nghiệp vụ thường trở nên phụ thuộc vào cơ sở dữ liệu.</p><p><strong>Kiến trúc Lục giác (Ports and Adapters):</strong> Mẫu này được giới thiệu như là giải pháp. Ý tưởng cốt lõi là cô lập logic nghiệp vụ của ứng dụng (&ldquo;hình lục giác&rdquo;) khỏi thế giới bên ngoài (UI, cơ sở dữ liệu, API bên ngoài).</p><ul><li><strong>Ports:</strong> Đây là các interface được định nghĩa <em>bên trong</em> hình lục giác, quy định cách thức giao tiếp diễn ra. Chúng đại diện cho nhu cầu của ứng dụng (ví dụ: <code>Tôi cần lưu một người dùng</code>, <code>Tôi cần được điều khiển bởi một yêu cầu HTTP</code>).</li><li><strong>Adapters:</strong> Đây là các triển khai cụ thể của các port, sống <em>bên ngoài</em> hình lục giác. Chúng dịch giữa port độc lập công nghệ và một công nghệ cụ thể (ví dụ: một adapter PostgreSQL triển khai port lưu người dùng, một adapter xử lý HTTP).</li></ul><h3 id=cấu-trúc-lõi-ứng-dụng>Cấu trúc Lõi Ứng dụng<a hidden class=anchor aria-hidden=true href=#cấu-trúc-lõi-ứng-dụng>#</a></h3><p><strong>Kiến trúc Sạch (Clean Architecture):</strong> Được trình bày như một sự phát triển chi tiết hơn của Kiến trúc Lục giác, tổ chức lõi thành các lớp đồng tâm.</p><p><strong>Quy tắc Phụ thuộc:</strong> Đây là quy tắc quan trọng nhất: các phụ thuộc mã nguồn chỉ có thể trỏ vào trong. Logic miền ở trung tâm không biết gì về các lớp bên ngoài.</p><p><strong>Giải thích các Lớp:</strong></p><ul><li><strong>Lớp Miền (Domain Layer - Entities):</strong> Trung tâm tuyệt đối. Chứa các Entities, Value Objects, và Aggregates được định nghĩa bởi Thiết kế Chiến thuật. Nó không có phụ thuộc bên ngoài nào.</li><li><strong>Lớp Ứng dụng (Application Layer - Use Cases):</strong> Quay quanh lớp miền. Nó chứa các quy tắc nghiệp vụ cụ thể của ứng dụng và điều phối các đối tượng miền để thực hiện các trường hợp sử dụng (ví dụ: <code>CreateOrderService</code>). Phụ thuộc vào lớp miền nhưng không phụ thuộc vào các lớp bên ngoài.</li><li><strong>Lớp Hạ tầng/Giao diện (Infrastructure/Interfaces Layer - Adapters):</strong> Lớp ngoài cùng. Chứa mọi thứ tương tác với thế giới bên ngoài: cơ sở dữ liệu, web frameworks, hàng đợi tin nhắn. Lớp này phụ thuộc vào các lớp bên trong, triển khai các interface (ports) mà chúng định nghĩa.</li></ul><p>Cấu trúc phân lớp của Clean Architecture về cơ bản là một chiến lược giảm thiểu rủi ro. Phần ổn định và quan trọng nhất của ứng dụng là các quy tắc nghiệp vụ cốt lõi (miền). Những quy tắc này lý tưởng chỉ nên thay đổi khi chính nghiệp vụ thay đổi. Ngược lại, các phần dễ thay đổi và ít độc đáo nhất là các chi tiết triển khai: cơ sở dữ liệu cụ thể, web framework, API của bên thứ ba. Quy tắc Phụ thuộc đảm bảo rằng những thay đổi trong các thành phần dễ thay đổi (lớp ngoài) không thể phá vỡ các thành phần ổn định (lớp trong). Việc chuyển từ PostgreSQL sang MongoDB không nên đòi hỏi thay đổi một dòng mã nào trong lớp miền hoặc lớp ứng dụng. Do đó, kiến trúc được thiết kế để bảo vệ tài sản quý giá nhất (logic nghiệp vụ) khỏi các thành phần có rủi ro cao nhất (chi tiết triển khai). Nó hoạt động như một bức tường lửa kiến trúc, làm cho hệ thống trở nên kiên cường hơn trước sự thay đổi công nghệ và dễ bảo trì hơn trong dài hạn.</p><h2 id=phần-iii-triển-khai-thực-tế>Phần III: Triển khai Thực tế<a hidden class=anchor aria-hidden=true href=#phần-iii-triển-khai-thực-tế>#</a></h2><h3 id=cấu-trúc-project-go-ddd>Cấu trúc Project Go DDD<a hidden class=anchor aria-hidden=true href=#cấu-trúc-project-go-ddd>#</a></h3><p>Phần này trình bày một cấu trúc project Go kinh điển, được tổng hợp từ nhiều ví dụ. Cấu trúc này tuân thủ các quy ước của Go và các thực tiễn tốt nhất của cộng đồng (ví dụ: sử dụng thư mục <code>/internal</code>).</p><p><strong>Cấu trúc Thư mục Đề xuất:</strong></p><pre tabindex=0><code>/cmd
  /app
    main.go          // Điểm khởi đầu ứng dụng, DI
/internal
  /application       // Các dịch vụ ứng dụng, use cases, DTOs
    /user
      service.go
  /domain            // Logic miền cốt lõi
    /user
      user.go        // Aggregate root User, entities, value objects
      repository.go  // Interface Repository (port)
  /infrastructure    // Triển khai cụ thể các interface của miền
    /repository
      user_memory.go // Triển khai repository trong bộ nhớ
      user_mysql.go  // Triển khai repository MySQL
  /interfaces        // Các adapter điều khiển ứng dụng
    /http
      handler.go     // Các HTTP handler (controllers)
      router.go
</code></pre><p>Bảng sau đây tạo ra một liên kết rõ ràng giữa các khái niệm trừu tượng của DDD/Clean Architecture và các thư mục cụ thể trong project Go.</p><table><thead><tr><th>Mẫu DDD/Chiến thuật</th><th>Khái niệm Clean/Hexagonal</th><th>Trách nhiệm của Lớp</th><th>Thư mục Go</th></tr></thead><tbody><tr><td><strong>Aggregate Root</strong></td><td>Entity</td><td>Mô hình hóa các quy tắc nghiệp vụ cốt lõi, bất biến.</td><td><code>/internal/domain/user/user.go</code></td></tr><tr><td><strong>Repository Interface</strong></td><td>Port (Driven)</td><td>Định nghĩa hợp đồng cho việc lưu trữ, độc lập công nghệ.</td><td><code>/internal/domain/user/repository.go</code></td></tr><tr><td><strong>Application Service</strong></td><td>Use Case / Interactor</td><td>Điều phối các đối tượng miền để thực hiện một tác vụ.</td><td><code>/internal/application/user/service.go</code></td></tr><tr><td><strong>Repository Implementation</strong></td><td>Adapter (Driven)</td><td>Triển khai cụ thể việc lưu trữ (ví dụ: PostgreSQL, MongoDB).</td><td><code>/internal/infrastructure/repository/user_mysql.go</code></td></tr><tr><td><strong>HTTP Handler</strong></td><td>Adapter (Driving)</td><td>Dịch các yêu cầu HTTP thành các lệnh gọi Application Service.</td><td><code>/internal/interfaces/http/handler.go</code></td></tr></tbody></table><h3 id=triển-khai-mẫu-repository>Triển khai Mẫu Repository<a hidden class=anchor aria-hidden=true href=#triển-khai-mẫu-repository>#</a></h3><h4 id=định-nghĩa-port-lớp-miền>Định nghĩa Port (Lớp Miền)<a hidden class=anchor aria-hidden=true href=#định-nghĩa-port-lớp-miền>#</a></h4><p>Đây là mã nguồn cho interface <code>Repository</code>. Interface này nằm trong package <code>domain</code> vì nó định nghĩa một hợp đồng mà lõi nghiệp vụ yêu cầu, nhưng nó không quan tâm đến cách hợp đồng đó được thực hiện. Nó hoàn toàn độc lập với công nghệ.</p><p>Go</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// trong /internal/domain/hour/repository.go</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>hour</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Repository</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>GetOrCreateHour</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=nx>hourTime</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>Hour</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nf>UpdateHour</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>hourTime</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>updateFn</span> <span class=kd>func</span><span class=p>(</span><span class=nx>h</span> <span class=o>*</span><span class=nx>Hour</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>Hour</span><span class=p>,</span> <span class=kt>error</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=triển-khai-các-adapter-lớp-hạ-tầng>Triển khai các Adapter (Lớp Hạ tầng)<a hidden class=anchor aria-hidden=true href=#triển-khai-các-adapter-lớp-hạ-tầng>#</a></h4><h5 id=adapter-trong-bộ-nhớ-in-memory>Adapter Trong bộ nhớ (In-Memory)<a hidden class=anchor aria-hidden=true href=#adapter-trong-bộ-nhớ-in-memory>#</a></h5><p>Triển khai này sử dụng một map của Go để mô phỏng một cơ sở dữ liệu. Nó rất quan trọng để cho phép các bài kiểm thử đơn vị (unit test) nhanh chóng và đáng tin cậy cho các dịch vụ ứng dụng mà không cần đến một cơ sở dữ liệu thực sự.</p><p>Go</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// trong /internal/infrastructure/repository/hour_memory.go</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>repository</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=c1>//... imports</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>MemoryHourRepository</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>hours</span> <span class=nx>maphour</span><span class=p>.</span><span class=nx>Hour</span>
</span></span><span class=line><span class=cl>    <span class=nx>lock</span>  <span class=o>*</span><span class=nx>sync</span><span class=p>.</span><span class=nx>RWMutex</span>
</span></span><span class=line><span class=cl>    <span class=nx>hourFactory</span> <span class=nx>hour</span><span class=p>.</span><span class=nx>Factory</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>NewMemoryHourRepository</span><span class=p>(</span><span class=nx>hourFactory</span> <span class=nx>hour</span><span class=p>.</span><span class=nx>Factory</span><span class=p>)</span> <span class=o>*</span><span class=nx>MemoryHourRepository</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//...</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>MemoryHourRepository</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>hours</span><span class=p>:</span>       <span class=nx>maphour</span><span class=p>.</span><span class=nx>Hour</span><span class=p>{},</span>
</span></span><span class=line><span class=cl>        <span class=nx>lock</span><span class=p>:</span>        <span class=o>&amp;</span><span class=nx>sync</span><span class=p>.</span><span class=nx>RWMutex</span><span class=p>{},</span>
</span></span><span class=line><span class=cl>        <span class=nx>hourFactory</span><span class=p>:</span> <span class=nx>hourFactory</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=o>*</span><span class=nx>MemoryHourRepository</span><span class=p>)</span> <span class=nf>UpdateHour</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>_</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>hourTime</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>updateFn</span> <span class=kd>func</span><span class=p>(</span><span class=nx>h</span> <span class=o>*</span><span class=nx>hour</span><span class=p>.</span><span class=nx>Hour</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>hour</span><span class=p>.</span><span class=nx>Hour</span><span class=p>,</span> <span class=kt>error</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>m</span><span class=p>.</span><span class=nx>lock</span><span class=p>.</span><span class=nf>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>m</span><span class=p>.</span><span class=nx>lock</span><span class=p>.</span><span class=nf>Unlock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>currentHour</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>m</span><span class=p>.</span><span class=nf>getOrCreateHour</span><span class=p>(</span><span class=nx>hourTime</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span><span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>updatedHour</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>updateFn</span><span class=p>(</span><span class=nx>currentHour</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span><span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>m</span><span class=p>.</span><span class=nx>hours</span> <span class=p>=</span> <span class=o>*</span><span class=nx>updatedHour</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//... các phương thức khác</span>
</span></span></code></pre></div><h5 id=adapter-mysql>Adapter MySQL<a hidden class=anchor aria-hidden=true href=#adapter-mysql>#</a></h5><p>Đây là một triển khai sẵn sàng cho môi trường production, bao gồm cả việc quản lý giao dịch để đảm bảo tính nhất quán của dữ liệu.</p><p>Go</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// trong /internal/infrastructure/repository/hour_mysql.go</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>repository</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=c1>//... imports</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>MySQLHourRepository</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>db</span> <span class=o>*</span><span class=nx>sqlx</span><span class=p>.</span><span class=nx>DB</span>
</span></span><span class=line><span class=cl>    <span class=nx>hourFactory</span> <span class=nx>hour</span><span class=p>.</span><span class=nx>Factory</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//... NewMySQLHourRepository</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=nx>MySQLHourRepository</span><span class=p>)</span> <span class=nf>UpdateHour</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>hourTime</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>updateFn</span> <span class=kd>func</span><span class=p>(</span><span class=nx>h</span> <span class=o>*</span><span class=nx>hour</span><span class=p>.</span><span class=nx>Hour</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>hour</span><span class=p>.</span><span class=nx>Hour</span><span class=p>,</span> <span class=kt>error</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>(</span><span class=nx>err</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>tx</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>m</span><span class=p>.</span><span class=nx>db</span><span class=p>.</span><span class=nf>Beginx</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span><span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>Wrap</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=s>&#34;unable to start transaction&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>err</span> <span class=p>=</span> <span class=nx>m</span><span class=p>.</span><span class=nf>finishTransaction</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>tx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>existingHour</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>m</span><span class=p>.</span><span class=nf>getOrCreateHour</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>tx</span><span class=p>,</span> <span class=nx>hourTime</span><span class=p>,</span> <span class=kc>true</span><span class=p>)</span> <span class=c1>// forUpdate = true</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span><span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>updatedHour</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>updateFn</span><span class=p>(</span><span class=nx>existingHour</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span><span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>m</span><span class=p>.</span><span class=nf>upsertHour</span><span class=p>(</span><span class=nx>tx</span><span class=p>,</span> <span class=nx>updatedHour</span><span class=p>);</span> <span class=nx>err</span><span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=nx>MySQLHourRepository</span><span class=p>)</span> <span class=nf>getOrCreateHour</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>db</span> <span class=nx>sqlContextGetter</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>hourTime</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>forUpdate</span> <span class=kt>bool</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>hour</span><span class=p>.</span><span class=nx>Hour</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//...</span>
</span></span><span class=line><span class=cl>    <span class=nx>query</span> <span class=o>:=</span> <span class=s>&#34;SELECT * FROM `hours` WHERE `hour` =?&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>forUpdate</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>query</span> <span class=o>+=</span> <span class=s>&#34; FOR UPDATE&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//... các phương thức khác</span>
</span></span></code></pre></div><h4 id=kết-nối-các-lớp-ví-dụ-về-một-use-case>Kết nối các Lớp: Ví dụ về một Use Case<a hidden class=anchor aria-hidden=true href=#kết-nối-các-lớp-ví-dụ-về-một-use-case>#</a></h4><p>Một <code>Application Service</code> sẽ sử dụng interface <code>hour.Repository</code> thông qua dependency injection. Nó không biết và không quan tâm đến việc triển khai cụ thể là in-memory hay MySQL.</p><p>Go</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// trong /internal/application/booking/service.go</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>booking</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Service</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>hourRepo</span> <span class=nx>hour</span><span class=p>.</span><span class=nx>Repository</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>Service</span><span class=p>)</span> <span class=nf>ScheduleTraining</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=nx>hourTime</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>err</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>hourRepo</span><span class=p>.</span><span class=nf>UpdateHour</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>hourTime</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>h</span> <span class=o>*</span><span class=nx>hour</span><span class=p>.</span><span class=nx>Hour</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>hour</span><span class=p>.</span><span class=nx>Hour</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>h</span><span class=p>.</span><span class=nf>ScheduleTraining</span><span class=p>();</span> <span class=nx>err</span><span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>h</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Cuối cùng, tệp <code>main.go</code> là nơi ứng dụng được khởi tạo. Đây là nơi &ldquo;kết nối&rdquo; xảy ra: một <code>MySQLHourRepository</code> cụ thể được khởi tạo và được tiêm vào <code>Application Service</code>, thỏa mãn interface <code>hour.Repository</code>. Điều này minh họa cơ chế dependency injection làm cho toàn bộ kiến trúc hoạt động.</p><p>Go</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// trong /cmd/app/main.go</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//... thiết lập kết nối cơ sở dữ liệu (db)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>hourFactory</span> <span class=o>:=</span> <span class=nx>hour</span><span class=p>.</span><span class=nf>NewFactory</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Tiêm triển khai MySQL cụ thể</span>
</span></span><span class=line><span class=cl>    <span class=nx>hourRepo</span> <span class=o>:=</span> <span class=nx>repository</span><span class=p>.</span><span class=nf>NewMySQLHourRepository</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span> <span class=nx>hourFactory</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>bookingService</span> <span class=o>:=</span> <span class=nx>booking</span><span class=p>.</span><span class=nf>NewService</span><span class=p>(</span><span class=nx>hourRepo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//... khởi tạo và chạy máy chủ HTTP với bookingService</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=phần-iv-phân-tích-và-khuyến-nghị---sự-đánh-đổi-của-ddd-trong-go>Phần IV: Phân tích và Khuyến nghị - Sự Đánh đổi của DDD trong Go<a hidden class=anchor aria-hidden=true href=#phần-iv-phân-tích-và-khuyến-nghị---sự-đánh-đổi-của-ddd-trong-go>#</a></h2><h3 id=đánh-giá-lợi-ích-pros>Đánh giá Lợi ích (&ldquo;Pros&rdquo;)<a hidden class=anchor aria-hidden=true href=#đánh-giá-lợi-ích-pros>#</a></h3><ul><li><strong>Khả năng Kiểm thử (Testability):</strong> Logic nghiệp vụ cốt lõi có thể được kiểm thử hoàn toàn độc lập với UI, cơ sở dữ liệu hoặc bất kỳ dịch vụ bên ngoài nào, dẫn đến các bài kiểm thử nhanh hơn và đáng tin cậy hơn.</li><li><strong>Khả năng Bảo trì & Linh hoạt:</strong> Sự tách biệt rõ ràng các mối quan tâm và quy tắc phụ thuộc có nghĩa là những thay đổi ở một phần của hệ thống (ví dụ: thay đổi cơ sở dữ liệu) có tác động tối thiểu đến các phần khác. Điều này làm cho codebase dễ hiểu và phát triển hơn theo thời gian.</li><li><strong>Phát triển Song song:</strong> Một khi các interface (ports) được định nghĩa, các nhóm khác nhau có thể làm việc trên các adapter khác nhau (ví dụ: nhóm UI, nhóm cơ sở dữ liệu) song song mà không có xung đột.</li><li><strong>Phù hợp với Nghiệp vụ:</strong> Kiến trúc buộc mã nguồn phải phản ánh miền nghiệp vụ, tạo ra một tài sản có giá trị và dễ hiểu hơn.</li></ul><h3 id=xem-xét-nhược-điểm-cons>Xem xét Nhược điểm (&ldquo;Cons&rdquo;)<a hidden class=anchor aria-hidden=true href=#xem-xét-nhược-điểm-cons>#</a></h3><ul><li><strong>Phức tạp & Đường cong Học tập:</strong> Đây không phải là kiến trúc dành cho người mới bắt đầu. Nó đòi hỏi sự hiểu biết vững chắc về các nguyên tắc thiết kế phần mềm như SOLID và chính DDD. Có một sự đầu tư đáng kể ban đầu về thời gian học tập.</li><li><strong>Mã lặp (Boilerplate) & Sự Gián tiếp:</strong> Nhu cầu về các interface, DTO, và việc ánh xạ giữa các lớp có thể làm tăng lượng mã và khiến việc theo dõi một yêu cầu có cảm giác như &ldquo;nhảy qua các lớp thừa thãi&rdquo;.</li><li><strong>Nguy cơ Thiết kế Quá mức (Over-Engineering):</strong> Đối với các ứng dụng CRUD đơn giản hoặc các project có logic nghiệp vụ tối thiểu, kiến trúc này là quá mức cần thiết. Chi phí triển khai vượt xa lợi ích. Điều này trực tiếp giải quyết những lo ngại của cộng đồng Go về việc các mẫu &ldquo;doanh nghiệp&rdquo; bị áp đặt lên một ngôn ngữ coi trọng sự đơn giản.</li><li><strong>Chi phí Hiệu năng Tiềm tàng:</strong> Sự gián tiếp từ các interface và việc ánh xạ dữ liệu có thể gây ra một hình phạt hiệu năng nhỏ, điều này có thể là một mối quan tâm trong các ứng dụng yêu cầu hiệu năng cực kỳ cao.</li></ul><h2 id=kết-luận>Kết luận<a hidden class=anchor aria-hidden=true href=#kết-luận>#</a></h2><p>DDD, được hỗ trợ bởi kiến trúc Clean/Hexagonal, là một chiến lược mạnh mẽ để xây dựng các ứng dụng Go phức tạp, dễ bảo trì và bền vững. Đây là một sự đầu tư chiến lược. Chi phí ban đầu về sự phức tạp và học tập được đền đáp trong suốt vòng đời của dự án thông qua việc tăng khả năng bảo trì, khả năng kiểm thử và khả năng thích ứng với các nhu cầu nghiệp vụ thay đổi.</p><hr><p><em>Nếu thấy hay, hãy để lại cho mình 1 comment xuống phía dưới để mình có động lực viết các blog chất lượng tiếp theo nhé!</em></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.nagih.io.vn/tags/go/>Go</a></li></ul><nav class=paginav><a class=prev href=https://blog.nagih.io.vn/posts/rest-v%C3%A0-grpc/><span class=title>« Prev</span><br><span>REST và gRPC</span>
</a><a class=next href=https://blog.nagih.io.vn/posts/labs-operating/><span class=title>Next »</span><br><span>Labs Operating</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share DDD (Domain-Driven Design) on x" href="https://x.com/intent/tweet/?text=DDD%20%28Domain-Driven%20Design%29&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2foverview%2f&amp;hashtags=go"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DDD (Domain-Driven Design) on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2foverview%2f&amp;title=DDD%20%28Domain-Driven%20Design%29&amp;summary=DDD%20%28Domain-Driven%20Design%29&amp;source=https%3a%2f%2fblog.nagih.io.vn%2fposts%2foverview%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DDD (Domain-Driven Design) on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2foverview%2f&title=DDD%20%28Domain-Driven%20Design%29"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DDD (Domain-Driven Design) on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.nagih.io.vn%2fposts%2foverview%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DDD (Domain-Driven Design) on whatsapp" href="https://api.whatsapp.com/send?text=DDD%20%28Domain-Driven%20Design%29%20-%20https%3a%2f%2fblog.nagih.io.vn%2fposts%2foverview%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DDD (Domain-Driven Design) on telegram" href="https://telegram.me/share/url?text=DDD%20%28Domain-Driven%20Design%29&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fposts%2foverview%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DDD (Domain-Driven Design) on ycombinator" href="https://news.ycombinator.com/submitlink?t=DDD%20%28Domain-Driven%20Design%29&u=https%3a%2f%2fblog.nagih.io.vn%2fposts%2foverview%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.nagih.io.vn/>Nagih | Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>