<!doctype html>
<html
  itemscope
  class=""
  lang="en-us"
  itemtype="http://schema.org/WebPage">
  <head>
    
    <meta charset="utf-8" />


<meta
  name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=5" />


<meta name="theme-name" content="hugoplate" />















<link rel="shortcut icon" href="/images/favicon_hu_398672b1ae8e6375.png" type="image/x-icon">
<link rel="icon" href="/images/favicon_hu_398672b1ae8e6375.png" type="image/x-icon">
<link rel="icon" type="image/png" sizes="48x48" href="/images/favicon_hu_e09a001e927a429b.png">
<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon_hu_398672b1ae8e6375.png">
<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon_hu_58ce09429db5e529.png">








<link rel="manifest" href="/manifest.webmanifest" />
<meta
  name="msapplication-TileColor"
  content="#ddd" />
<meta
  name="theme-color"
  content="#ffffff" />






















  <base href="https://blog.nagih.io.vn/blog/architechture/ddd/overview/" />







  
  


<title>DDD (Domain-Driven Design)</title>















  <meta
    name="keywords"
    content="Boilerplate, Hugo" />




<meta
  name="description"
  content="Architecture Overview Domain-Driven Design(DDD)" />



  <meta name="author" content="zeon.studio" />






  
  






  







  

  
  
  


  
  
    
    
      
    

    


    
    


    
    
      
      
      
        <meta property="og:image" content="https://blog.nagih.io.vn/images/image-placeholder.png" />
        <meta name="twitter:image" content="https://blog.nagih.io.vn/images/image-placeholder.png" />
        <meta
          name="twitter:card"
          content="summary_large_image" />
      
      
      <meta property="og:image:width" content="1096" />
      <meta property="og:image:height" content="480" />
    


    
    <meta
      property="og:image:type"
      content="image/.png" />
  


  





<meta property="og:title" content="DDD (Domain-Driven Design)" />
<meta property="og:description" content="Architecture Overview Domain-Driven Design(DDD)" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://blog.nagih.io.vn/blog/architechture/ddd/overview/" />


<meta name="twitter:title" content="DDD (Domain-Driven Design)" />
<meta name="twitter:description" content="Architecture Overview Domain-Driven Design(DDD)" />


  <meta name="twitter:site" content="@zeon_studio" />


  <meta name="twitter:creator" content="@zeon.studio" />



















<script>
  let indexURL = "https://blog.nagih.io.vn/searchindex.json";
  let includeSectionsInSearch = ["blog"];
  let search_no_results = "No results for";
  let search_initial_message = "Type something to search..";
</script>























    
    
<meta http-equiv="x-dns-prefetch-control" content="on" />
<link rel="preconnect" href="https://use.fontawesome.com" crossorigin />
<link rel="preconnect" href="//cdnjs.cloudflare.com" />
<link rel="preconnect" href="//www.googletagmanager.com" />
<link rel="preconnect" href="//www.google-analytics.com" />
<link rel="dns-prefetch" href="https://use.fontawesome.com" />
<link rel="dns-prefetch" href="//ajax.googleapis.com" />
<link rel="dns-prefetch" href="//cdnjs.cloudflare.com" />
<link rel="dns-prefetch" href="//www.googletagmanager.com" />
<link rel="dns-prefetch" href="//www.google-analytics.com" />
<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link rel="dns-prefetch" href="//connect.facebook.net" />
<link rel="dns-prefetch" href="//platform.linkedin.com" />
<link rel="dns-prefetch" href="//platform.twitter.com" />




<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script>
  (function () {
    const googleFont = document.createElement("link");
    googleFont.href = "https://fonts.googleapis.com/css2?family=Roboto:wght@400;600&family=Roboto:wght@700&display=swap";
    googleFont.type = "text/css";
    googleFont.rel = "stylesheet";
    document.head.appendChild(googleFont);
  })();
</script>






  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  












  
  




<link
  href="/css/style.80242d833be019717cee43f0786cb570079d37275977b299c9d7c6c156186d79.css"
  integrity="sha256-gCQtgzvgGXF87kPweGy1cAedNydZd7KZydfGwVYYbXk="
  rel="stylesheet" />


<link
  rel="stylesheet"
  href="/css/style-lazy.min.9e7e035d2f064fe004383f2ffc11a8f2966ef7b51c5fb2fac926e35c0061b5cf.css"
  integrity="sha256-nn4DXS8GT&#43;AEOD8v/BGo8pZu97UcX7L6ySbjXABhtc8="
  media="print"
  onload="this.media='all'; this.onload=null;" />


  </head>

  <body>
    
    
      



      

    


    
    





    
    <header
  class="header sticky top-0 z-30">
  <nav class="navbar container grid grid-cols-[repeat(3,1fr)] grid-rows-[1fr] gap-y-[10px] gap-x-[10px]">
    
    <div class="order-0 justify-start">
      
      <a class="navbar-brand block" href="/">
        






















  
  Nagih&#39;s Blog


      </a>
    </div>
    
    <input id="nav-toggle" type="checkbox" class="hidden" />
    <label
      for="nav-toggle"
      class="order-3 cursor-pointer flex items-center lg:hidden text-text-dark dark:text-white lg:order-1">
      <svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20">
        <title>Menu Open</title>
        <path d="M0 3h20v2H0V3z m0 6h20v2H0V9z m0 6h20v2H0V0z"></path>
      </svg>
      <svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20">
        <title>Menu Close</title>
        <polygon
          points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2"
          transform="rotate(45 10 10)"></polygon>
      </svg>
    </label>
    

    
    <ul
      id="nav-menu"
      class="navbar-nav order-3 hidden lg:flex w-full pb-6 lg:order-1 lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8 justify-center">
      
      
        
        
        
        
          <li class="nav-item">
            <a
              class="nav-link "
              
              href="/blog"
              >Blog</a
            >
          </li>
        
      
        
        
        
        
          <li class="nav-item">
            <a
              class="nav-link "
              
              href="/categories"
              >Categories</a
            >
          </li>
        
      
        
        
        
        
          <li class="nav-item">
            <a
              class="nav-link "
              
              href="/contact"
              >Contact</a
            >
          </li>
        
      
      
        <li class="mt-4 inline-block lg:hidden">
          <a
            class="btn btn-outline-primary btn-sm"
            href="/contact">
            get a quote
          </a>
        </li>
      
    </ul>

    <div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0 justify-end">
      
        
          <button
            aria-label="search"
            class="border-border text-text-dark hover:text-primary
            dark:border-darkmode-border mr-5 inline-block border-r pr-5
            text-xl dark:text-white cursor-pointer dark:hover:text-darkmode-primary
            "
            data-target="search-modal">
            <i class="fa-solid fa-search"></i>
          </button>
        
      

      

      


  <div class="theme-switcher mr-5 invisible">
    <input id="theme-switcher" data-theme-switcher type="checkbox" />
    <label for="theme-switcher">
      <span class="sr-only">theme switcher</span>
      <span>
        
        <svg
          class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-100 dark:opacity-0"
          viewBox="0 0 56 56"
          fill="#fff"
          height="16"
          width="16">
          <path
            d="M30 4.6c0-1-.9-2-2-2a2 2 0 0 0-2 2v5c0 1 .9 2 2 2s2-1 2-2Zm9.6 9a2 2 0 0 0 0 2.8c.8.8 2 .8 2.9 0L46 13a2 2 0 0 0 0-2.9 2 2 0 0 0-3 0Zm-26 2.8c.7.8 2 .8 2.8 0 .8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9 0-.7.8-.7 2.1 0 3ZM28 16a12 12 0 0 0-12 12 12 12 0 0 0 12 12 12 12 0 0 0 12-12 12 12 0 0 0-12-12Zm23.3 14c1.1 0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 0 0-2 2c0 1.1 1 2 2 2ZM4.7 26a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2Zm37.8 13.6a2 2 0 0 0-3 0 2 2 0 0 0 0 2.9l3.6 3.5a2 2 0 0 0 2.9 0c.8-.8.8-2.1 0-3ZM10 43.1a2 2 0 0 0 0 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1 0-2.9-.8-.8-2-.8-2.9 0Zm20 3.4c0-1.1-.9-2-2-2a2 2 0 0 0-2 2v4.9c0 1 .9 2 2 2s2-1 2-2Z" />
        </svg>
        
        <svg
          class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-0 dark:opacity-100"
          viewBox="0 0 24 24"
          fill="none"
          height="16"
          width="16">
          <path
            fill="#000"
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8.2 2.2c1-.4 2 .6 1.6 1.5-1 3-.4 6.4 1.8 8.7a8.4 8.4 0 0 0 8.7 1.8c1-.3 2 .5 1.5 1.5v.1a10.3 10.3 0 0 1-9.4 6.2A10.3 10.3 0 0 1 3.2 6.7c1-2 2.9-3.5 4.9-4.4Z" />
        </svg>
      </span>
    </label>
  </div>

  
  <script>
    var darkMode = localStorage.getItem("theme") === "dark";

    if (localStorage.getItem("theme") === null) {
      darkMode = false;

      
      if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        darkMode = true;
      }
      
    }

    if (darkMode) {
      document.documentElement.classList.add("dark");
    } else {
      document.documentElement.classList.remove("dark");
    }

    
    document.addEventListener("DOMContentLoaded", () => {
      var themeSwitch = document.querySelectorAll("[data-theme-switcher]");
      var themeSwitcherContainer = document.querySelector('.theme-switcher');

      [].forEach.call(themeSwitch, function (ts) {
        ts.checked = darkMode;
        ts.addEventListener("click", () => {
          document.documentElement.classList.toggle("dark");
          localStorage.setItem(
            "theme",
            document.documentElement.classList.contains("dark") ? "dark" : "light"
          );
        });
      });

      
      themeSwitcherContainer.classList.remove("invisible");
    });
  </script>




      
      
        <a
          href="/contact"
          class="btn btn-outline-primary btn-sm hidden lg:inline-block">
          get a quote
        </a>
      
    </div>
  </nav>
</header>

    




  
    <div
      class="search-modal "
      aria-hidden="true"
      style="--color-primary: #121212">
      <div data-target="close-search-modal" class="search-modal-overlay"></div>
      <div
        class="search-wrapper"
        data-image="true"
        data-description="true"
        data-tags="true"
        data-categories="true">
        <div class="search-wrapper-header">
          <label for="search-modal-input" style="margin-top:-1px">
            <span class="sr-only">search icon</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
              height="18"
              width="18"
              class="search-icon"
              data-type="search">
              <path
                fill="currentColor"
                d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z" />
            </svg>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
              height="18"
              width="18"
              class="search-reset"
              data-type="reset">
              <path
                fill="currentColor"
                d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z" />
            </svg>
          </label>
          <input
            id="search-modal-input"
            type="text"
            data-search-input
            autocomplete="off"
            aria-label="Search"
            placeholder="Search Post..." />
        </div>
        <div class="search-wrapper-body">
          <div class="search-result" data-search-result></div>
          <span class="search-result-empty">
            Type something to search..
          </span>
        </div>
        <div class="search-wrapper-footer">
          <span>
            <kbd>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                fill="currentColor"
                viewBox="0 0 16 16">
                <path
                  d="M3.204 11h9.592L8 5.519 3.204 11zm-.753-.659 4.796-5.48a1 1 0 0 1 1.506 0l4.796 5.48c.566.647.106 1.659-.753 1.659H3.204a1 1 0 0 1-.753-1.659z" />
              </svg>
            </kbd>
            <kbd>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                fill="currentColor"
                style="margin-top:1px;"
                viewBox="0 0 16 16">
                <path
                  d="M3.204 5h9.592L8 10.481 3.204 5zm-.753.659 4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659z" />
              </svg>
            </kbd>
            to navigate
          </span>
          <span>
            <kbd>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="12"
                height="12"
                fill="currentColor"
                style="display:inline-block;"
                viewBox="0 0 16 16">
                <path
                  fill-rule="evenodd"
                  d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5z" />
              </svg>
            </kbd>
            to select
          </span>
          <span class="search-result-info"></span>
          <span data-target="close-search-modal">
            <kbd>ESC</kbd> to close
          </span>
        </div>
      </div>
    </div>
  




    <main>
      
  <section class="section pt-7">
    <div class="container">
      <div class="row justify-center">
        <article class="lg:col-10">
          
          
            <div class="mb-10">
              




























  





  

  
  
    
      
    


    
    


    
    
      
      
    
    
    


    
    
      
      
        

        
        
        
        
        
        
        


        
        


        <picture>
          <source
            
              srcset="/images/image-placeholder_hu_c8971dd714d7d967.webp"
            
            media="(max-width: 575px)" />
          <source
            
              srcset="/images/image-placeholder_hu_7feb4cff3f0f2f38.webp"
            
            media="(max-width: 767px)" />
          <source
            
              srcset="/images/image-placeholder_hu_aa8934e738977bd1.webp"
            
            media="(max-width: 991px)" />
          <source
            
              srcset="/images/image-placeholder_hu_c6a26df46efa63e0.webp"
             />
          <img
            
              loading="lazy" decoding="async"
              src="/images/image-placeholder_hu_8da812934bbff7ba.png"
            class=" w-full rounded img"
            alt="DDD (Domain-Driven Design)"
            width="1096"
            height="480" />
        </picture>
      
      
    
    
  


  


            </div>
          
          <h1 class="h2 mb-4">
            DDD (Domain-Driven Design)
          </h1>
          <ul class="mb-4">
            <li class="mr-4 inline-block">
              <a
                href="/authors/nagih/">
                <i class="fa-regular fa-circle-user mr-2"></i
                >Nagih
              </a>
            </li>
            
            
              <li class="mr-4 inline-block">
                <i class="fa-regular fa-folder mr-2"></i>
                
                  <a
                    href="/categories/architechture/"
                    class=""
                    >Architechture
                      ,
                    
                  </a>
                
                  <a
                    href="/categories/microservices/"
                    class=""
                    >Microservices
                  </a>
                
              </li>
            
            <li class="mr-4 inline-block">
              <i class="fa-regular fa-clock mr-2"></i>
              August 27, 2025
            </li>
          </ul>
          <div class="content mb-10">
            

 
  

<details open class="table-of-content blog">
  <summary>
    
      Table of Contents
    
  </summary>
  <nav id="TableOfContents">
  <ol>
    <li><a href="#phần-i-các-nguyên-tắc-cốt-lõi-của-ddd">Phần I: Các Nguyên tắc Cốt lõi của DDD</a>
      <ol>
        <li><a href="#thiết-kế-chiến-lược-lập-bản-đồ-context-nghiệp-vụ">Thiết kế Chiến lược: Lập bản đồ Context Nghiệp vụ</a>
          <ol>
            <li><a href="#context-giới-hạn-bounded-contexts">Context Giới hạn (Bounded Contexts)</a></li>
          </ol>
        </li>
        <li><a href="#thiết-kế">Thiết kế</a></li>
      </ol>
    </li>
    <li><a href="#phần-ii-clean-và-hexagonal-architectures">Phần II: Clean và Hexagonal Architectures</a>
      <ol>
        <li><a href="#nguyên-tắc-đảo-ngược-phụ-thuộc">Nguyên tắc Đảo ngược Phụ thuộc</a></li>
        <li><a href="#cấu-trúc-lõi-ứng-dụng">Cấu trúc Lõi Ứng dụng</a></li>
      </ol>
    </li>
    <li><a href="#phần-iii-triển-khai-thực-tế">Phần III: Triển khai Thực tế</a>
      <ol>
        <li><a href="#cấu-trúc-project-go-ddd">Cấu trúc Project Go DDD</a></li>
        <li><a href="#triển-khai-mẫu-repository">Triển khai Mẫu Repository</a>
          <ol>
            <li><a href="#định-nghĩa-port-lớp-miền">Định nghĩa Port (Lớp Miền)</a></li>
            <li><a href="#triển-khai-các-adapter-lớp-hạ-tầng">Triển khai các Adapter (Lớp Hạ tầng)</a>
              <ol>
                <li><a href="#adapter-trong-bộ-nhớ-in-memory">Adapter Trong bộ nhớ (In-Memory)</a></li>
                <li><a href="#adapter-mysql">Adapter MySQL</a></li>
              </ol>
            </li>
            <li><a href="#kết-nối-các-lớp-ví-dụ-về-một-use-case">Kết nối các Lớp: Ví dụ về một Use Case</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#phần-iv-phân-tích-và-khuyến-nghị---sự-đánh-đổi-của-ddd-trong-go">Phần IV: Phân tích và Khuyến nghị - Sự Đánh đổi của DDD trong Go</a>
      <ol>
        <li><a href="#đánh-giá-lợi-ích-pros">Đánh giá Lợi ích (&ldquo;Pros&rdquo;)</a></li>
        <li><a href="#xem-xét-nhược-điểm-cons">Xem xét Nhược điểm (&ldquo;Cons&rdquo;)</a></li>
      </ol>
    </li>
    <li><a href="#kết-luận">Kết luận</a></li>
  </ol>
</nav>
</details>

            <p>Architecture Overview Domain-Driven Design(DDD)</p>
<h2 id="phần-i-các-nguyên-tắc-cốt-lõi-của-ddd">Phần I: Các Nguyên tắc Cốt lõi của DDD</h2>
<h3 id="thiết-kế-chiến-lược-lập-bản-đồ-context-nghiệp-vụ">Thiết kế Chiến lược: Lập bản đồ Context Nghiệp vụ</h3>
<h4 id="context-giới-hạn-bounded-contexts">Context Giới hạn (Bounded Contexts)</h4>
<p>Các hệ thống lớn hiếm khi có một mô hình <strong>duy nhất, thống nhất</strong>. Thuật ngữ &ldquo;Người dùng&rdquo; có thể có ý nghĩa khác nhau trong layer &ldquo;Xác thực&rdquo; so với context &ldquo;Hỗ trợ Kỹ thuật&rdquo;. Chiến lược &ldquo;chia để trị&rdquo; này là câu trả lời của DDD để quản lý sự phức tạp trong các tổ chức lớn. Việc xác định các context là mục tiêu chính của Thiết kế Chiến lược và rất quan trọng để xác định ranh giới của các microservice.</p>
<p>Toàn bộ cấu trúc của một hệ thống phức tạp bắt nguồn trực tiếp từ những sự mơ hồ về ngôn ngữ được phát hiện trong quá trình thiết kế. Quá trình này diễn ra như sau: đầu tiên, các nhà phát triển nhận ra rằng một thuật ngữ duy nhất (ví dụ: &ldquo;Khách hàng&rdquo;) có nhiều ý nghĩa mâu thuẫn giữa các phòng ban (hiện tượng đa nghĩa). Để giải quyết vấn đề này, họ áp dụng mẫu Bounded Context, vẽ ra các ranh giới rõ ràng xung quanh các khu vực mà ngôn ngữ là nhất quán. Ví dụ, một &ldquo;Context Bán hàng&rdquo; và một &ldquo;Context Hỗ trợ&rdquo; được xác định. Các Bounded Context này sau đó trở thành các service hoặc module riêng biệt trong kiến trúc.</p>
<p><em>p/s: Bounded Context được hiểu là 1 context bị giới hạn</em></p>
<h3 id="thiết-kế">Thiết kế</h3>
<p>Cung cấp các mẫu để xây dựng một mô hình miền phong phú <em>bên trong</em> một Bounded Context duy nhất.</p>
<ul>
<li>
<p><strong>Entities (Thực thể):</strong> Các đối tượng được xác định không phải bởi các thuộc tính của chúng, mà bởi định danh duy nhất và sự tồn tại liên tục theo thời gian (ví dụ: một <code>Customer</code> với một ID duy nhất). Chúng có thể thay đổi, nhưng các thay đổi trạng thái nên được mô hình hóa như các hoạt động nghiệp vụ rõ ràng (ví dụ:</p>
<p><code>customer.ChangeAddress()</code>, không phải <code>customer.setAddress()</code>.</p>
</li>
<li>
<p><strong>Value Objects (Đối tượng Giá trị):</strong> Các đối tượng đại diện cho một khía cạnh mô tả của miền và không có định danh khái niệm (ví dụ: <code>Money</code>, <code>Address</code>, <code>Color</code>). Được định nghĩa bởi các thuộc tính của chúng, là bất biến, và sự bằng nhau của chúng dựa trên giá trị, không phải định danh.</p>
</li>
<li>
<p><strong>Aggregates (Tập hợp):</strong> Một cụm các đối tượng liên quan (Entities và Value Objects) được coi là một đơn vị duy nhất cho các thay đổi dữ liệu. Mỗi Aggregate có một Entity gốc, được gọi là <strong>Aggregate Root</strong>. Aggregate Root là thành viên duy nhất của Aggregate mà các đối tượng bên ngoài được phép giữ tham chiếu đến. Nó chịu trách nhiệm thực thi các quy tắc nghiệp vụ (bất biến) cho toàn bộ cụm. Mẫu này xác định các ranh giới nhất quán giao dịch.</p>
</li>
<li>
<p><strong>Domain Services (Dịch vụ Miền):</strong> Khi một logic miền nào đó không tự nhiên thuộc về một Entity hoặc Value Object (ví dụ: một quy trình liên quan đến nhiều Aggregate), nó có thể được mô hình hóa trong một Domain Service không trạng thái.</p>
</li>
<li>
<p><strong>Domain Events (Sự kiện Miền):</strong> Một cơ chế để ghi lại các sự kiện quan trọng xảy ra trong miền (ví dụ: <code>OrderShipped</code>, <code>DeliveryCanceled</code>). Chúng rất quan trọng cho việc giao tiếp giữa các Aggregate và đặc biệt là giữa các Bounded Context khác nhau trong kiến trúc microservices.</p>
</li>
<li>
<p><strong>Repositories (Kho chứa) và Factories (Nhà máy):</strong> Repositories cung cấp ảo giác về một bộ sưu tập các Aggregate trong bộ nhớ, trừu tượng hóa cơ chế lưu trữ. Factories đóng gói logic để tạo ra các đối tượng hoặc Aggregate phức tạp.</p>
</li>
</ul>
<table>
  <thead>
      <tr>
          <th>Tên Mẫu</th>
          <th>Mục đích</th>
          <th>Đặc điểm Chính</th>
          <th>Ví dụ</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Entity</strong></td>
          <td>Đại diện cho một đối tượng có định danh và vòng đời.</td>
          <td>Có ID duy nhất, khả biến (mutable), sự bằng nhau dựa trên ID.</td>
          <td><code>Customer</code>, <code>Product</code>, <code>Order</code></td>
      </tr>
      <tr>
          <td><strong>Value Object</strong></td>
          <td>Mô tả một thuộc tính của miền.</td>
          <td>Không có ID, bất biến (immutable), sự bằng nhau dựa trên giá trị.</td>
          <td><code>Address</code>, <code>Money</code>, <code>DateRange</code></td>
      </tr>
      <tr>
          <td><strong>Aggregate</strong></td>
          <td>Một cụm các đối tượng được coi là một đơn vị nhất quán.</td>
          <td>Có một Aggregate Root, định nghĩa ranh giới giao dịch.</td>
          <td>Một <code>Order</code> cùng với các <code>OrderLineItem</code> của nó.</td>
      </tr>
      <tr>
          <td><strong>Domain Service</strong></td>
          <td>Đóng gói logic miền không thuộc về một Entity duy nhất.</td>
          <td>Không trạng thái, thường liên quan đến nhiều Aggregate.</td>
          <td>Dịch vụ tính toán phí vận chuyển dựa trên nhiều đơn hàng.</td>
      </tr>
      <tr>
          <td><strong>Domain Event</strong></td>
          <td>Ghi lại một sự kiện nghiệp vụ đã xảy ra.</td>
          <td>Bất biến, mô tả một điều gì đó trong quá khứ.</td>
          <td><code>OrderPlaced</code>, <code>PaymentReceived</code></td>
      </tr>
      <tr>
          <td><strong>Repository</strong></td>
          <td>Trừu tượng hóa việc truy cập và lưu trữ các Aggregate.</td>
          <td>Cung cấp giao diện giống như bộ sưu tập, ẩn chi tiết cơ sở dữ liệu.</td>
          <td><code>CustomerRepository</code>, <code>OrderRepository</code></td>
      </tr>
      <tr>
          <td><strong>Factory</strong></td>
          <td>Đóng gói logic tạo đối tượng phức tạp.</td>
          <td>Đảm bảo các đối tượng được tạo ra ở trạng thái hợp lệ.</td>
          <td><code>OrderFactory</code> tạo một <code>Order</code> từ các thông tin đầu vào.</td>
      </tr>
  </tbody>
</table>
<p><em><a href="https://blog.nagih.io.vn/post/architechture/ddd/internal-separation/"




 target="_blank"
 


>Phân biệt rõ các tác vụ trong Internal</a></em></p>
<h2 id="phần-ii-clean-và-hexagonal-architectures">Phần II: Clean và Hexagonal Architectures</h2>
<p>Phần này sẽ bắc cầu từ khái niệm DDD đến cấu trúc project.</p>
<h3 id="nguyên-tắc-đảo-ngược-phụ-thuộc">Nguyên tắc Đảo ngược Phụ thuộc</h3>
<p>Vấn đề với kiến trúc phân lớp truyền thống là logic nghiệp vụ thường trở nên phụ thuộc vào cơ sở dữ liệu.</p>
<p><strong>Kiến trúc Lục giác (Ports and Adapters):</strong> Mẫu này được giới thiệu như là giải pháp. Ý tưởng cốt lõi là cô lập logic nghiệp vụ của ứng dụng (&ldquo;hình lục giác&rdquo;) khỏi thế giới bên ngoài (UI, cơ sở dữ liệu, API bên ngoài).</p>
<ul>
<li>
<p><strong>Ports:</strong> Đây là các interface được định nghĩa <em>bên trong</em> hình lục giác, quy định cách thức giao tiếp diễn ra. Chúng đại diện cho nhu cầu của ứng dụng (ví dụ: <code>Tôi cần lưu một người dùng</code>, <code>Tôi cần được điều khiển bởi một yêu cầu HTTP</code>).</p>
</li>
<li>
<p><strong>Adapters:</strong> Đây là các triển khai cụ thể của các port, sống <em>bên ngoài</em> hình lục giác. Chúng dịch giữa port độc lập công nghệ và một công nghệ cụ thể (ví dụ: một adapter PostgreSQL triển khai port lưu người dùng, một adapter xử lý HTTP).</p>
</li>
</ul>
<h3 id="cấu-trúc-lõi-ứng-dụng">Cấu trúc Lõi Ứng dụng</h3>
<p><strong>Kiến trúc Sạch (Clean Architecture):</strong> Được trình bày như một sự phát triển chi tiết hơn của Kiến trúc Lục giác, tổ chức lõi thành các lớp đồng tâm.</p>
<p><strong>Quy tắc Phụ thuộc:</strong> Đây là quy tắc quan trọng nhất: các phụ thuộc mã nguồn chỉ có thể trỏ vào trong. Logic miền ở trung tâm không biết gì về các lớp bên ngoài.</p>
<p><strong>Giải thích các Lớp:</strong></p>
<ul>
<li>
<p><strong>Lớp Miền (Domain Layer - Entities):</strong> Trung tâm tuyệt đối. Chứa các Entities, Value Objects, và Aggregates được định nghĩa bởi Thiết kế Chiến thuật. Nó không có phụ thuộc bên ngoài nào.</p>
</li>
<li>
<p><strong>Lớp Ứng dụng (Application Layer - Use Cases):</strong> Quay quanh lớp miền. Nó chứa các quy tắc nghiệp vụ cụ thể của ứng dụng và điều phối các đối tượng miền để thực hiện các trường hợp sử dụng (ví dụ: <code>CreateOrderService</code>). Phụ thuộc vào lớp miền nhưng không phụ thuộc vào các lớp bên ngoài.</p>
</li>
<li>
<p><strong>Lớp Hạ tầng/Giao diện (Infrastructure/Interfaces Layer - Adapters):</strong> Lớp ngoài cùng. Chứa mọi thứ tương tác với thế giới bên ngoài: cơ sở dữ liệu, web frameworks, hàng đợi tin nhắn. Lớp này phụ thuộc vào các lớp bên trong, triển khai các interface (ports) mà chúng định nghĩa.</p>
</li>
</ul>
<p>Cấu trúc phân lớp của Clean Architecture về cơ bản là một chiến lược giảm thiểu rủi ro. Phần ổn định và quan trọng nhất của ứng dụng là các quy tắc nghiệp vụ cốt lõi (miền). Những quy tắc này lý tưởng chỉ nên thay đổi khi chính nghiệp vụ thay đổi. Ngược lại, các phần dễ thay đổi và ít độc đáo nhất là các chi tiết triển khai: cơ sở dữ liệu cụ thể, web framework, API của bên thứ ba. Quy tắc Phụ thuộc đảm bảo rằng những thay đổi trong các thành phần dễ thay đổi (lớp ngoài) không thể phá vỡ các thành phần ổn định (lớp trong). Việc chuyển từ PostgreSQL sang MongoDB không nên đòi hỏi thay đổi một dòng mã nào trong lớp miền hoặc lớp ứng dụng. Do đó, kiến trúc được thiết kế để bảo vệ tài sản quý giá nhất (logic nghiệp vụ) khỏi các thành phần có rủi ro cao nhất (chi tiết triển khai). Nó hoạt động như một bức tường lửa kiến trúc, làm cho hệ thống trở nên kiên cường hơn trước sự thay đổi công nghệ và dễ bảo trì hơn trong dài hạn.</p>
<h2 id="phần-iii-triển-khai-thực-tế">Phần III: Triển khai Thực tế</h2>
<h3 id="cấu-trúc-project-go-ddd">Cấu trúc Project Go DDD</h3>
<p>Phần này trình bày một cấu trúc project Go kinh điển, được tổng hợp từ nhiều ví dụ. Cấu trúc này tuân thủ các quy ước của Go và các thực tiễn tốt nhất của cộng đồng (ví dụ: sử dụng thư mục <code>/internal</code>).</p>
<p><strong>Cấu trúc Thư mục Đề xuất:</strong></p>
<pre tabindex="0"><code>/cmd
  /app
    main.go          // Điểm khởi đầu ứng dụng, DI
/internal
  /application       // Các dịch vụ ứng dụng, use cases, DTOs
    /user
      service.go
  /domain            // Logic miền cốt lõi
    /user
      user.go        // Aggregate root User, entities, value objects
      repository.go  // Interface Repository (port)
  /infrastructure    // Triển khai cụ thể các interface của miền
    /repository
      user_memory.go // Triển khai repository trong bộ nhớ
      user_mysql.go  // Triển khai repository MySQL
  /interfaces        // Các adapter điều khiển ứng dụng
    /http
      handler.go     // Các HTTP handler (controllers)
      router.go
</code></pre><p>Bảng sau đây tạo ra một liên kết rõ ràng giữa các khái niệm trừu tượng của DDD/Clean Architecture và các thư mục cụ thể trong project Go.</p>
<table>
  <thead>
      <tr>
          <th>Mẫu DDD/Chiến thuật</th>
          <th>Khái niệm Clean/Hexagonal</th>
          <th>Trách nhiệm của Lớp</th>
          <th>Thư mục Go</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Aggregate Root</strong></td>
          <td>Entity</td>
          <td>Mô hình hóa các quy tắc nghiệp vụ cốt lõi, bất biến.</td>
          <td><code>/internal/domain/user/user.go</code></td>
      </tr>
      <tr>
          <td><strong>Repository Interface</strong></td>
          <td>Port (Driven)</td>
          <td>Định nghĩa hợp đồng cho việc lưu trữ, độc lập công nghệ.</td>
          <td><code>/internal/domain/user/repository.go</code></td>
      </tr>
      <tr>
          <td><strong>Application Service</strong></td>
          <td>Use Case / Interactor</td>
          <td>Điều phối các đối tượng miền để thực hiện một tác vụ.</td>
          <td><code>/internal/application/user/service.go</code></td>
      </tr>
      <tr>
          <td><strong>Repository Implementation</strong></td>
          <td>Adapter (Driven)</td>
          <td>Triển khai cụ thể việc lưu trữ (ví dụ: PostgreSQL, MongoDB).</td>
          <td><code>/internal/infrastructure/repository/user_mysql.go</code></td>
      </tr>
      <tr>
          <td><strong>HTTP Handler</strong></td>
          <td>Adapter (Driving)</td>
          <td>Dịch các yêu cầu HTTP thành các lệnh gọi Application Service.</td>
          <td><code>/internal/interfaces/http/handler.go</code></td>
      </tr>
  </tbody>
</table>
<h3 id="triển-khai-mẫu-repository">Triển khai Mẫu Repository</h3>
<h4 id="định-nghĩa-port-lớp-miền">Định nghĩa Port (Lớp Miền)</h4>
<p>Đây là mã nguồn cho interface <code>Repository</code>. Interface này nằm trong package <code>domain</code> vì nó định nghĩa một hợp đồng mà lõi nghiệp vụ yêu cầu, nhưng nó không quan tâm đến cách hợp đồng đó được thực hiện. Nó hoàn toàn độc lập với công nghệ.</p>
<p>Go</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// trong /internal/domain/hour/repository.go</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">hour</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;context&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;time&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Repository</span> <span style="color:#66d9ef">interface</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">GetOrCreateHour</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">hourTime</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Hour</span>, <span style="color:#66d9ef">error</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">UpdateHour</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">hourTime</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">updateFn</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">h</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Hour</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Hour</span>, <span style="color:#66d9ef">error</span>),
</span></span><span style="display:flex;"><span>    ) <span style="color:#66d9ef">error</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="triển-khai-các-adapter-lớp-hạ-tầng">Triển khai các Adapter (Lớp Hạ tầng)</h4>
<h5 id="adapter-trong-bộ-nhớ-in-memory">Adapter Trong bộ nhớ (In-Memory)</h5>
<p>Triển khai này sử dụng một map của Go để mô phỏng một cơ sở dữ liệu. Nó rất quan trọng để cho phép các bài kiểm thử đơn vị (unit test) nhanh chóng và đáng tin cậy cho các dịch vụ ứng dụng mà không cần đến một cơ sở dữ liệu thực sự.</p>
<p>Go</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// trong /internal/infrastructure/repository/hour_memory.go</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">repository</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//... imports</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MemoryHourRepository</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">hours</span> <span style="color:#a6e22e">maphour</span>.<span style="color:#a6e22e">Hour</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">lock</span>  <span style="color:#f92672">*</span><span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">RWMutex</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">hourFactory</span> <span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">Factory</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewMemoryHourRepository</span>(<span style="color:#a6e22e">hourFactory</span> <span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">Factory</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">MemoryHourRepository</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">MemoryHourRepository</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">hours</span>:       <span style="color:#a6e22e">maphour</span>.<span style="color:#a6e22e">Hour</span>{},
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">lock</span>:        <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">RWMutex</span>{},
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">hourFactory</span>: <span style="color:#a6e22e">hourFactory</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MemoryHourRepository</span>) <span style="color:#a6e22e">UpdateHour</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">_</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">hourTime</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">updateFn</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">h</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">Hour</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">Hour</span>, <span style="color:#66d9ef">error</span>),
</span></span><span style="display:flex;"><span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">lock</span>.<span style="color:#a6e22e">Lock</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">lock</span>.<span style="color:#a6e22e">Unlock</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">currentHour</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">getOrCreateHour</span>(<span style="color:#a6e22e">hourTime</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span><span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">updatedHour</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">updateFn</span>(<span style="color:#a6e22e">currentHour</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span><span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">hours</span> = <span style="color:#f92672">*</span><span style="color:#a6e22e">updatedHour</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//... các phương thức khác</span>
</span></span></code></pre></div><h5 id="adapter-mysql">Adapter MySQL</h5>
<p>Đây là một triển khai sẵn sàng cho môi trường production, bao gồm cả việc quản lý giao dịch để đảm bảo tính nhất quán của dữ liệu.</p>
<p>Go</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// trong /internal/infrastructure/repository/hour_mysql.go</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">repository</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//... imports</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MySQLHourRepository</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">sqlx</span>.<span style="color:#a6e22e">DB</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">hourFactory</span> <span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">Factory</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//... NewMySQLHourRepository</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#a6e22e">MySQLHourRepository</span>) <span style="color:#a6e22e">UpdateHour</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">hourTime</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">updateFn</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">h</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">Hour</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">Hour</span>, <span style="color:#66d9ef">error</span>),
</span></span><span style="display:flex;"><span>) (<span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tx</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">Beginx</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span><span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">Wrap</span>(<span style="color:#a6e22e">err</span>, <span style="color:#e6db74">&#34;unable to start transaction&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#66d9ef">func</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">finishTransaction</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">tx</span>)
</span></span><span style="display:flex;"><span>    }()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">existingHour</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">getOrCreateHour</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">tx</span>, <span style="color:#a6e22e">hourTime</span>, <span style="color:#66d9ef">true</span>) <span style="color:#75715e">// forUpdate = true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span><span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">updatedHour</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">updateFn</span>(<span style="color:#a6e22e">existingHour</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span><span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">upsertHour</span>(<span style="color:#a6e22e">tx</span>, <span style="color:#a6e22e">updatedHour</span>); <span style="color:#a6e22e">err</span><span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#a6e22e">MySQLHourRepository</span>) <span style="color:#a6e22e">getOrCreateHour</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span> <span style="color:#a6e22e">sqlContextGetter</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">hourTime</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">forUpdate</span> <span style="color:#66d9ef">bool</span>,
</span></span><span style="display:flex;"><span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">Hour</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">query</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;SELECT * FROM `hours` WHERE `hour` =?&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">forUpdate</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">query</span> <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34; FOR UPDATE&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//...</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//... các phương thức khác</span>
</span></span></code></pre></div><h4 id="kết-nối-các-lớp-ví-dụ-về-một-use-case">Kết nối các Lớp: Ví dụ về một Use Case</h4>
<p>Một <code>Application Service</code> sẽ sử dụng interface <code>hour.Repository</code> thông qua dependency injection. Nó không biết và không quan tâm đến việc triển khai cụ thể là in-memory hay MySQL.</p>
<p>Go</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// trong /internal/application/booking/service.go</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">booking</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Service</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">hourRepo</span> <span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">Repository</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Service</span>) <span style="color:#a6e22e">ScheduleTraining</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">hourTime</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">hourRepo</span>.<span style="color:#a6e22e">UpdateHour</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">hourTime</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">h</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">Hour</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">Hour</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">ScheduleTraining</span>(); <span style="color:#a6e22e">err</span><span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">h</span>, <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Cuối cùng, tệp <code>main.go</code> là nơi ứng dụng được khởi tạo. Đây là nơi &ldquo;kết nối&rdquo; xảy ra: một <code>MySQLHourRepository</code> cụ thể được khởi tạo và được tiêm vào <code>Application Service</code>, thỏa mãn interface <code>hour.Repository</code>. Điều này minh họa cơ chế dependency injection làm cho toàn bộ kiến trúc hoạt động.</p>
<p>Go</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// trong /cmd/app/main.go</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//... thiết lập kết nối cơ sở dữ liệu (db)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">hourFactory</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">hour</span>.<span style="color:#a6e22e">NewFactory</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Tiêm triển khai MySQL cụ thể</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">hourRepo</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">repository</span>.<span style="color:#a6e22e">NewMySQLHourRepository</span>(<span style="color:#a6e22e">db</span>, <span style="color:#a6e22e">hourFactory</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">bookingService</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">booking</span>.<span style="color:#a6e22e">NewService</span>(<span style="color:#a6e22e">hourRepo</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//... khởi tạo và chạy máy chủ HTTP với bookingService</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="phần-iv-phân-tích-và-khuyến-nghị---sự-đánh-đổi-của-ddd-trong-go">Phần IV: Phân tích và Khuyến nghị - Sự Đánh đổi của DDD trong Go</h2>
<h3 id="đánh-giá-lợi-ích-pros">Đánh giá Lợi ích (&ldquo;Pros&rdquo;)</h3>
<ul>
<li>
<p><strong>Khả năng Kiểm thử (Testability):</strong> Logic nghiệp vụ cốt lõi có thể được kiểm thử hoàn toàn độc lập với UI, cơ sở dữ liệu hoặc bất kỳ dịch vụ bên ngoài nào, dẫn đến các bài kiểm thử nhanh hơn và đáng tin cậy hơn.</p>
</li>
<li>
<p><strong>Khả năng Bảo trì &amp; Linh hoạt:</strong> Sự tách biệt rõ ràng các mối quan tâm và quy tắc phụ thuộc có nghĩa là những thay đổi ở một phần của hệ thống (ví dụ: thay đổi cơ sở dữ liệu) có tác động tối thiểu đến các phần khác. Điều này làm cho codebase dễ hiểu và phát triển hơn theo thời gian.</p>
</li>
<li>
<p><strong>Phát triển Song song:</strong> Một khi các interface (ports) được định nghĩa, các nhóm khác nhau có thể làm việc trên các adapter khác nhau (ví dụ: nhóm UI, nhóm cơ sở dữ liệu) song song mà không có xung đột.</p>
</li>
<li>
<p><strong>Phù hợp với Nghiệp vụ:</strong> Kiến trúc buộc mã nguồn phải phản ánh miền nghiệp vụ, tạo ra một tài sản có giá trị và dễ hiểu hơn.</p>
</li>
</ul>
<h3 id="xem-xét-nhược-điểm-cons">Xem xét Nhược điểm (&ldquo;Cons&rdquo;)</h3>
<ul>
<li>
<p><strong>Phức tạp &amp; Đường cong Học tập:</strong> Đây không phải là kiến trúc dành cho người mới bắt đầu. Nó đòi hỏi sự hiểu biết vững chắc về các nguyên tắc thiết kế phần mềm như SOLID và chính DDD. Có một sự đầu tư đáng kể ban đầu về thời gian học tập.</p>
</li>
<li>
<p><strong>Mã lặp (Boilerplate) &amp; Sự Gián tiếp:</strong> Nhu cầu về các interface, DTO, và việc ánh xạ giữa các lớp có thể làm tăng lượng mã và khiến việc theo dõi một yêu cầu có cảm giác như &ldquo;nhảy qua các lớp thừa thãi&rdquo;.</p>
</li>
<li>
<p><strong>Nguy cơ Thiết kế Quá mức (Over-Engineering):</strong> Đối với các ứng dụng CRUD đơn giản hoặc các project có logic nghiệp vụ tối thiểu, kiến trúc này là quá mức cần thiết. Chi phí triển khai vượt xa lợi ích. Điều này trực tiếp giải quyết những lo ngại của cộng đồng Go về việc các mẫu &ldquo;doanh nghiệp&rdquo; bị áp đặt lên một ngôn ngữ coi trọng sự đơn giản.</p>
</li>
<li>
<p><strong>Chi phí Hiệu năng Tiềm tàng:</strong> Sự gián tiếp từ các interface và việc ánh xạ dữ liệu có thể gây ra một hình phạt hiệu năng nhỏ, điều này có thể là một mối quan tâm trong các ứng dụng yêu cầu hiệu năng cực kỳ cao.</p>
</li>
</ul>
<h2 id="kết-luận">Kết luận</h2>
<p>DDD, được hỗ trợ bởi kiến trúc Clean/Hexagonal, là một chiến lược mạnh mẽ để xây dựng các ứng dụng Go phức tạp, dễ bảo trì và bền vững. Đây là một sự đầu tư chiến lược. Chi phí ban đầu về sự phức tạp và học tập được đền đáp trong suốt vòng đời của dự án thông qua việc tăng khả năng bảo trì, khả năng kiểm thử và khả năng thích ứng với các nhu cầu nghiệp vụ thay đổi.</p>
<hr>
<p><em>Nếu thấy hay, hãy để lại cho mình 1 comment xuống phía dưới để mình có động lực viết các blog chất lượng tiếp theo nhé!</em></p>
          </div>
          <div class="row items-start justify-between">
            
            
              <div class="lg:col-6 mb-10 flex items-center lg:mb-0">
                <h5 class="mr-3">Tags :</h5>
                <ul>
                  
                    <li class="inline-block">
                      <a
                        class="bg-light hover:bg-primary dark:bg-darkmode-light dark:hover:bg-darkmode-primary dark:hover:text-text-dark m-1 block rounded px-3 py-1 hover:text-white"
                        href="/tags/go/">
                        Go
                      </a>
                    </li>
                  
                </ul>
              </div>
            
            <div class="lg:col-6 flex items-center lg:justify-end">
              <h5>Share :</h5>
              


















<div class="share-icons">
  
  
    <a
      class="share-link share-facebook"
      href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.nagih.io.vn%2fblog%2farchitechture%2fddd%2foverview%2f"
      target="_blank"
      rel="noopener"
      aria-label="share facebook">
      <span class="share-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z" />
        </svg>
      </span>
    </a>
  


  
  
    <a
      class="share-link share-x"
      href="https://x.com/intent/tweet/?text=DDD%20%28Domain-Driven%20Design%29&amp;url=https%3a%2f%2fblog.nagih.io.vn%2fblog%2farchitechture%2fddd%2foverview%2f"
      target="_blank"
      rel="noopener"
      aria-label="share x">
      <span aria-hidden="true" class="share-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M8 2H1l8.26 11.015L1.45 22H4.1l6.388-7.349L16 22h7l-8.608-11.478L21.8 2h-2.65l-5.986 6.886zm9 18L5 4h2l12 16z" />
        </svg>
      </span>
    </a>
  


  
  
    <a
      class="share-link share-email"
      href="mailto:?subject=DDD%20%28Domain-Driven%20Design%29&amp;body=https%3a%2f%2fblog.nagih.io.vn%2fblog%2farchitechture%2fddd%2foverview%2f"
      target="_self"
      rel="noopener"
      aria-label="share email">
      <span aria-hidden="true" class="share-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z" />
        </svg>
      </span>
    </a>
  


  
  


  
  


  
  


  
  


  
  


  
  


  
  


  
  
    <span class="fediverse-share">
      <a
        class="share-link share-fediverse"
        href="javascript:void(0);"
        onclick="toggleFediverseInput(this)"
        aria-label="share fediverse">
        <span aria-hidden="true" class="share-icon">
          <svg
            viewBox="-10 -5 1034 1034"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            version="1.1">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
              <path
                d="M539 176q-32 0 -55 22t-25 55t20.5 58t56 27t58.5 -20.5t27 -56t-20.5 -59t-56.5 -26.5h-5zM452 271l-232 118q20 20 25 48l231 -118q-19 -20 -24 -48zM619 298q-13 25 -38 38l183 184q13 -25 39 -38zM477 320l-135 265l40 40l143 -280q-28 -5 -48 -25zM581 336 q-22 11 -46 10l-8 -1l21 132l56 9zM155 370q-32 0 -55 22.5t-25 55t20.5 58t56.5 27t59 -21t26.5 -56t-21 -58.5t-55.5 -27h-6zM245 438q1 9 1 18q-1 19 -10 35l132 21l26 -50zM470 474l-26 51l311 49q-1 -8 -1 -17q1 -19 10 -36zM842 480q-32 1 -55 23t-24.5 55t21 58 t56 27t58.5 -20.5t27 -56.5t-20.5 -59t-56.5 -27h-6zM236 493q-13 25 -39 38l210 210l51 -25zM196 531q-21 11 -44 10l-9 -1l40 256q21 -10 45 -9l8 1zM560 553l48 311q21 -10 44 -9l10 1l-46 -294zM755 576l-118 60l8 56l135 -68q-20 -20 -25 -48zM781 625l-119 231 q28 5 48 25l119 -231q-28 -5 -48 -25zM306 654l-68 134q28 5 48 25l60 -119zM568 671l-281 143q19 20 24 48l265 -135zM513 771l-51 25l106 107q13 -25 39 -38zM222 795q-32 0 -55.5 22.5t-25 55t21 57.5t56 27t58.5 -20.5t27 -56t-20.5 -58.5t-56.5 -27h-5zM311 863 q2 9 1 18q-1 19 -9 35l256 41q-1 -9 -1 -18q1 -18 10 -35zM646 863q-32 0 -55 22.5t-24.5 55t20.5 58t56 27t59 -21t27 -56t-20.5 -58.5t-56.5 -27h-6z"></path>
            </g>
          </svg>
        </span>
      </a>
      <span class="fediverse-input-wrapper" style="display: none;">
        <input
          type="text"
          placeholder="Enter Fediverse Instance URL"
          class="fediverse-input"
          onkeypress="handleFediverseShare(event, 'https:\/\/blog.nagih.io.vn\/blog\/architechture\/ddd\/overview\/', 'DDD (Domain-Driven Design)')" />
        <button
          class="fediverse-check-button"
          onclick="handleFediverseShareButton(this, 'https:\/\/blog.nagih.io.vn\/blog\/architechture\/ddd\/overview\/', 'DDD (Domain-Driven Design)')">
          Share
        </button>
      </span>
    </span>
  


  
  
    <button
      class="share-link share-copy"
      onclick="copyToClipboard(this, 'https:\/\/blog.nagih.io.vn\/blog\/architechture\/ddd\/overview\/')">
      <span class="share-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-1c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 17H5V5h14v14z" />
        </svg>
      </span>
    </button>
  

</div>

<script>
  
  function toggleFediverseInput(element) {
    const container = element.closest(".fediverse-share");
    const inputContainer = container.querySelector(".fediverse-input-wrapper");
    inputContainer.style.display =
      inputContainer.style.display === "none" ? "block" : "none";
  }

  
  function handleFediverseShare(event, url, title) {
    if (event.key === "Enter") {
      const input = event.target;
      let instanceUrl = input.value.trim();
      if (instanceUrl) {
        if (!instanceUrl.startsWith("https://")) {
          instanceUrl = `https://${instanceUrl}`;
        }
        const shareUrl = `${instanceUrl}/share?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`;
        window.open(shareUrl, "_blank", "noopener");
      }
    }
  }

  
  function handleFediverseShareButton(button, url, title) {
    const input = button.previousElementSibling;
    let instanceUrl = input.value.trim();
    if (instanceUrl) {
      if (!instanceUrl.startsWith("https://")) {
        instanceUrl = `https://${instanceUrl}`;
      }
      const shareUrl = `${instanceUrl}/share?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`;
      window.open(shareUrl, "_blank", "noopener");
    }
  }

  
  function copyToClipboard(button, text) {
    navigator.clipboard.writeText(text).then(() => {
      const icon = button.querySelector("svg path");
      const originalIconPath =
        "M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-1c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 17H5V5h14v14z";
      const checkIconPath =
        "M9 16.2l-3.5-3.5-1.4 1.4L9 19 20 8l-1.4-1.4L9 16.2z";

      
      icon.setAttribute("d", checkIconPath);

      
      setTimeout(() => {
        icon.setAttribute("d", originalIconPath);
      }, 1000);
    });
  }
</script>

            </div>
          </div>
          
          
            <div class="mt-20">
              <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "themefisher-template" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
          
        </article>
      </div>

      
      
      
      
    </div>
  </section>

    </main>

    
    <footer class="bg-light dark:bg-darkmode-light">
  <div class="container">
    <div class="row items-center py-10">
      <div class="lg:col-3 mb-8 text-center lg:mb-0 lg:text-left">
        
        <a
          class="navbar-brand inline-block"
          href="/">
          






















  
  Nagih&#39;s Blog


        </a>
      </div>
      <div class="lg:col-6 mb-8 text-center lg:mb-0">
        <ul>
          
            <li class="m-3 inline-block">
              <a
                
                href="
                  /about
                "
                >About</a
              >
            </li>
          
            <li class="m-3 inline-block">
              <a
                
                href="
                  /privacy-policy
                "
                >Privacy Policy</a
              >
            </li>
          
        </ul>
      </div>
      <div class="lg:col-3 mb-8 text-center lg:mb-0 lg:mt-0 lg:text-right">
        <ul class="social-icons">
          
            <li>
              <a
                target="_blank"
                aria-label="facebook"
                rel="nofollow noopener"
                href="https://www.facebook.com/vmn.isme">
                <i class="fab fa-facebook"></i>
              </a>
            </li>
          
            <li>
              <a
                target="_blank"
                aria-label="twitter"
                rel="nofollow noopener"
                href="https://twitter.com/nagihdayo">
                <i class="fab fa-twitter"></i>
              </a>
            </li>
          
            <li>
              <a
                target="_blank"
                aria-label="github"
                rel="nofollow noopener"
                href="https://www.github.com/vuongmanhnghia">
                <i class="fab fa-github"></i>
              </a>
            </li>
          
            <li>
              <a
                target="_blank"
                aria-label="linkedin"
                rel="nofollow noopener"
                href="https://www.linkedin.com/in/vuongmanhnghia">
                <i class="fab fa-linkedin"></i>
              </a>
            </li>
          
        </ul>
      </div>
    </div>
  </div>
  <div class="border-border dark:border-darkmode-border border-t py-7">
    <div
      class="text-text-light dark:text-darkmode-text-light container text-center">
      <p>
        Developed by <a href="https://nagih.io.vn"




 target="_blank"
 


>Nagih</a>
      </p>
    </div>
  </div>
</footer>



    
    



  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  










  
  



<script
  crossorigin="anonymous"
  integrity="sha256-LO9JECYLqyMcpGlrtxZcpUn0I8AvhO6oIIibJZv4zbk="
  src="/js/script.min.2cef4910260bab231ca4696bb7165ca549f423c02f84eea820889b259bf8cdb9.js"></script>


<script
  defer
  async
  crossorigin="anonymous"
  integrity="sha256-5VBZe/VmPQWXcchTWy6cUTaJdnltCLjAbCqDnX&#43;XWoQ="
  src="/js/script-lazy.min.e550597bf5663d059771c8535b2e9c51368976796d08b8c06c2a839d7f975a84.js"></script>



<script>
  if ('serviceWorker' in navigator){navigator.serviceWorker.register("/service-worker.js");}
</script>






  












  



  </body>
</html>
